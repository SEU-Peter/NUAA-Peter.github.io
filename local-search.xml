<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05ï¼šæ­£åˆ™åŒ–æŠ€æœ¯</title>
    <link href="/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A005%EF%BC%9A%E6%AD%A3%E5%88%99%E5%8C%96%E6%8A%80%E6%9C%AF/"/>
    <url>/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A005%EF%BC%9A%E6%AD%A3%E5%88%99%E5%8C%96%E6%8A%80%E6%9C%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05ï¼šæ­£åˆ™åŒ–æŠ€æœ¯"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05ï¼šæ­£åˆ™åŒ–æŠ€æœ¯" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05ï¼šæ­£åˆ™åŒ–æŠ€æœ¯"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 05ï¼šæ­£åˆ™åŒ–æŠ€æœ¯</h2><p>æˆ‘ä»¬æ€»æ˜¯å¯ä»¥é€šè¿‡å»æ”¶é›†æ›´å¤šçš„è®­ç»ƒæ•°æ®æ¥ç¼“è§£è¿‡æ‹Ÿåˆã€‚ ä½†è¿™å¯èƒ½æˆæœ¬å¾ˆé«˜ï¼Œè€—æ—¶é¢‡å¤šï¼Œæˆ–è€…å®Œå…¨è¶…å‡ºæˆ‘ä»¬çš„æ§åˆ¶ï¼Œå› è€Œåœ¨çŸ­æœŸå†…ä¸å¯èƒ½åšåˆ°ã€‚ å‡è®¾æˆ‘ä»¬å·²ç»æ‹¥æœ‰å°½å¯èƒ½å¤šçš„é«˜è´¨é‡æ•°æ®ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å°†é‡ç‚¹æ”¾åœ¨æ­£åˆ™åŒ–æŠ€æœ¯ä¸Šã€‚</p><h3 id="æƒé‡è¡°å‡"><a href="#æƒé‡è¡°å‡" class="headerlink" title="æƒé‡è¡°å‡"></a>æƒé‡è¡°å‡</h3><p><em>æƒé‡è¡°å‡</em>ï¼ˆweight decayï¼‰æ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„æ­£åˆ™åŒ–çš„æŠ€æœ¯ä¹‹ä¸€ï¼Œ å®ƒé€šå¸¸ä¹Ÿè¢«ç§°ä¸ºğ¿2<em>æ­£åˆ™åŒ–</em><br>$$<br>L(\mathbf{w}, b) &#x3D; \frac{1}{n}\sum_{i&#x3D;1}^n \frac{1}{2}\left(\mathbf{w}^\top \mathbf{x}^{(i)} + b - y^{(i)}\right)^2<br>$$</p><p>$$<br>L(\mathbf{w}, b) + \frac{\lambda}{2} |\mathbf{w}|^2<br>$$</p><p>$$<br>\begin{aligned}<br>\mathbf{w} &amp; \leftarrow \left(1- \eta\lambda \right) \mathbf{w} - \frac{\eta}{|\mathcal{B}|} \sum_{i \in \mathcal{B}} \mathbf{x}^{(i)} \left(\mathbf{w}^\top \mathbf{x}^{(i)} + b - y^{(i)}\right).<br>\end{aligned}<br>$$</p><h4 id="ä»é›¶å®ç°"><a href="#ä»é›¶å®ç°" class="headerlink" title="ä»é›¶å®ç°"></a>ä»é›¶å®ç°</h4><p>æˆ‘ä»¬é€‰æ‹©æ ‡ç­¾æ˜¯å…³äºè¾“å…¥çš„çº¿æ€§å‡½æ•°ã€‚ æ ‡ç­¾åŒæ—¶è¢«å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º0.01é«˜æ–¯å™ªå£°ç ´åã€‚ ä¸ºäº†ä½¿è¿‡æ‹Ÿåˆçš„æ•ˆæœæ›´åŠ æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†é—®é¢˜çš„ç»´æ•°å¢åŠ åˆ°ğ‘‘&#x3D;200ï¼Œ å¹¶ä½¿ç”¨ä¸€ä¸ªåªåŒ…å«20ä¸ªæ ·æœ¬çš„å°è®­ç»ƒé›†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span><br>n_train, n_test, num_inputs, batch_size = <span class="hljs-number">20</span>, <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">10</span><br>true_w, true_b = torch.ones((num_inputs, <span class="hljs-number">1</span>)) * <span class="hljs-number">0.01</span>, <span class="hljs-number">0.05</span><br>train_data = d2l.synthetic_data(true_w, true_b, n_train)<br>train_iter = d2l.load_array(train_data, batch_size)<br>test_data = d2l.synthetic_data(true_w, true_b, n_test)<br>test_iter = d2l.load_array(test_data, batch_size, is_train=<span class="hljs-literal">False</span>)<br><br><span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹å‚æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_params</span>():<br>    w = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, size=(num_inputs, <span class="hljs-number">1</span>), requires_grad=<span class="hljs-literal">True</span>)<br>    b = torch.zeros(<span class="hljs-number">1</span>, requires_grad=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> [w, b]<br><br><span class="hljs-comment"># å®šä¹‰L2èŒƒæ•°æƒ©ç½š</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">l2_penalty</span>(<span class="hljs-params">w</span>):<br>    <span class="hljs-keyword">return</span> torch.<span class="hljs-built_in">sum</span>(w.<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>)) / <span class="hljs-number">2</span><br><br><span class="hljs-comment"># è®­ç»ƒä»£ç </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">lambd</span>):<br>    w, b = init_params()<br>    net, loss = <span class="hljs-keyword">lambda</span> X: d2l.linreg(X, w, b), d2l.squared_loss<br>    num_epochs, lr = <span class="hljs-number">150</span>, <span class="hljs-number">0.03</span><br>    animator = d2l.Animator(xlabel=<span class="hljs-string">&#x27;epochs&#x27;</span>, ylabel=<span class="hljs-string">&#x27;loss&#x27;</span>, yscale=<span class="hljs-string">&#x27;log&#x27;</span>,<br>                            xlim=[<span class="hljs-number">5</span>, num_epochs], legend=[<span class="hljs-string">&#x27;train&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>            <span class="hljs-comment"># å¢åŠ äº†L2èŒƒæ•°æƒ©ç½šé¡¹ï¼Œ</span><br>            <span class="hljs-comment"># å¹¿æ’­æœºåˆ¶ä½¿l2_penalty(w)æˆä¸ºä¸€ä¸ªé•¿åº¦ä¸ºbatch_sizeçš„å‘é‡</span><br>            l = loss(net(X), y) + lambd * l2_penalty(w)<br>            l.<span class="hljs-built_in">sum</span>().backward()<br>            d2l.sgd([w, b], lr, batch_size)<br>        <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:<br>            animator.add(epoch + <span class="hljs-number">1</span>, (d2l.evaluate_loss(net, train_iter, loss),<br>                                     d2l.evaluate_loss(net, test_iter, loss)))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;wçš„L2èŒƒæ•°æ˜¯ï¼š&#x27;</span>, torch.norm(w).item())<br><br>train(lambd=<span class="hljs-number">0</span>)<br>train(lambd=<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102163654737.png" alt="æœªä½¿ç”¨æƒé‡è¡°å‡"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102163724969.png" alt="ä½¿ç”¨äº†æƒé‡è¡°å‡"></p><h4 id="ç®€æ´å®ç°"><a href="#ç®€æ´å®ç°" class="headerlink" title="ç®€æ´å®ç°"></a>ç®€æ´å®ç°</h4><p>æˆ‘ä»¬åœ¨å®ä¾‹åŒ–ä¼˜åŒ–å™¨æ—¶ç›´æ¥é€šè¿‡<code>weight_decay</code>æŒ‡å®šweight decayè¶…å‚æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒPyTorchåŒæ—¶è¡°å‡æƒé‡å’Œåç§»ã€‚ è¿™é‡Œæˆ‘ä»¬åªä¸ºæƒé‡è®¾ç½®äº†<code>weight_decay</code>ï¼Œæ‰€ä»¥åç½®å‚æ•°ğ‘bä¸ä¼šè¡°å‡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_concise</span>(<span class="hljs-params">wd</span>):<br>    net = nn.Sequential(nn.Linear(num_inputs, <span class="hljs-number">1</span>))<br>    <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> net.parameters():<br>        param.data.normal_()<br>    loss = nn.MSELoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>    num_epochs, lr = <span class="hljs-number">150</span>, <span class="hljs-number">0.03</span><br>    <span class="hljs-comment"># åç½®å‚æ•°æ²¡æœ‰è¡°å‡</span><br>    trainer = torch.optim.SGD([<br>        &#123;<span class="hljs-string">&quot;params&quot;</span>:net[<span class="hljs-number">0</span>].weight,<span class="hljs-string">&#x27;weight_decay&#x27;</span>: wd&#125;,<br>        &#123;<span class="hljs-string">&quot;params&quot;</span>:net[<span class="hljs-number">0</span>].bias&#125;], lr=lr)<br>    animator = d2l.Animator(xlabel=<span class="hljs-string">&#x27;epochs&#x27;</span>, ylabel=<span class="hljs-string">&#x27;loss&#x27;</span>, yscale=<span class="hljs-string">&#x27;log&#x27;</span>,<br>                            xlim=[<span class="hljs-number">5</span>, num_epochs], legend=[<span class="hljs-string">&#x27;train&#x27;</span>, <span class="hljs-string">&#x27;test&#x27;</span>])<br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>            trainer.zero_grad()<br>            l = loss(net(X), y)<br>            l.mean().backward()<br>            trainer.step()<br>        <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">5</span> == <span class="hljs-number">0</span>:<br>            animator.add(epoch + <span class="hljs-number">1</span>,<br>                         (d2l.evaluate_loss(net, train_iter, loss),<br>                          d2l.evaluate_loss(net, test_iter, loss)))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;wçš„L2èŒƒæ•°ï¼š&#x27;</span>, net[<span class="hljs-number">0</span>].weight.norm().item())<br>    <br>train_concise(<span class="hljs-number">0</span>)<br>train_concise(<span class="hljs-number">3</span>)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102164601893.png" alt="æœªä½¿ç”¨æƒé‡è¡°å‡"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102164608785.png" alt="ä½¿ç”¨äº†æƒé‡è¡°å‡"></p><ul><li>æ­£åˆ™åŒ–æ˜¯å¤„ç†è¿‡æ‹Ÿåˆçš„å¸¸ç”¨æ–¹æ³•ï¼šåœ¨è®­ç»ƒé›†çš„æŸå¤±å‡½æ•°ä¸­åŠ å…¥æƒ©ç½šé¡¹ï¼Œä»¥é™ä½å­¦ä¹ åˆ°çš„æ¨¡å‹çš„å¤æ‚åº¦ã€‚</li><li>ä¿æŒæ¨¡å‹ç®€å•çš„ä¸€ä¸ªç‰¹åˆ«çš„é€‰æ‹©æ˜¯ä½¿ç”¨ğ¿2æƒ©ç½šçš„æƒé‡è¡°å‡ã€‚è¿™ä¼šå¯¼è‡´å­¦ä¹ ç®—æ³•æ›´æ–°æ­¥éª¤ä¸­çš„æƒé‡è¡°å‡ã€‚</li><li>æƒé‡è¡°å‡åŠŸèƒ½åœ¨æ·±åº¦å­¦ä¹ æ¡†æ¶çš„ä¼˜åŒ–å™¨ä¸­æä¾›ã€‚</li><li>åœ¨åŒä¸€è®­ç»ƒä»£ç å®ç°ä¸­ï¼Œä¸åŒçš„å‚æ•°é›†å¯ä»¥æœ‰ä¸åŒçš„æ›´æ–°è¡Œä¸ºã€‚</li></ul><h3 id="æš‚é€€æ³•ï¼ˆDropoutï¼‰"><a href="#æš‚é€€æ³•ï¼ˆDropoutï¼‰" class="headerlink" title="æš‚é€€æ³•ï¼ˆDropoutï¼‰"></a>æš‚é€€æ³•ï¼ˆDropoutï¼‰</h3><p>æš‚é€€æ³•åœ¨å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æ¯ä¸€å†…éƒ¨å±‚çš„åŒæ—¶æ³¨å…¥å™ªå£°,ï¼Œä»è¡¨é¢ä¸Šçœ‹æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä¸¢å¼ƒï¼ˆdrop outï¼‰ä¸€äº›ç¥ç»å…ƒ</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102165831805.png" alt="æš‚é€€æ³•"></p><h4 id="ä»é›¶å®ç°-1"><a href="#ä»é›¶å®ç°-1" class="headerlink" title="ä»é›¶å®ç°"></a>ä»é›¶å®ç°</h4><p>è¦å®ç°å•å±‚çš„æš‚é€€æ³•å‡½æ•°ï¼Œ æˆ‘ä»¬ä»å‡åŒ€åˆ†å¸ƒğ‘ˆ[0,1]U[0,1]ä¸­æŠ½å–æ ·æœ¬ï¼Œæ ·æœ¬æ•°ä¸è¿™å±‚ç¥ç»ç½‘ç»œçš„ç»´åº¦ä¸€è‡´ã€‚ ç„¶åæˆ‘ä»¬ä¿ç•™é‚£äº›å¯¹åº”æ ·æœ¬å¤§äºğ‘pçš„èŠ‚ç‚¹ï¼ŒæŠŠå‰©ä¸‹çš„ä¸¢å¼ƒã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><span class="hljs-comment"># å®ç° dropout_layer å‡½æ•°ï¼Œ è¯¥å‡½æ•°ä»¥dropoutçš„æ¦‚ç‡ä¸¢å¼ƒå¼ é‡è¾“å…¥Xä¸­çš„å…ƒç´ </span><br><span class="hljs-comment"># å¦‚ä¸Šæ‰€è¿°é‡æ–°ç¼©æ”¾å‰©ä½™éƒ¨åˆ†ï¼šå°†å‰©ä½™éƒ¨åˆ†é™¤ä»¥1.0-dropout</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">dropout_layer</span>(<span class="hljs-params">X, dropout</span>):<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt;= dropout &lt;= <span class="hljs-number">1</span><br>    <span class="hljs-comment"># åœ¨æœ¬æƒ…å†µä¸­ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¢«ä¸¢å¼ƒ</span><br>    <span class="hljs-keyword">if</span> dropout == <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> torch.zeros_like(X)<br>    <span class="hljs-comment"># åœ¨æœ¬æƒ…å†µä¸­ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¢«ä¿ç•™</span><br>    <span class="hljs-keyword">if</span> dropout == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> X<br>    mask = (torch.rand(X.shape) &gt; dropout).<span class="hljs-built_in">float</span>()<br>    <span class="hljs-keyword">return</span> mask * X / (<span class="hljs-number">1.0</span> - dropout)<br><br><span class="hljs-comment"># å®šä¹‰æ¨¡å‹å‚æ•°</span><br><span class="hljs-comment"># å°†æš‚é€€æ³•åº”ç”¨äºæ¯ä¸ªéšè—å±‚çš„è¾“å‡ºï¼ˆåœ¨æ¿€æ´»å‡½æ•°ä¹‹åï¼‰</span><br><span class="hljs-comment"># åœ¨é è¿‘è¾“å…¥å±‚çš„åœ°æ–¹è®¾ç½®è¾ƒä½çš„æš‚é€€æ¦‚ç‡</span><br>dropout1, dropout2 = <span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Net</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num_inputs, num_outputs, num_hiddens1, num_hiddens2,</span><br><span class="hljs-params">                 is_training = <span class="hljs-literal">True</span></span>):<br>        <span class="hljs-built_in">super</span>(Net, self).__init__()<br>        self.num_inputs = num_inputs<br>        self.training = is_training<br>        self.lin1 = nn.Linear(num_inputs, num_hiddens1)<br>        self.lin2 = nn.Linear(num_hiddens1, num_hiddens2)<br>        self.lin3 = nn.Linear(num_hiddens2, num_outputs)<br>        self.relu = nn.ReLU()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, X</span>):<br>        H1 = self.relu(self.lin1(X.reshape((-<span class="hljs-number">1</span>, self.num_inputs))))<br>        <span class="hljs-comment"># åªæœ‰åœ¨è®­ç»ƒæ¨¡å‹æ—¶æ‰ä½¿ç”¨dropout</span><br>        <span class="hljs-keyword">if</span> self.training == <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># åœ¨ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span><br>            H1 = dropout_layer(H1, dropout1)<br>        H2 = self.relu(self.lin2(H1))<br>        <span class="hljs-keyword">if</span> self.training == <span class="hljs-literal">True</span>:<br>            <span class="hljs-comment"># åœ¨ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span><br>            H2 = dropout_layer(H2, dropout2)<br>        out = self.lin3(H2)<br>        <span class="hljs-keyword">return</span> out<br><br>num_inputs, num_outputs, num_hiddens1, num_hiddens2 = <span class="hljs-number">784</span>, <span class="hljs-number">10</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span><br><br>net = Net(num_inputs, num_outputs, num_hiddens1, num_hiddens2)<br><br>num_epochs, lr, batch_size = <span class="hljs-number">10</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">256</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br>trainer = torch.optim.SGD(net.parameters(), lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102172916811.png" alt="image-20230102172916811"></p><h4 id="ç®€æ´å®ç°-1"><a href="#ç®€æ´å®ç°-1" class="headerlink" title="ç®€æ´å®ç°"></a>ç®€æ´å®ç°</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">net = nn.Sequential(nn.Flatten(),<br>        nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">256</span>),<br>        nn.ReLU(),<br>        <span class="hljs-comment"># åœ¨ç¬¬ä¸€ä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span><br>        nn.Dropout(dropout1),<br>        nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">256</span>),<br>        nn.ReLU(),<br>        <span class="hljs-comment"># åœ¨ç¬¬äºŒä¸ªå…¨è¿æ¥å±‚ä¹‹åæ·»åŠ ä¸€ä¸ªdropoutå±‚</span><br>        nn.Dropout(dropout2),<br>        nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m) == nn.Linear:<br>        nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>net.apply(init_weights);<br>trainer = torch.optim.SGD(net.parameters(), lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102173206639.png" alt="image-20230102173206639"></p><ul><li>æš‚é€€æ³•åœ¨å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œè®¡ç®—æ¯ä¸€å†…éƒ¨å±‚çš„åŒæ—¶ä¸¢å¼ƒä¸€äº›ç¥ç»å…ƒã€‚</li><li>æš‚é€€æ³•å¯ä»¥é¿å…è¿‡æ‹Ÿåˆï¼Œå®ƒé€šå¸¸ä¸æ§åˆ¶æƒé‡å‘é‡çš„ç»´æ•°å’Œå¤§å°ç»“åˆä½¿ç”¨çš„ã€‚</li><li>æš‚é€€æ³•å°†æ´»æ€§å€¼â„æ›¿æ¢ä¸ºå…·æœ‰æœŸæœ›å€¼â„çš„éšæœºå˜é‡ã€‚</li><li>æš‚é€€æ³•ä»…åœ¨è®­ç»ƒæœŸé—´ä½¿ç”¨ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04ï¼šè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</title>
    <link href="/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A004%EF%BC%9A%E8%BF%87%E6%8B%9F%E5%90%88%E4%B8%8E%E6%AC%A0%E6%8B%9F%E5%90%88/"/>
    <url>/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A004%EF%BC%9A%E8%BF%87%E6%8B%9F%E5%90%88%E4%B8%8E%E6%AC%A0%E6%8B%9F%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04ï¼šè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04ï¼šè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04ï¼šè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 04ï¼šè¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</h2><p>å°†æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šæ‹Ÿåˆçš„æ¯”åœ¨æ½œåœ¨åˆ†å¸ƒä¸­æ›´æ¥è¿‘çš„ç°è±¡ç§°ä¸º<em>è¿‡æ‹Ÿåˆ</em>ï¼ˆoverfittingï¼‰ï¼Œ ç”¨äºå¯¹æŠ—è¿‡æ‹Ÿåˆçš„æŠ€æœ¯ç§°ä¸º<em>æ­£åˆ™åŒ–</em>ï¼ˆregularizationï¼‰ã€‚</p><p>åœ¨å®éªŒä¸­è°ƒæ•´æ¨¡å‹æ¶æ„æˆ–è¶…å‚æ•°æ—¶ä¼šå‘ç°ï¼š å¦‚æœæœ‰è¶³å¤Ÿå¤šçš„ç¥ç»å…ƒã€å±‚æ•°å’Œè®­ç»ƒè¿­ä»£å‘¨æœŸï¼Œ æ¨¡å‹æœ€ç»ˆå¯ä»¥åœ¨è®­ç»ƒé›†ä¸Šè¾¾åˆ°å®Œç¾çš„ç²¾åº¦ï¼Œæ­¤æ—¶æµ‹è¯•é›†çš„å‡†ç¡®æ€§å´ä¸‹é™äº†ã€‚</p><h3 id="è®­ç»ƒè¯¯å·®ä¸æ³›åŒ–è¯¯å·®"><a href="#è®­ç»ƒè¯¯å·®ä¸æ³›åŒ–è¯¯å·®" class="headerlink" title="è®­ç»ƒè¯¯å·®ä¸æ³›åŒ–è¯¯å·®"></a>è®­ç»ƒè¯¯å·®ä¸æ³›åŒ–è¯¯å·®</h3><p><em>è®­ç»ƒè¯¯å·®</em>ï¼ˆtraining errorï¼‰æ˜¯æŒ‡ï¼Œ æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šè®¡ç®—å¾—åˆ°çš„è¯¯å·®ã€‚ </p><p><em>æ³›åŒ–è¯¯å·®</em>ï¼ˆgeneralization errorï¼‰æ˜¯æŒ‡ï¼Œ æ¨¡å‹åº”ç”¨åœ¨åŒæ ·ä»åŸå§‹æ ·æœ¬çš„åˆ†å¸ƒä¸­æŠ½å–çš„æ— é™å¤šæ•°æ®æ ·æœ¬æ—¶ï¼Œæ¨¡å‹è¯¯å·®çš„æœŸæœ›ã€‚</p><p>å½“æˆ‘ä»¬æœ‰ç®€å•çš„æ¨¡å‹å’Œå¤§é‡çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æœŸæœ›æ³›åŒ–è¯¯å·®ä¸è®­ç»ƒè¯¯å·®ç›¸è¿‘ã€‚</p><p>å½“æˆ‘ä»¬æœ‰æ›´å¤æ‚çš„æ¨¡å‹å’Œæ›´å°‘çš„æ ·æœ¬æ—¶ï¼Œæˆ‘ä»¬é¢„è®¡è®­ç»ƒè¯¯å·®ä¼šä¸‹é™ï¼Œä½†æ³›åŒ–è¯¯å·®ä¼šå¢å¤§ã€‚</p><p>å‡ ä¸ªå€¾å‘äºå½±å“æ¨¡å‹æ³›åŒ–çš„å› ç´ </p><ul><li>å¯è°ƒæ•´å‚æ•°çš„æ•°é‡ã€‚å½“å¯è°ƒæ•´å‚æ•°çš„æ•°é‡ï¼ˆæœ‰æ—¶ç§°ä¸º<em>è‡ªç”±åº¦</em>ï¼‰å¾ˆå¤§æ—¶ï¼Œæ¨¡å‹å¾€å¾€æ›´å®¹æ˜“è¿‡æ‹Ÿåˆ</li><li>å‚æ•°é‡‡ç”¨çš„å€¼ã€‚å½“æƒé‡çš„å–å€¼èŒƒå›´è¾ƒå¤§æ—¶ï¼Œæ¨¡å‹å¯èƒ½æ›´å®¹æ˜“è¿‡æ‹Ÿåˆ</li><li>è®­ç»ƒæ ·æœ¬çš„æ•°é‡ã€‚å³ä½¿æ¨¡å‹å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¿‡æ‹ŸåˆåªåŒ…å«ä¸€ä¸¤ä¸ªæ ·æœ¬çš„æ•°æ®é›†ã€‚è€Œè¿‡æ‹Ÿåˆä¸€ä¸ªæœ‰æ•°ç™¾ä¸‡ä¸ªæ ·æœ¬çš„æ•°æ®é›†åˆ™éœ€è¦ä¸€ä¸ªæå…¶çµæ´»(flexible)çš„æ¨¡å‹</li></ul><h3 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a>æ¨¡å‹é€‰æ‹©</h3><p><strong>éªŒè¯é›†</strong></p><p>åŸåˆ™ä¸Šï¼Œåœ¨æˆ‘ä»¬ç¡®å®šæ‰€æœ‰çš„è¶…å‚æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç”¨åˆ°æµ‹è¯•é›†ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨æ¨¡å‹é€‰æ‹©è¿‡ç¨‹ä¸­ä½¿ç”¨æµ‹è¯•æ•°æ®ï¼Œå¯èƒ½ä¼šæœ‰è¿‡æ‹Ÿåˆæµ‹è¯•æ•°æ®çš„é£é™©ï¼Œé‚£å°±éº»çƒ¦å¤§äº†ã€‚ å¦‚æœæˆ‘ä»¬è¿‡æ‹Ÿåˆäº†è®­ç»ƒæ•°æ®ï¼Œè¿˜å¯ä»¥åœ¨æµ‹è¯•æ•°æ®ä¸Šçš„è¯„ä¼°æ¥åˆ¤æ–­è¿‡æ‹Ÿåˆã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¿‡æ‹Ÿåˆäº†æµ‹è¯•æ•°æ®ï¼Œæˆ‘ä»¬åˆè¯¥æ€ä¹ˆçŸ¥é“å‘¢ï¼Ÿ</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å†³ä¸èƒ½ä¾é æµ‹è¯•æ•°æ®è¿›è¡Œæ¨¡å‹é€‰æ‹©ã€‚ ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ä»…ä»…ä¾é è®­ç»ƒæ•°æ®æ¥é€‰æ‹©æ¨¡å‹ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•ä¼°è®¡è®­ç»ƒæ•°æ®çš„æ³›åŒ–è¯¯å·®ã€‚</p><p>è§£å†³æ­¤é—®é¢˜çš„å¸¸è§åšæ³•æ˜¯å°†æˆ‘ä»¬çš„æ•°æ®åˆ†æˆä¸‰ä»½ï¼Œ é™¤äº†è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é›†ä¹‹å¤–ï¼Œè¿˜å¢åŠ ä¸€ä¸ª<em>éªŒè¯æ•°æ®é›†</em>ï¼ˆvalidation datasetï¼‰ï¼Œ ä¹Ÿå«<em>éªŒè¯é›†</em>ï¼ˆvalidation setï¼‰ã€‚</p><p><strong>ğ¾æŠ˜äº¤å‰éªŒè¯</strong></p><p>åŸå§‹è®­ç»ƒæ•°æ®è¢«åˆ†æˆğ¾ä¸ªä¸é‡å çš„å­é›†ã€‚ ç„¶åæ‰§è¡Œğ¾Kæ¬¡æ¨¡å‹è®­ç»ƒå’ŒéªŒè¯ï¼Œæ¯æ¬¡åœ¨ğ¾âˆ’1ä¸ªå­é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œ å¹¶åœ¨å‰©ä½™çš„ä¸€ä¸ªå­é›†ï¼ˆåœ¨è¯¥è½®ä¸­æ²¡æœ‰ç”¨äºè®­ç»ƒçš„å­é›†ï¼‰ä¸Šè¿›è¡ŒéªŒè¯ã€‚ æœ€åï¼Œé€šè¿‡å¯¹ğ¾æ¬¡å®éªŒçš„ç»“æœå–å¹³å‡æ¥ä¼°è®¡è®­ç»ƒå’ŒéªŒè¯è¯¯å·®ã€‚</p><h3 id="è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ"><a href="#è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ" class="headerlink" title="è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ"></a>è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</h3><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102161357715.png" alt="è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ"></p><p>è®­ç»ƒæ•°æ®é›†ä¸­çš„æ ·æœ¬è¶Šå°‘ï¼Œæˆ‘ä»¬å°±è¶Šæœ‰å¯èƒ½ï¼ˆä¸”æ›´ä¸¥é‡åœ°ï¼‰è¿‡æ‹Ÿåˆã€‚ éšç€è®­ç»ƒæ•°æ®é‡çš„å¢åŠ ï¼Œæ³›åŒ–è¯¯å·®é€šå¸¸ä¼šå‡å°ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul><li>æ¬ æ‹Ÿåˆæ˜¯æŒ‡æ¨¡å‹æ— æ³•ç»§ç»­å‡å°‘è®­ç»ƒè¯¯å·®ã€‚è¿‡æ‹Ÿåˆæ˜¯æŒ‡è®­ç»ƒè¯¯å·®è¿œå°äºéªŒè¯è¯¯å·®ã€‚</li><li>ç”±äºä¸èƒ½åŸºäºè®­ç»ƒè¯¯å·®æ¥ä¼°è®¡æ³›åŒ–è¯¯å·®ï¼Œå› æ­¤ç®€å•åœ°æœ€å°åŒ–è®­ç»ƒè¯¯å·®å¹¶ä¸ä¸€å®šæ„å‘³ç€æ³›åŒ–è¯¯å·®çš„å‡å°ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹éœ€è¦æ³¨æ„é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œå³é˜²æ­¢æ³›åŒ–è¯¯å·®è¿‡å¤§ã€‚</li><li>éªŒè¯é›†å¯ä»¥ç”¨äºæ¨¡å‹é€‰æ‹©ï¼Œä½†ä¸èƒ½è¿‡äºéšæ„åœ°ä½¿ç”¨å®ƒã€‚</li><li>æˆ‘ä»¬åº”è¯¥é€‰æ‹©ä¸€ä¸ªå¤æ‚åº¦é€‚å½“çš„æ¨¡å‹ï¼Œé¿å…ä½¿ç”¨æ•°é‡ä¸è¶³çš„è®­ç»ƒæ ·æœ¬</li></ul>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03ï¼šå¤šå±‚æ„ŸçŸ¥æœº</title>
    <link href="/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A003%EF%BC%9A%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E6%9C%BA/"/>
    <url>/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A003%EF%BC%9A%E5%A4%9A%E5%B1%82%E6%84%9F%E7%9F%A5%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03ï¼šå¤šå±‚æ„ŸçŸ¥æœº"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03ï¼šå¤šå±‚æ„ŸçŸ¥æœº" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03ï¼šå¤šå±‚æ„ŸçŸ¥æœº"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 03ï¼šå¤šå±‚æ„ŸçŸ¥æœº</h2><h3 id="æ„ŸçŸ¥æœº"><a href="#æ„ŸçŸ¥æœº" class="headerlink" title="æ„ŸçŸ¥æœº"></a>æ„ŸçŸ¥æœº</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç½‘ç»œä¸­åŠ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªéšè—å±‚æ¥å…‹æœçº¿æ€§æ¨¡å‹çš„é™åˆ¶ï¼Œ ä½¿å…¶èƒ½å¤„ç†æ›´æ™®éçš„å‡½æ•°å…³ç³»ç±»å‹ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102151514851.png" alt="å¤šå±‚æ„ŸçŸ¥æœº"></p><p>è¿™ä¸ªå¤šå±‚æ„ŸçŸ¥æœºæœ‰4ä¸ªè¾“å…¥ï¼Œ3ä¸ªè¾“å‡ºï¼Œå…¶éšè—å±‚åŒ…å«5ä¸ªéšè—å•å…ƒï¼Œè¿™ä¸ªå¤šå±‚æ„ŸçŸ¥æœºä¸­çš„å±‚æ•°ä¸º2ã€‚</p><h3 id="æ¿€æ´»å‡½æ•°"><a href="#æ¿€æ´»å‡½æ•°" class="headerlink" title="æ¿€æ´»å‡½æ•°"></a>æ¿€æ´»å‡½æ•°</h3><p>ç›®çš„ï¼šå¼•å…¥éçº¿æ€§ï¼Œä½¿ç¥ç»ç½‘ç»œå¯ä»¥æ‹Ÿåˆä»»æ„çš„æ›²çº¿ï¼ˆå‚è€ƒæå®æ¯…æœºå™¨å­¦ä¹ æ•™ç¨‹ï¼‰</p><p>æœ‰äº†æ¿€æ´»å‡½æ•°ï¼Œå°±ä¸å¯èƒ½å†å°†æˆ‘ä»¬çš„å¤šå±‚æ„ŸçŸ¥æœºé€€åŒ–æˆçº¿æ€§æ¨¡å‹</p><h4 id="ReLuå‡½æ•°"><a href="#ReLuå‡½æ•°" class="headerlink" title="ReLuå‡½æ•°"></a>ReLuå‡½æ•°</h4><p>$$<br>\operatorname{ReLU}(x) &#x3D; \max(x, 0)<br>$$</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102152019118.png" alt="Reluå‡½æ•°å›¾åƒ"></p><p>ä½¿ç”¨ReLUçš„åŸå› æ˜¯ï¼Œå®ƒæ±‚å¯¼è¡¨ç°å¾—ç‰¹åˆ«å¥½ï¼šè¦ä¹ˆè®©å‚æ•°æ¶ˆå¤±ï¼Œè¦ä¹ˆè®©å‚æ•°é€šè¿‡ã€‚ è¿™ä½¿å¾—ä¼˜åŒ–è¡¨ç°å¾—æ›´å¥½ï¼Œå¹¶ä¸”ReLUå‡è½»äº†å›°æ‰°ä»¥å¾€ç¥ç»ç½‘ç»œçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜</p><h4 id="sigmoidå‡½æ•°"><a href="#sigmoidå‡½æ•°" class="headerlink" title="sigmoidå‡½æ•°"></a>sigmoidå‡½æ•°</h4><p>$$<br>\operatorname{sigmoid}(x) &#x3D; \frac{1}{1 + \exp(-x)}<br>$$</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102152303175.png" alt="sigmoidå‡½æ•°å›¾åƒ"></p><h4 id="tanhå‡½æ•°"><a href="#tanhå‡½æ•°" class="headerlink" title="tanhå‡½æ•°"></a>tanhå‡½æ•°</h4><p>$$<br>\operatorname{tanh}(x) &#x3D; \frac{1 - \exp(-2x)}{1 + \exp(-2x)}<br>$$</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102152405661.png" alt="image-20230102152405661"></p><h3 id="ä»é›¶å®ç°"><a href="#ä»é›¶å®ç°" class="headerlink" title="ä»é›¶å®ç°"></a>ä»é›¶å®ç°</h3><p><strong>å®ç°ä¸€ä¸ªå…·æœ‰å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼Œ å®ƒåŒ…å«256ä¸ªéšè—å•å…ƒ</strong></p><p>é€šå¸¸ï¼Œæˆ‘ä»¬é€‰æ‹©2çš„è‹¥å¹²æ¬¡å¹‚ä½œä¸ºå±‚çš„å®½åº¦ã€‚ å› ä¸ºå†…å­˜åœ¨ç¡¬ä»¶ä¸­çš„åˆ†é…å’Œå¯»å€æ–¹å¼ï¼Œè¿™ä¹ˆåšå¾€å¾€å¯ä»¥åœ¨è®¡ç®—ä¸Šæ›´é«˜æ•ˆ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;å®ç°ä¸€ä¸ªå…·æœ‰å•éšè—å±‚çš„å¤šå±‚æ„ŸçŸ¥æœºï¼ŒåŒ…å«256ä¸ªéšè—å•å…ƒ&#x27;&#x27;&#x27;</span><br><br><span class="hljs-comment"># å‚æ•°åˆå§‹åŒ–</span><br>num_inputs, num_outputs, num_hiddens = <span class="hljs-number">784</span>, <span class="hljs-number">10</span>, <span class="hljs-number">256</span><br><br>W1 = nn.Parameter(torch.randn(<br>    num_inputs, num_hiddens, requires_grad=<span class="hljs-literal">True</span>) * <span class="hljs-number">0.01</span>) <span class="hljs-comment"># randnåˆå§‹åŒ–æ˜¯æ­£æ€(0, 1)åˆ†å¸ƒ</span><br>b1 = nn.Parameter(torch.zeros(num_hiddens, requires_grad=<span class="hljs-literal">True</span>))<br>W2 = nn.Parameter(torch.randn(<br>    num_hiddens, num_outputs, requires_grad=<span class="hljs-literal">True</span>) * <span class="hljs-number">0.01</span>)<br>b2 = nn.Parameter(torch.zeros(num_outputs, requires_grad=<span class="hljs-literal">True</span>))<br><br>params = [W1, b1, W2, b2]<br><br><span class="hljs-comment"># æ¿€æ´»å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">relu</span>(<span class="hljs-params">X</span>):<br>    a = torch.zeros_like(X)<br>    <span class="hljs-keyword">return</span> torch.<span class="hljs-built_in">max</span>(X, a)<br><br><span class="hljs-comment"># æ¨¡å‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">net</span>(<span class="hljs-params">X</span>):<br>    X = X.reshape((-<span class="hljs-number">1</span>, num_inputs)) <span class="hljs-comment"># 256*1*28*28 -&gt; 256*784</span><br>    H = relu(X@W1 + b1)  <span class="hljs-comment"># è¿™é‡Œâ€œ@â€ä»£è¡¨çŸ©é˜µä¹˜æ³•</span><br>    <span class="hljs-keyword">return</span> (H@W2 + b2)<br><br><span class="hljs-comment"># æŸå¤±å‡½æ•°</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br><br><span class="hljs-comment"># è®­ç»ƒ ä¸ä¸Šä¸€èŠ‚ä¸­çš„è®­ç»ƒè¿‡ç¨‹ç›¸ä¼¼ ä½¿ç”¨ç›¸åŒçš„å‡½æ•°è¿›è¡Œè®­ç»ƒ</span><br>num_epochs, lr = <span class="hljs-number">10</span>, <span class="hljs-number">0.1</span><br>updater = torch.optim.SGD(params, lr=lr)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, updater)<br>d2l.predict_ch3(net, test_iter)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102154040798.png" alt="è®­ç»ƒç»“æœ"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102154059506.png" alt="æµ‹è¯•ç»“æœ"></p><p>æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€å•çš„å¤šå±‚æ„ŸçŸ¥æœºæ˜¯å¾ˆå®¹æ˜“çš„ã€‚ç„¶è€Œå¦‚æœæœ‰å¤§é‡çš„å±‚ï¼Œä»é›¶å¼€å§‹å®ç°å¤šå±‚æ„ŸçŸ¥æœºä¼šå˜å¾—å¾ˆéº»çƒ¦ï¼ˆä¾‹å¦‚ï¼Œè¦å‘½åå’Œè®°å½•æ¨¡å‹çš„å‚æ•°ï¼‰ã€‚</p><h3 id="ç®€æ´å®ç°"><a href="#ç®€æ´å®ç°" class="headerlink" title="ç®€æ´å®ç°"></a>ç®€æ´å®ç°</h3><p><strong>é€šè¿‡é«˜çº§APIæ›´ç®€æ´åœ°å®ç°å¤šå±‚æ„ŸçŸ¥æœº</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><span class="hljs-comment"># å®šä¹‰æ¨¡å‹</span><br>net = nn.Sequential(nn.Flatten(),<br>                    nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">256</span>),<br>                    nn.ReLU(),<br>                    nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-comment"># å‚æ•°åˆå§‹åŒ–</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m) == nn.Linear:<br>        nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>net.apply(init_weights);<br><br>batch_size, lr, num_epochs = <span class="hljs-number">256</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">10</span><br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>trainer = torch.optim.SGD(net.parameters(), lr=lr)<br><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102154641229.png" alt="è®­ç»ƒç»“æœ"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20230102154736816.png" alt="æµ‹è¯•ç»“æœ"></p>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02ï¼šsoftmaxå›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°</title>
    <link href="/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A002%EF%BC%9Asoftmax%E5%9B%9E%E5%BD%92%E7%9A%84%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%AE%80%E6%B4%81%E5%AE%9E%E7%8E%B0/"/>
    <url>/2023/01/02/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A002%EF%BC%9Asoftmax%E5%9B%9E%E5%BD%92%E7%9A%84%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%AE%80%E6%B4%81%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02ï¼šsoftmaxå›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02ï¼šsoftmaxå›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02ï¼šsoftmaxå›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 02ï¼šsoftmaxå›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°</h2><p>å‚è€ƒï¼šææ² ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ <a href="http://zh.d2l.ai/">http://zh.d2l.ai/</a></p><h3 id="ä»é›¶å®ç°"><a href="#ä»é›¶å®ç°" class="headerlink" title="ä»é›¶å®ç°"></a>ä»é›¶å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> IPython <span class="hljs-keyword">import</span> display<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torchvision<br><span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data<br><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dataloader_workers</span>():  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ä½¿ç”¨2ä¸ªè¿›ç¨‹æ¥è¯»å–æ•°æ®&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data_fashion_mnist</span>(<span class="hljs-params">batch_size, resize=<span class="hljs-literal">None</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ä¸‹è½½Fashion-MNISTæ•°æ®é›†ï¼Œç„¶åå°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­&quot;&quot;&quot;</span><br>    trans = [transforms.ToTensor()]<br>    <span class="hljs-keyword">if</span> resize:<br>        trans.insert(<span class="hljs-number">0</span>, transforms.Resize(resize))<br>    trans = transforms.Compose(trans)<br>    mnist_train = torchvision.datasets.FashionMNIST(<br>        root=<span class="hljs-string">&quot;./data&quot;</span>, train=<span class="hljs-literal">True</span>, transform=trans, download=<span class="hljs-literal">True</span>)<br>    mnist_test = torchvision.datasets.FashionMNIST(<br>        root=<span class="hljs-string">&quot;./data&quot;</span>, train=<span class="hljs-literal">False</span>, transform=trans, download=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">return</span> (data.DataLoader(mnist_train, batch_size, shuffle=<span class="hljs-literal">True</span>,<br>                            num_workers=get_dataloader_workers()),<br>            data.DataLoader(mnist_test, batch_size, shuffle=<span class="hljs-literal">False</span>,<br>                            num_workers=get_dataloader_workers()))<br><br><span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªload_data_fashion_mnistå‡½æ•°ï¼Œç”¨äºè·å–å’Œè¯»å–Fashion-MNISTæ•°æ®é›†</span><br><span class="hljs-comment"># è¿™ä¸ªå‡½æ•°è¿”å›è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„æ•°æ®è¿­ä»£å™¨ã€‚ </span><br><span class="hljs-comment"># æ­¤å¤–ï¼Œè¿™ä¸ªå‡½æ•°è¿˜æ¥å—ä¸€ä¸ªå¯é€‰å‚æ•°resizeï¼Œç”¨æ¥å°†å›¾åƒå¤§å°è°ƒæ•´ä¸ºå¦ä¸€ç§å½¢çŠ¶ã€‚</span><br><span class="hljs-comment"># d2lå·²ç»å°è£…å¥½äº†è¿™ä¸ªå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥d2l.load_data_fashion_mnist()è°ƒç”¨</span><br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = load_data_fashion_mnist(batch_size)<br><br><span class="hljs-comment"># åŸå§‹æ•°æ®é›†éƒ½æ˜¯28*28å›¾åƒï¼Œè¿™é‡Œéœ€è¦æ‹‰å¹³åŠ784çš„å‘é‡</span><br><span class="hljs-comment"># å‚æ•°åˆå§‹åŒ–</span><br>num_inputs = <span class="hljs-number">784</span><br>num_outputs = <span class="hljs-number">10</span><br><br>W = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, size=(num_inputs, num_outputs), requires_grad=<span class="hljs-literal">True</span>)<br>b = torch.zeros(num_outputs, requires_grad=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># å®šä¹‰softmax</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">softmax</span>(<span class="hljs-params">X</span>):<br>    X_exp = torch.exp(X)<br>    partition = X_exp.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>, keepdim=<span class="hljs-literal">True</span>) <span class="hljs-comment"># å¯¹æ¯ä¸€è¡Œæ±‚å’Œ</span><br>    <span class="hljs-keyword">return</span> X_exp / partition  <span class="hljs-comment"># è¿™é‡Œåº”ç”¨äº†å¹¿æ’­æœºåˆ¶</span><br><span class="hljs-comment"># éªŒè¯softmaxçš„æ•ˆæœ</span><br>X = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (<span class="hljs-number">2</span>, <span class="hljs-number">5</span>))<br>X_prob = softmax(X)<br><span class="hljs-built_in">print</span>(X_prob)<br><span class="hljs-built_in">print</span>(X_prob.<span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>))<br><br><span class="hljs-comment"># å®šä¹‰æ¨¡å‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">net</span>(<span class="hljs-params">X</span>):<br>    <span class="hljs-keyword">return</span> softmax(torch.matmul(X.reshape((-<span class="hljs-number">1</span>, W.shape[<span class="hljs-number">0</span>])), W) + b) <span class="hljs-comment"># x æ­¤æ—¶ä¸º batchsize * 784</span><br><br><br><span class="hljs-comment"># å®šä¹‰æŸå¤±å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">cross_entropy</span>(<span class="hljs-params">y_hat, y</span>):<br>    <span class="hljs-keyword">return</span> - torch.log(y_hat[<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(y_hat)), y])<br><br><span class="hljs-comment"># åˆ†ç±»ç²¾åº¦</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">accuracy</span>(<span class="hljs-params">y_hat, y</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—é¢„æµ‹æ­£ç¡®çš„æ•°é‡&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(y_hat.shape) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> y_hat.shape[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">1</span>:<br>        y_hat = y_hat.argmax(axis=<span class="hljs-number">1</span>) <span class="hljs-comment"># æ¯ä¸€è¡Œä¸­æœ€å¤§å…ƒç´ çš„ç´¢å¼•</span><br>    cmp = y_hat.<span class="hljs-built_in">type</span>(y.dtype) == y<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">float</span>(cmp.<span class="hljs-built_in">type</span>(y.dtype).<span class="hljs-built_in">sum</span>())<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_accuracy</span>(<span class="hljs-params">net, data_iter</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è®¡ç®—åœ¨æŒ‡å®šæ•°æ®é›†ä¸Šæ¨¡å‹çš„ç²¾åº¦&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net, torch.nn.Module):<br>        net.<span class="hljs-built_in">eval</span>()  <span class="hljs-comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼</span><br>    metric = Accumulator(<span class="hljs-number">2</span>)  <span class="hljs-comment"># æ­£ç¡®é¢„æµ‹æ•°ã€é¢„æµ‹æ€»æ•°</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter:<br>            metric.add(accuracy(net(X), y), y.numel()) <span class="hljs-comment"># æ­£ç¡®æ•°ä¸æ€»æ•°</span><br>    <span class="hljs-keyword">return</span> metric[<span class="hljs-number">0</span>] / metric[<span class="hljs-number">1</span>]<br><span class="hljs-comment"># ç´¯è®¡å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Accumulator</span>:  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;åœ¨nä¸ªå˜é‡ä¸Šç´¯åŠ &quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, n</span>):<br>        self.data = [<span class="hljs-number">0.0</span>] * n<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, *args</span>):<br>        self.data = [a + <span class="hljs-built_in">float</span>(b) <span class="hljs-keyword">for</span> a, b <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(self.data, args)]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reset</span>(<span class="hljs-params">self</span>):<br>        self.data = [<span class="hljs-number">0.0</span>] * <span class="hljs-built_in">len</span>(self.data)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, idx</span>):<br>        <span class="hljs-keyword">return</span> self.data[idx]<br><br><span class="hljs-comment"># è®­ç»ƒ</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_epoch_ch3</span>(<span class="hljs-params">net, train_iter, loss, updater</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è®­ç»ƒæ¨¡å‹ä¸€ä¸ªè¿­ä»£å‘¨æœŸï¼ˆå®šä¹‰è§ç¬¬3ç« ï¼‰&quot;&quot;&quot;</span><br>    <span class="hljs-comment"># å°†æ¨¡å‹è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(net, torch.nn.Module):<br>        net.train()<br>    <span class="hljs-comment"># è®­ç»ƒæŸå¤±æ€»å’Œã€è®­ç»ƒå‡†ç¡®çš„æ€»å’Œã€æ ·æœ¬æ•°</span><br>    metric = Accumulator(<span class="hljs-number">3</span>)<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> train_iter:<br>        <span class="hljs-comment"># è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°å‚æ•°</span><br>        y_hat = net(X)<br>        l = loss(y_hat, y)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(updater, torch.optim.Optimizer):<br>            <span class="hljs-comment"># ä½¿ç”¨PyTorchå†…ç½®çš„ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</span><br>            updater.zero_grad()<br>            l.mean().backward()<br>            updater.step()<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-comment"># ä½¿ç”¨å®šåˆ¶çš„ä¼˜åŒ–å™¨å’ŒæŸå¤±å‡½æ•°</span><br>            l.<span class="hljs-built_in">sum</span>().backward()<br>            updater(X.shape[<span class="hljs-number">0</span>])<br>        metric.add(<span class="hljs-built_in">float</span>(l.<span class="hljs-built_in">sum</span>()), accuracy(y_hat, y), y.numel())<br>    <span class="hljs-comment"># è¿”å›è®­ç»ƒæŸå¤±å’Œè®­ç»ƒç²¾åº¦</span><br>    <span class="hljs-keyword">return</span> metric[<span class="hljs-number">0</span>] / metric[<span class="hljs-number">2</span>], metric[<span class="hljs-number">1</span>] / metric[<span class="hljs-number">2</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_ch3</span>(<span class="hljs-params">net, train_iter, test_iter, loss, num_epochs, updater</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;è®­ç»ƒæ¨¡å‹ï¼ˆå®šä¹‰è§ç¬¬3ç« ï¼‰&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>        train_metrics = train_epoch_ch3(net, train_iter, loss, updater)<br>        test_acc = evaluate_accuracy(net, test_iter)<br>    train_loss, train_acc = train_metrics<br>    <span class="hljs-keyword">assert</span> train_loss &lt; <span class="hljs-number">0.5</span>, train_loss<br>    <span class="hljs-keyword">assert</span> train_acc &lt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> train_acc &gt; <span class="hljs-number">0.7</span>, train_acc<br>    <span class="hljs-keyword">assert</span> test_acc &lt;= <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> test_acc &gt; <span class="hljs-number">0.7</span>, test_acc<br><br>lr = <span class="hljs-number">0.1</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">updater</span>(<span class="hljs-params">batch_size</span>):<br>    <span class="hljs-keyword">return</span> d2l.sgd([W, b], lr, batch_size)<br><br>num_epochs = <span class="hljs-number">10</span><br>train_ch3(net, train_iter, test_iter, cross_entropy, num_epochs, updater)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_ch3</span>(<span class="hljs-params">net, test_iter, n=<span class="hljs-number">6</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;é¢„æµ‹æ ‡ç­¾ï¼ˆå®šä¹‰è§ç¬¬3ç« ï¼‰&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> test_iter:<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-comment"># trues = d2l.get_fashion_mnist_labels(y)</span><br>    <span class="hljs-comment"># preds = d2l.get_fashion_mnist_labels(net(X).argmax(axis=1))</span><br>    <span class="hljs-comment"># titles = [true +&#x27;\n&#x27; + pred for true, pred in zip(trues, preds)]</span><br>    <span class="hljs-comment"># d2l.show_images(</span><br>    <span class="hljs-comment">#     X[0:n].reshape((n, 28, 28)), 1, n, titles=titles[0:n])</span><br>    <span class="hljs-built_in">print</span>(y)<br>    <span class="hljs-built_in">print</span>(net(X).argmax(axis=<span class="hljs-number">1</span>))<br><br>predict_ch3(net, test_iter)<br></code></pre></td></tr></table></figure><h3 id="ç®€æ´å®ç°"><a href="#ç®€æ´å®ç°" class="headerlink" title="ç®€æ´å®ç°"></a>ç®€æ´å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br>batch_size = <span class="hljs-number">256</span><br>train_iter, test_iter = d2l.load_data_fashion_mnist(batch_size)<br><br><span class="hljs-comment"># PyTorchä¸ä¼šéšå¼åœ°è°ƒæ•´è¾“å…¥çš„å½¢çŠ¶ã€‚å› æ­¤ï¼Œ</span><br><span class="hljs-comment"># æˆ‘ä»¬åœ¨çº¿æ€§å±‚å‰å®šä¹‰äº†å±•å¹³å±‚ï¼ˆflattenï¼‰ï¼Œæ¥è°ƒæ•´ç½‘ç»œè¾“å…¥çš„å½¢çŠ¶</span><br>net = nn.Sequential(nn.Flatten(), nn.Linear(<span class="hljs-number">784</span>, <span class="hljs-number">10</span>))<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_weights</span>(<span class="hljs-params">m</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">type</span>(m) == nn.Linear:<br>        nn.init.normal_(m.weight, std=<span class="hljs-number">0.01</span>)<br><br>net.apply(init_weights)<br>loss = nn.CrossEntropyLoss(reduction=<span class="hljs-string">&#x27;none&#x27;</span>)<br>trainer = torch.optim.SGD(net.parameters(), lr=<span class="hljs-number">0.1</span>)<br>num_epochs = <span class="hljs-number">10</span><br>d2l.train_ch3(net, train_iter, test_iter, loss, num_epochs, trainer)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01ï¼šçº¿æ€§å›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°</title>
    <link href="/2023/01/01/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A001%EF%BC%9A%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%AE%80%E6%B4%81%E5%AE%9E%E7%8E%B0/"/>
    <url>/2023/01/01/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A001%EF%BC%9A%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E7%9A%84%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%8E%E7%AE%80%E6%B4%81%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01ï¼šçº¿æ€§å›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01ï¼šçº¿æ€§å›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01ï¼šçº¿æ€§å›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 01ï¼šçº¿æ€§å›å½’çš„ä»é›¶å®ç°ä¸ç®€æ´å®ç°</h2><p>å‚è€ƒï¼šææ² ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ <a href="http://zh.d2l.ai/">http://zh.d2l.ai/</a></p><h3 id="ä»é›¶å®ç°"><a href="#ä»é›¶å®ç°" class="headerlink" title="ä»é›¶å®ç°"></a>ä»é›¶å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">synthetic_data</span>(<span class="hljs-params">w, b, num_examples</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;ç”Ÿæˆy=Xw+b+å™ªå£°&quot;&quot;&quot;</span><br>    X = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (num_examples, <span class="hljs-built_in">len</span>(w)))<br>    y = torch.matmul(X, w) + b<br>    y += torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, y.shape)<br>    <span class="hljs-keyword">return</span> X, y.reshape((-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))<br><br>true_w = torch.tensor([<span class="hljs-number">2</span>, -<span class="hljs-number">3.4</span>])<br>true_b = <span class="hljs-number">4.2</span><br>features, labels = synthetic_data(true_w, true_b, <span class="hljs-number">1000</span>)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;features:&#x27;</span>, features[<span class="hljs-number">0</span>],<span class="hljs-string">&#x27;\nlabel:&#x27;</span>, labels[<span class="hljs-number">0</span>])<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">data_iter</span>(<span class="hljs-params">batch_size, features, labels</span>):<br>    num_examples = <span class="hljs-built_in">len</span>(features) <span class="hljs-comment"># æ‰€æœ‰æ ·æœ¬çš„ä¸ªæ•°</span><br>    indices = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">range</span>(num_examples)) <span class="hljs-comment"># å°†æ ·æœ¬éšæœºæ‰“ä¹±</span><br>    <span class="hljs-comment"># è¿™äº›æ ·æœ¬æ˜¯éšæœºè¯»å–çš„ï¼Œæ²¡æœ‰ç‰¹å®šçš„é¡ºåº</span><br>    random.shuffle(indices)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, num_examples, batch_size):<br>        batch_indices = torch.tensor(<br>            indices[i: <span class="hljs-built_in">min</span>(i + batch_size, num_examples)])<br>        <span class="hljs-keyword">yield</span> features[batch_indices], labels[batch_indices]<br><br>batch_size = <span class="hljs-number">10</span><br><span class="hljs-comment"># å¾—åˆ°ä¸€ç»„å°æ‰¹é‡çš„æ•°æ®</span><br><span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter(batch_size, features, labels):<br>    <span class="hljs-built_in">print</span>(X, <span class="hljs-string">&#x27;\n&#x27;</span>, y)<br>    <span class="hljs-keyword">break</span><br><br><span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹å‚æ•°</span><br><br>w = torch.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>, size=(<span class="hljs-number">2</span>,<span class="hljs-number">1</span>), requires_grad=<span class="hljs-literal">True</span>) <span class="hljs-comment"># å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º0.01</span><br>b = torch.zeros(<span class="hljs-number">1</span>, requires_grad=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment">#  å®šä¹‰æ¨¡å‹</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">linreg</span>(<span class="hljs-params">X, w, b</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;çº¿æ€§å›å½’æ¨¡å‹&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> torch.matmul(X, w) + b<br><br><span class="hljs-comment"># å®šä¹‰æŸå¤±å‡½æ•°</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">squared_loss</span>(<span class="hljs-params">y_hat, y</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;å‡æ–¹æŸå¤±&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">return</span> (y_hat - y.reshape(y_hat.shape)) ** <span class="hljs-number">2</span> / <span class="hljs-number">2</span> <span class="hljs-comment"># å°†çœŸå®å€¼çš„å½¢çŠ¶å˜æˆä¸é¢„æµ‹å€¼ä¸€æ ·</span><br><br><span class="hljs-comment"># å®šä¹‰å‚æ•°ä¼˜åŒ–ç®—æ³•</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sgd</span>(<span class="hljs-params">params, lr, batch_size</span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;å°æ‰¹é‡éšæœºæ¢¯åº¦ä¸‹é™&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">with</span> torch.no_grad(): <span class="hljs-comment"># æ›´æ–°çš„æ—¶å€™ä¸éœ€è¦è¿›è¡Œæ¢¯åº¦è®¡ç®—</span><br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> params:<br>            param -= lr * param.grad / batch_size<br>            param.grad.zero_() <span class="hljs-comment"># æ¢¯åº¦ä¼šç´¯è®¡ï¼Œè®¡ç®—å®Œæ¢¯åº¦åæ¸…0</span><br><br><span class="hljs-comment"># è®­ç»ƒ</span><br>lr = <span class="hljs-number">0.03</span><br>num_epochs = <span class="hljs-number">3</span><br>net = linreg<br>loss = squared_loss<br><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter(batch_size, features, labels):<br>        l = loss(net(X, w, b), y)  <span class="hljs-comment"># Xå’Œyçš„å°æ‰¹é‡æŸå¤±</span><br>        <span class="hljs-comment"># å› ä¸ºlå½¢çŠ¶æ˜¯(batch_size,1)ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ ‡é‡ã€‚lä¸­çš„æ‰€æœ‰å…ƒç´ è¢«åŠ åˆ°ä¸€èµ·ï¼Œ</span><br>        <span class="hljs-comment"># å¹¶ä»¥æ­¤è®¡ç®—å…³äº[w,b]çš„æ¢¯åº¦</span><br>        l.<span class="hljs-built_in">sum</span>().backward()<br>        sgd([w, b], lr, batch_size)  <span class="hljs-comment"># ä½¿ç”¨å‚æ•°çš„æ¢¯åº¦æ›´æ–°å‚æ•°</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        train_l = loss(net(features, w, b), labels)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;epoch <span class="hljs-subst">&#123;epoch + <span class="hljs-number">1</span>&#125;</span>, loss <span class="hljs-subst">&#123;<span class="hljs-built_in">float</span>(train_l.mean()):f&#125;</span>&#x27;</span>)<br><br><br></code></pre></td></tr></table></figure><h3 id="ç®€æ´å®ç°"><a href="#ç®€æ´å®ç°" class="headerlink" title="ç®€æ´å®ç°"></a>ç®€æ´å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">from</span> torch.utils <span class="hljs-keyword">import</span> data<br><span class="hljs-keyword">from</span> d2l <span class="hljs-keyword">import</span> torch <span class="hljs-keyword">as</span> d2l<br><span class="hljs-keyword">from</span> torch <span class="hljs-keyword">import</span> nn<br><br>true_w = torch.tensor([<span class="hljs-number">2</span>, -<span class="hljs-number">3.4</span>])<br>true_b = <span class="hljs-number">4.2</span><br>features, labels = d2l.synthetic_data(true_w, true_b, <span class="hljs-number">1000</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">load_array</span>(<span class="hljs-params">data_arrays, batch_size, is_train=<span class="hljs-literal">True</span></span>):  <span class="hljs-comment">#@save</span><br>    <span class="hljs-string">&quot;&quot;&quot;æ„é€ ä¸€ä¸ªPyTorchæ•°æ®è¿­ä»£å™¨&quot;&quot;&quot;</span><br>    dataset = data.TensorDataset(*data_arrays)<br>    <span class="hljs-keyword">return</span> data.DataLoader(dataset, batch_size, shuffle=is_train)<br><br>batch_size = <span class="hljs-number">10</span><br>data_iter = load_array((features, labels), batch_size)<br><br><span class="hljs-comment"># print(next(iter(data_iter)))</span><br><br>net = nn.Sequential(nn.Linear(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)) <span class="hljs-comment"># è¾“å…¥ç‰¹å¾å½¢çŠ¶ä¸º 2ï¼Œè¾“å‡ºä¸ºæ ‡é‡ 1</span><br><br><span class="hljs-comment"># æ¨¡å‹å‚æ•°åˆå§‹åŒ–</span><br>net[<span class="hljs-number">0</span>].weight.data.normal_(<span class="hljs-number">0</span>, <span class="hljs-number">0.01</span>)<br>net[<span class="hljs-number">0</span>].bias.data.fill_(<span class="hljs-number">0</span>)<br><br><span class="hljs-comment"># å®šä¹‰æŸå¤±å‡½æ•°</span><br>loss = nn.MSELoss()<br><br><span class="hljs-comment"># å®šä¹‰ä¼˜åŒ–ç®—æ³•</span><br>trainer = torch.optim.SGD(net.parameters(), lr=<span class="hljs-number">0.03</span>)<br><br><span class="hljs-comment"># è®­ç»ƒ</span><br>num_epochs = <span class="hljs-number">3</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_epochs):<br>    <span class="hljs-keyword">for</span> X, y <span class="hljs-keyword">in</span> data_iter:<br>        l = loss(net(X) ,y)<br>        trainer.zero_grad() <span class="hljs-comment"># è®¡ç®—æ¢¯åº¦å‰å°†æ¢¯åº¦å½’ä¸º0</span><br>        l.backward()<br>        trainer.step()<br>    l = loss(net(features), labels)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;epoch <span class="hljs-subst">&#123;epoch + <span class="hljs-number">1</span>&#125;</span>, loss <span class="hljs-subst">&#123;l:f&#125;</span>&#x27;</span>)<br><br>w = net[<span class="hljs-number">0</span>].weight.data<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;wçš„ä¼°è®¡è¯¯å·®ï¼š&#x27;</span>, true_w - w.reshape(true_w.shape))<br>b = net[<span class="hljs-number">0</span>].bias.data<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;bçš„ä¼°è®¡è¯¯å·®ï¼š&#x27;</span>, true_b - b)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deep Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 00ï¼šç¯å¢ƒæ­å»º</title>
    <link href="/2022/12/31/%E6%9D%8E%E6%B2%90%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/12/31/%E6%9D%8E%E6%B2%90%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 00ï¼šç¯å¢ƒæ­å»º"><a href="#åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 00ï¼šç¯å¢ƒæ­å»º" class="headerlink" title="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 00ï¼šç¯å¢ƒæ­å»º"></a>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ 00ï¼šç¯å¢ƒæ­å»º</h2><h4 id="1-ç¯å¢ƒ"><a href="#1-ç¯å¢ƒ" class="headerlink" title="1 ç¯å¢ƒ"></a>1 ç¯å¢ƒ</h4><p>æˆ‘çš„ç¯å¢ƒæ˜¯ubuntu 18.04ï¼Œåœ¨è…¾è®¯äº‘ä¸Šä¹°çš„è½»é‡äº‘æœåŠ¡å™¨è¿›è¡Œä½¿ç”¨ï¼Œæ²¡æœ‰GPUï¼Œå‰å‡ ç« å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œåé¢ç”¨åˆ°GPUå°±ä¸å¥½ä½¿äº†ã€‚å¯ä»¥ä½œä¸ºä¸€ä¸ªå¿«é€Ÿä¸Šæ‰‹çš„è¿‡æ¸¡ç‰ˆæœ¬ã€‚</p><h4 id="2-æ­å»ºæ­¥éª¤"><a href="#2-æ­å»ºæ­¥éª¤" class="headerlink" title="2 æ­å»ºæ­¥éª¤"></a>2 æ­å»ºæ­¥éª¤</h4><h5 id="1-å®‰è£…python-3-8"><a href="#1-å®‰è£…python-3-8" class="headerlink" title="(1) å®‰è£…python 3.8"></a>(1) å®‰è£…python 3.8</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo su<br>apt-<span class="hljs-built_in">get</span> update<br>apt-<span class="hljs-built_in">get</span> install python3.8<br></code></pre></td></tr></table></figure><p>å¦‚æœä¹‹å‰å·²ç»å®‰è£…äº†python3ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ç¬¬äºŒæ­¥</p><p>å¦‚æœä¹‹å‰å®‰è£…çš„æ˜¯python2ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹è½¯é“¾æ¥</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">rm <span class="hljs-regexp">/usr/</span>bin/python <br>ln -s <span class="hljs-regexp">/usr/</span>bin<span class="hljs-regexp">/python3.8 /u</span>sr<span class="hljs-regexp">/bin/</span>python<br></code></pre></td></tr></table></figure><p>è¾“å…¥pythonéªŒè¯</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221230145226881.png" alt="image-20221230145226881"></p><h5 id="2-å®‰è£…torch-torchvision-jupyter"><a href="#2-å®‰è£…torch-torchvision-jupyter" class="headerlink" title="(2) å®‰è£…torch torchvision jupyter"></a>(2) å®‰è£…torch torchvision jupyter</h5><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">pip <span class="hljs-keyword">install</span> torch torchvision jupyter<br></code></pre></td></tr></table></figure><blockquote><p>torchåº“è¾ƒå¤§ï¼Œå®‰è£…è¾ƒæ…¢ï¼Œå¤§æ¦‚éœ€è¦äº”å…­åˆ†é’Ÿå·¦å³ã€‚å¦‚æœä¸‹è½½é€Ÿåº¦å¤ªæ…¢ï¼Œå¯ä»¥å°è¯•è¿›è¡Œæ¢æºã€‚æˆ‘ä¹°çš„è…¾è®¯äº‘æœåŠ¡å™¨ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯è…¾è®¯æºã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æºï¼Œè±†ç“£æºç­‰ã€‚æ¢æºæ–¹æ³•å¯ä»¥åœ¨ç½‘ä¸Šå‚è€ƒå¡åšä¸»åšå®¢ã€‚</p></blockquote><p>å¦‚æœå®‰è£…å¤±è´¥ï¼Œå°è¯•æ›´æ–°pip</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">python -m pip install <span class="hljs-comment">--upgrade pip</span><br></code></pre></td></tr></table></figure><h5 id="3-ä¸‹è½½åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ jypyterè®°äº‹æœ¬å¹¶è§£å‹"><a href="#3-ä¸‹è½½åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ jypyterè®°äº‹æœ¬å¹¶è§£å‹" class="headerlink" title="(3) ä¸‹è½½åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ jypyterè®°äº‹æœ¬å¹¶è§£å‹"></a>(3) ä¸‹è½½åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ jypyterè®°äº‹æœ¬å¹¶è§£å‹</h5><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm">wget https://<span class="hljs-built_in">zh</span>-v2.d2l.ai/d2l-<span class="hljs-built_in">zh</span>.zip<br>unzip d2l.zip<br></code></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰unzipï¼Œæ‰§è¡Œ <code>apt-get zip</code>å®‰è£…å³å¯</p><p>è§£å‹åæœ‰ä»¥ä¸‹æ–‡ä»¶</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221230144525793.png" alt="image-20221230144525793"></p><h5 id="4-è¿è¡Œjupyter-è®°äº‹æœ¬"><a href="#4-è¿è¡Œjupyter-è®°äº‹æœ¬" class="headerlink" title="(4) è¿è¡Œjupyter è®°äº‹æœ¬"></a>(4) è¿è¡Œjupyter è®°äº‹æœ¬</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> pytorch<br>jupyter notebook<br></code></pre></td></tr></table></figure><p>å¦‚æœé‡åˆ°ä¸‹é¢è¿™ä¸ªæŠ¥é”™</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221230144454046.png" alt="image-20221230144454046"></p><p>åŸå› æ˜¯æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡</p><p>ç»ˆç«¯è¿è¡Œ<code>sudo vim ~/.bashrc</code></p><p>ç„¶åæ·»åŠ ä¸‹é¢å†…å®¹åˆ°æœ«å°¾</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=~/.local/bin:$&#123;PATH&#125;<br></code></pre></td></tr></table></figure><p>ä¿å­˜~&#x2F;.bashrcæ–‡ä»¶åï¼Œå¹¶åœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><p>å†è¾“å…¥ <code>jupyter notebook</code>å³å¯è¿è¡Œ</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221230144840509.png" alt="image-20221230144840509"></p>]]></content>
    
    
    <categories>
      
      <category>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ </category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Deeping Learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mobisys22 Melonç¬”è®°</title>
    <link href="/2022/12/27/Mobisys22-Melon%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/12/27/Mobisys22-Melon%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="Mobisys22-Melonç¬”è®°"><a href="#Mobisys22-Melonç¬”è®°" class="headerlink" title="Mobisys22 Melonç¬”è®°"></a>Mobisys22 Melonç¬”è®°</h2><h3 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h3><p>è®¾å¤‡ä¸Šå­¦ä¹ æ˜¯ä¸€ç§å¾ˆæœ‰å‰é€”çš„æ–°å…´éšç§ä¿æŠ¤æœºå™¨å­¦ä¹ èŒƒå¼æŠ€æœ¯ã€‚ç„¶è€Œï¼Œé€šè¿‡å®šé‡å®éªŒï¼Œ&#x3D;&#x3D;æˆ‘ä»¬å‘ç°å•†å“ç§»åŠ¨è®¾å¤‡ç”±äºæœ¬åœ°å†…å­˜å®¹é‡æœ‰é™ï¼Œä¸èƒ½å¾ˆå¥½åœ°æ”¯æŒè¶³å¤Ÿå¤§çš„æ‰¹å¤„ç†å¤§å°çš„æœ€å…ˆè¿›çš„DNNè®­ç»ƒã€‚&#x3D;&#x3D;ä¸ºäº†å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œæˆ‘ä»¬æå‡ºäº†Melonï¼Œè¿™æ˜¯ä¸€ç§å†…å­˜å‹å¥½çš„è®¾å¤‡ä¸Šå­¦ä¹ æ¡†æ¶ï¼Œå®ƒä½¿å¤§æ‰¹é‡è®­ç»ƒä»»åŠ¡è¶…å‡ºç‰©ç†å†…å­˜å®¹é‡ã€‚Melonæ˜æ™ºåœ°æ”¹è¿›äº†ç°æœ‰çš„å†…å­˜ä¿å­˜æŠ€æœ¯ï¼Œä»¥é€‚åº”èµ„æºå—é™çš„ç§»åŠ¨è®¾å¤‡ï¼Œå³é‡æ–°è®¡ç®—å’Œå¾®æ‰¹å¤„ç†ã€‚Meon è¿›ä¸€æ­¥ç»“åˆäº†æ–°æŠ€æœ¯æ¥å¤„ç†é«˜å†…å­˜ç¢ç‰‡å’Œå†…å­˜é€‚åº”ã€‚Melonè¿›ä¸€æ­¥ç»“åˆäº†æ–°çš„æŠ€æœ¯æ¥å¤„ç†é«˜å†…å­˜ç¢ç‰‡å’Œå†…å­˜é€‚åº”ã€‚æˆ‘ä»¬åœ¨å•†ç”¨ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨å„ç§å…¸å‹çš„DNNæ¨¡å‹å®ç°å’Œè¯„ä¼°Melonã€‚ç»“æœè¡¨æ˜ï¼Œåœ¨ç›¸åŒçš„å†…å­˜é¢„ç®—ä¸‹ï¼ŒMelon å¯ä»¥å®ç°é«˜è¾¾ 4.33Ã— çš„æ‰¹é‡å¤§å°ã€‚ç»™å®šç›¸åŒçš„æ‰¹é‡å¤§å°ï¼ŒMelon å¹³å‡å®ç°äº† 1.89 å€ï¼ˆé«˜è¾¾ 4.01Ã—ï¼‰æ›´é«˜çš„è®­ç»ƒååé‡ï¼Œå¹¶ä¸”ä¸ç«äº‰æ›¿ä»£æ–¹æ¡ˆç›¸æ¯”èŠ‚çœäº†é«˜è¾¾ 49.43% çš„èƒ½é‡ã€‚æ­¤å¤–ï¼ŒMelon åœ¨å†…å­˜é¢„ç®—é€‚åº”æ–¹é¢å¹³å‡å‡å°‘äº† 78.59% çš„è®¡ç®—é‡ã€‚</p><h3 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1 Introduction"></a>1 <strong>Introduction</strong></h3><p>æ·±åº¦ç¥ç»ç½‘ç»œ (DNN) æ˜¯å½“ä»Šç§»åŠ¨åº”ç”¨ç¨‹åºçš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œä¾‹å¦‚è¯­éŸ³åŠ©æ‰‹ã€å¢å¼ºç°å®ç­‰ã€‚å¤§é‡å·¥ä½œæ¢ç´¢äº†å¦‚ä½•åˆ©ç”¨å¼ºå¤§çš„ç¡¬ä»¶å’Œå„ç§ä¼˜åŒ–å°† DNN çš„æ¨ç†é˜¶æ®µå¸¦å…¥ç§»åŠ¨è®¾å¤‡ã€‚ä½œä¸ºå‘å‰è¿ˆå‡ºçš„ä¸€æ­¥ï¼Œè®¾å¤‡ä¸Šçš„å­¦ä¹ æ­£åœ¨æˆä¸ºç›´æ¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ‰§è¡Œæ¨¡å‹è®­ç»ƒçš„æ–°èŒƒå¼ï¼Œç‰¹åˆ«æ˜¯å®ç°å¼ºå¤§çš„&#x3D;&#x3D;éšç§ä¿æŠ¤å’Œä¸ªæ€§åŒ–&#x3D;&#x3D;ã€‚å®ƒå·²ç»æˆä¸ºé«˜çº§å­¦ä¹ æŠ€æœ¯(å¦‚è”é‚¦å­¦ä¹ ã€åˆ†è£‚å­¦ä¹ ç­‰[41,60,67])å’Œåº”ç”¨(å¦‚è¾“å…¥æ³•ã€è™šæ‹ŸåŠ©æ‰‹ç­‰[1,2,44]çš„åŸºç¡€ã€‚ç„¶è€Œï¼Œç”±äºæœ¬åœ°ç¡¬ä»¶èµ„æºçš„é™åˆ¶ï¼Œæˆ‘ä»¬å¾ˆç›´è§‚åœ°ä¼šé—®ï¼Œç°ä»£DNNçš„è®­ç»ƒåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯å¦è´Ÿæ‹…å¾—èµ·ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬å°†åœ¨Â§2ä¸­å®šé‡æ˜¾ç¤ºçš„é‚£æ ·ï¼Œå³ä½¿æ˜¯å…·æœ‰8GBå†…å­˜çš„é«˜ç«¯ç§»åŠ¨è®¾å¤‡ä¹Ÿæ— æ³•æ”¯æŒè¶³å¤Ÿå¤§çš„æ‰¹é‡DNNè®­ç»ƒï¼Œè¿™å¯¹äºå®ç°é«˜ç²¾åº¦å’Œç¨³å®šæ”¶æ•›æ˜¯è‡³å…³é‡è¦çš„ã€‚æ¢å¥è¯è¯´ï¼Œ&#x3D;&#x3D;å†…å­˜å¢™é˜»ç¢äº†è®­ç»ƒæ€§èƒ½&#x3D;&#x3D;ã€‚åœ¨è”é‚¦å­¦ä¹ ä¸­ï¼Œè¿™ç§å†…å­˜ä¸è¶³å°†è¢«æ”¾å¤§ï¼Œå› ä¸ºä½ç«¯è®¾å¤‡å°†æ˜¯ç«¯åˆ°ç«¯æ”¶æ•›çš„ç“¶é¢ˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é€šè¿‡å†…å­˜ä¼˜åŒ–æŠ€æœ¯æ‰“ç ´å†…å­˜å¢™ã€‚</p><h5 id="Prior-wisdom"><a href="#Prior-wisdom" class="headerlink" title="Prior wisdom"></a>Prior wisdom</h5><p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæ¨¡å‹è®­ç»ƒçš„å†…å­˜ä¼˜åŒ–å¤šå¹´æ¥åœ¨äº‘è®¡ç®—ä¸­å¾—åˆ°äº†å¹¿æ³›çš„ç ”ç©¶ï¼Œä½†åœ¨ç§»åŠ¨è®¾å¤‡ä¸­å¾ˆå°‘è®¨è®ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç›´è§‰æ˜¯è°ƒæŸ¥æœ€æˆç†Ÿçš„äº‘ç«¯å†…å­˜ä¼˜åŒ–æŠ€æœ¯æ˜¯å¦å¯ä»¥ç”¨äºç§»åŠ¨è®¾å¤‡ã€‚ä»¤æˆ‘ä»¬æƒŠè®¶çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨Â§3 ä¸­çš„å®šé‡å®éªŒè¡¨æ˜ï¼Œäº‘ç«¯æŠ€æœ¯å¾ˆéš¾åº”ç”¨äºç§»åŠ¨è®¾å¤‡</p><ol><li>äº¤æ¢[33,42,52,74]å¼•å…¥äº†ä¸¥é‡çš„åŒæ­¥å¼€é”€ï¼Œå› ä¸ºç§»åŠ¨socç¼ºä¹åƒæœåŠ¡å™¨gpuè¿™æ ·çš„é«˜é€ŸI&#x2F;Oé“¾è·¯(å¦‚PCIe)</li><li>è®­ç»ƒæ—¶çš„å‹ç¼©æå¤§åœ°æŸå®³äº†æ¨¡å‹çš„å‡†ç¡®æ€§ï¼Œå°¤å…¶æ˜¯åœ¨è”åˆè®¾ç½®ä¸­</li></ol><h5 id="Our-design"><a href="#Our-design" class="headerlink" title="Our design"></a>Our design</h5><p>æˆ‘ä»¬æå‡ºäº†Melonï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªå¯ä»¥å®é™…éƒ¨ç½²åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„å†…å­˜ä¼˜åŒ–DNNè®­ç»ƒæ¡†æ¶ã€‚Melonåœ¨å†…å­˜é¢„ç®—(åº”ç”¨ç¨‹åºæˆ–æ“ä½œç³»ç»ŸæŒ‡å®šçš„è®­ç»ƒè¿‡ç¨‹å¯ç”¨å†…å­˜çš„å¤§å°)ä¸‹é™åˆ¶äº†å³°å€¼å†…å­˜ä½¿ç”¨ã€‚Meloåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œå½“å†…å­˜é¢„ç®—æ˜¯æ— é™çš„ï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•ç²¾åº¦ä¸‹é™ï¼Œå¹¶è·å¾—ç›¸å½“çš„æ€§èƒ½ã€‚ï¼ˆè®­ç»ƒååé‡å’Œèƒ½æºæ¶ˆè€—ï¼‰</p><p>Melonæ˜¯åŸºäºæˆ‘ä»¬å¯¹åˆ©ç”¨ä¸¤ç§æ½œåœ¨æŠ€æœ¯çš„æ´å¯Ÿè€Œæ˜æ™ºåœ°æ„å»ºçš„ï¼Œè¿™ä¸¤ç§æŠ€æœ¯åœ¨äº‘ä¸Šè¿˜æ²¡æœ‰å¾—åˆ°å¾ˆå¥½çš„æ¢ç´¢</p><ol><li>micro batch</li><li>recomputation</li></ol><p>å¾®æ‰¹å¤„ç†æœ€åˆæ˜¯ä¸ºåˆ†å¸ƒå¼å­¦ä¹ ä¸­çš„è·¨gpuå¹¶è¡Œè€Œæå‡ºçš„ï¼Œä½†å¾ˆå°‘ç”¨äºå‡å°‘æ•°æ®ä¸­å¿ƒçš„å†…å­˜ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šå½±å“ç¡¬ä»¶å¹¶è¡Œæ€§ã€‚ç”±äºç§»åŠ¨è®¾å¤‡çš„ç¡¬ä»¶å®¹é‡æœ‰é™ï¼Œè¿™ä¸ªç¼ºç‚¹å¯ä»¥å¾ˆå¥½åœ°ç¼“è§£ã€‚å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œå¦‚æœæ¨¡å‹åŒ…å«æ‰¹é‡å½’ä¸€åŒ–(BatchNormalization, BN)å±‚ï¼Œåœ¨æ‰¹å¤„ç†ä¸­å¼•å…¥è·¨æ ·æœ¬ä¾èµ–æ€§ï¼Œåˆ™å¾®æ‰¹å¤„ç†ä¸èƒ½ä¿è¯æ•°å­¦ç­‰æ•ˆæ€§ã€‚å› æ­¤ï¼Œå¯¹äºå…·æœ‰ BN å±‚çš„æ¨¡å‹ï¼ŒMelon åˆ©ç”¨é‡æ–°è®¡ç®—ã€‚é‡æ–°è®¡ç®—å¯ä»¥é€šè¿‡ä¸¢å¼ƒå’Œé‡æ–°è®¡ç®—ä¸­é—´å¼ é‡æ¥å¸®åŠ©èŠ‚çœå†…å­˜ï¼Œä½†ä¸å†…å­˜äº¤æ¢ç›¸æ¯”ï¼Œç”±äºè®¡ç®—å¼€é”€ï¼Œé€šå¸¸è®¤ä¸ºäº‘ä¸Šçš„æ•ˆç‡è¾ƒä½ã€‚æ­£å¦‚æœ¬æ–‡åé¢æ‰€æ¼”ç¤ºçš„ï¼Œé€šè¿‡æˆ‘ä»¬çš„æ–°è®¾è®¡å’ŒæŠ€æœ¯ï¼Œé‡æ–°è®¡ç®—çš„æˆæœ¬å®é™…ä¸Šæ˜¯å¯ä»¥æ¥å—çš„è®¾å¤‡ä¸Šè®­ç»ƒã€‚</p><h5 id="Challenges-and-techniques"><a href="#Challenges-and-techniques" class="headerlink" title="Challenges and techniques"></a>Challenges and techniques</h5><p>å¯¹äºç»™å®šçš„DNN, Melonè‡ªåŠ¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼ŒæŒ‡å¯¼ä¸åŒå†…å­˜é¢„ç®—ä¸‹çš„è®­ç»ƒè¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œè®¡åˆ’éƒ½è¯¦ç»†é˜è¿°äº†å†…å­˜å¼ é‡åˆ†é…ã€å¾®æ‰¹å¤„ç†å¤§å°å’Œé‡æ–°è®¡ç®—è°ƒåº¦ç­–ç•¥ï¼Œä»¥åœ¨æŒ‡å®šçš„å†…å­˜é¢„ç®—ä¸‹å®ç°æœ€ä½³æ€§èƒ½ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒMelonå¹¶ä¸æ˜¯ç®€å•åœ°å»ºç«‹åœ¨å¾®æ‰¹å¤„ç†å’Œé‡æ–°è®¡ç®—çš„ç»„åˆä¹‹ä¸Šã€‚ç›¸åï¼Œæˆ‘ä»¬é‡åˆ°äº†ä»¥ä¸‹ç‹¬ç‰¹çš„æŒ‘æˆ˜ï¼Œå¹¶é€šè¿‡æˆ‘ä»¬çš„æ–°æŠ€æœ¯è§£å†³äº†å®ƒä»¬ã€‚</p><ul><li>Lifetime-aware memory pool</li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ¨¡å‹è®­ç»ƒæœŸé—´è§‚å¯Ÿåˆ°å¤§é‡çš„å†…å­˜ç¢ç‰‡ã€‚è®¾å¤‡ä¸Šè®­ç»ƒæ¡†æ¶é€šå¸¸ç»´æŠ¤ä¸€ä¸ªå¤§å‹å†…å­˜æ± æ¥ç®¡ç†æƒé‡å’Œä¸­é—´æ¿€æ´»ã€‚ç„¶è€Œï¼Œç”±äºåˆ†é…ç­–ç•¥ä¸åŒå’Œå„ç§å†…å­˜è®¿é—®æ¨¡å¼ [6, 26 , 45 ]ï¼Œæ± çš„å†…å­˜ç©ºé—´è¿ç»­å˜ä¸ºå°å—ã€‚æ ¹æ®æˆ‘ä»¬çš„æµ‹é‡ï¼Œåœ¨DNNè®­ç»ƒæœŸé—´ï¼Œè¿™äº›ç°æœ‰å†…å­˜æ± çš„æµªè´¹å†…å­˜å¯ä»¥è¾¾åˆ°42%ã€‚ä¸ºäº†å¤„ç†å†…å­˜ç¢ç‰‡ï¼ŒMelon ä½¿ç”¨ç‰¹å®šäºæ¨¡å‹çš„ç”¨æˆ·ç©ºé—´å†…å­˜æ± ï¼Œè¯¥æ± ç»“åˆäº†é™æ€å†…å­˜è®¿é—®æ¨¡å¼çš„çŸ¥è¯†ï¼ˆå³ï¼Œå½“éœ€è¦å¼ é‡ä»¥åŠå®ƒåœ¨æ¨¡å‹è®­ç»ƒæœŸé—´éœ€è¦å¤šå°‘å†…å­˜æˆ–ç§°ä¸ºç”Ÿå‘½å‘¨æœŸï¼‰å®ƒåŸºäºä¸€é¡¹ç®€å•ä½†å…³é”®çš„è§‚å¯Ÿï¼Œå³è®­ç»ƒæœŸé—´ç”Ÿæˆçš„æ•°ä¸‡ä¸ªå¼ é‡å…·æœ‰å¤šæ ·åŒ–çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¸€ä¸ªå¼ é‡åœ¨å†…å­˜ä¸­ä¿ç•™çš„æ—¶é—´è¶Šé•¿ï¼Œå®ƒå°±è¶Šå¯èƒ½ä¸å…¶ä»–å¼ é‡äº§ç”Ÿâ€œå¹²æ‰°â€ã€‚å› æ­¤ï¼ŒMoon ä½¿ç”¨è´ªå¿ƒç®—æ³•åœ¨ä½å†…å­˜åœ°å€æ”¾ç½®é•¿æœŸå¼ é‡ï¼Œä»¥æ›´å¥½åœ°æ•´åˆå†…å­˜æ± ã€‚ã€ä¿„ç½—æ–¯æ–¹å—ã€‘</p><ul><li>Memory-calibrated progressive recomputation</li></ul><p>å†…å­˜æ ¡å‡†æ¸è¿›é‡æ–°è®¡ç®—ã€‚ä¸ºäº†å°†æ‰€æå‡ºçš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å†…å­˜æ± ä¸é‡æ–°è®¡ç®—æŠ€æœ¯ç›¸ç»“åˆï¼ŒMeloné¢ä¸´ç€â€œé¸¡è¿˜æ˜¯è›‹â€å›°å¢ƒã€‚å†…å­˜æ± å°†æ‰€æœ‰å¼ é‡çš„ç”Ÿå‘½å‘¨æœŸä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆå¼ é‡åˆ†é…è®¡åˆ’ä»¥åŠæ‰€éœ€çš„å†…å­˜æ± çš„æ€»å¤§å°ã€‚ä½†æ˜¯ï¼Œé‡æ–°è®¡ç®—å°†æ± å¤§å°ä½œä¸ºè¾“å…¥æ¥åšå‡ºå†³å®šï¼Œè¿™å¯èƒ½ä¼šå½±å“æ± çš„ç­–ç•¥ã€‚å•ç‹¬ä¼˜åŒ–å®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªå¹¶ç®€å•åœ°åº”ç”¨ä¸€ä¸ªé¡¶éƒ¨ä¼šå¯¼è‡´æ¬¡ä¼˜æ€§èƒ½.å› æ­¤ï¼ŒMoon æå‡ºäº†ä¸€ç§é€šè¿‡æ ¡å‡†å†…å­˜æ± è¿›è¡Œé‡æ–°è®¡ç®—ç®—æ³•ã€‚æŒ‰ç…§æ‰§è¡Œé¡ºåºï¼Œå½“ä½¿ç”¨çš„å†…å­˜å¤§äºé¢„ç®—æ—¶ï¼ŒMelonä¸¢å¼ƒä¸€ä¸ªåˆ†é…çš„å¼ é‡ï¼Œå¹¶æ ¡å‡†é‚£äº›ç”Ÿå‘½å‘¨æœŸä¸è¢«ä¸¢å¼ƒçš„å¼ é‡æœ‰â€œå¹²æ‰°â€çš„å¼ é‡çš„ä½ç½®ã€‚å½“å†…å­˜ä¸­ä¸å­˜åœ¨å½“å‰è¿ç®—ç¬¦æ‰€éœ€çš„å¼ é‡æ—¶ï¼ŒMoon æœç´¢è¦é‡æ–°è®¡ç®—çš„æ‰€æœ‰æºå¼ é‡å¹¶ä¸ºå®ƒä»¬åˆ†é…å†…å­˜ã€‚åˆ†é…æ˜¯é€šè¿‡æ‰©å±•â€œæ—¶é—´è½´â€æ¥æ‰§è¡Œçš„ï¼Œæ ¹æ®å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå°†å¼ é‡æ·»åŠ åˆ°æ± ä¸­ã€‚ç„¶åMelonä»¥ä¸å‰é¢æåˆ°çš„ç›¸åŒçš„æ–¹å¼æ ¡å‡†æ± ã€‚</p><ul><li>On-the-fly memory budget adapting</li></ul><p>å‰ä¸¤ç§æŠ€æœ¯ä»…é€‚ç”¨äºé™æ€å†…å­˜é¢„ç®—ã€‚ç„¶è€Œï¼Œç§»åŠ¨è®¾å¤‡æ˜¯å¤šåº”ç”¨ç¨‹åºæˆ–å¤šä»»åŠ¡ç¯å¢ƒã€‚å› æ­¤ï¼ŒMelonåº”è¯¥æ”¯æŒåŠ¨æ€å†…å­˜é¢„ç®—ã€‚ç®€å•åœ°ä¸­æ­¢å½“å‰çš„æ‰¹è®­ç»ƒä¼šå¯¼è‡´å¤§é‡çš„è®¡ç®—èµ„æºæµªè´¹ï¼Œä¾‹å¦‚å‡ åç§’ã€‚ä¸ºäº†ä»¥è¾ƒä½çš„å¼€é”€å¿«é€Ÿå“åº”æ–°çš„å†…å­˜é¢„ç®—ï¼ŒMelonä½¿ç”¨äº†ä¸€ç§åŠ¨æ€å†…å­˜é€‚åº”æœºåˆ¶ã€‚ä¸€æ—¦æœ‰äº†æ–°çš„é¢„ç®—ï¼ŒMelonfirstå°±åŠ è½½æ–°çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¹¶æ‰©å¤§&#x2F;ç¼©å°å†…å­˜æ± ä»¥æ»¡è¶³å†…å­˜é¢„ç®—ã€‚ç„¶åï¼Œå®ƒæ ¹æ®æ–°è®¡åˆ’é‡æ–°è®¡ç®—åº”ä¿å­˜åœ¨å†…å­˜ä¸­ä½†å°šæœªå‘ˆç°çš„å¼ é‡ï¼ˆç”±äºæ–°&#x2F;æ—§è®¡åˆ’çš„å·®å¼‚æˆ–ä¸¢å¼ƒçš„å†…å­˜ç©ºé—´ï¼‰ã€‚ç„¶åMelonè°ƒæ•´å¼ é‡ä½ç½®ä»¥é€‚åº”æ–°è®¡åˆ’å¹¶ç»§ç»­è®­ç»ƒã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒMeloné€šè¿‡é‡ç”¨å…ˆå‰è®¡ç®—ç»“æœçš„ä¸€éƒ¨åˆ†æ¥å‡å°‘åˆ‡æ¢å¼€é”€ï¼Œè€Œä¸æ˜¯ä»ä¸€å¼€å§‹å°±é‡æ–°æ‰§è¡ŒDNNã€‚</p><h5 id="Implementation-and-evaluation"><a href="#Implementation-and-evaluation" class="headerlink" title="Implementation and evaluation"></a>Implementation and evaluation</h5><p>æˆ‘ä»¬å·²ç»åœ¨æˆ‘ä»¬å°†åœ¨ç¬¬ 5 èŠ‚ä¸­å±•ç¤ºçš„æœ€å…ˆè¿›çš„è®¾å¤‡ä¸Šè®­ç»ƒåº“ MNN [26 ] ä¸Šå®Œå…¨å®ç°äº† Meon å’Œ 4 ä¸ªåŸºçº¿ã€‚å†³ç­–é˜¶æ®µä¸€æ¬¡æ€§åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä¾‹å¦‚ï¼Œå½“åº”ç”¨ç¨‹åºå®‰è£…æ—¶ï¼Œä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥å‡ ä¹é›¶çš„ç¼–ç¨‹å·¥ä½œã€‚ç„¶åï¼Œæˆ‘ä»¬åœ¨å››ç§å…¸å‹çš„DNNæ¨¡å‹å’Œå››ç§å•†ç”¨Androidè®¾å¤‡ä¸Šè¿›è¡Œäº†å¹¿æ³›çš„å®éªŒã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œä¸vanilla MNNç›¸æ¯”ï¼ŒMelonè¶³ä»¥æ”¯æŒæ›´å¤§æ‰¹é‡(4.33Ã—)çš„è®¾å¤‡ä¸Šè®­ç»ƒï¼Œè¿™æ¯”æ‰€æœ‰åŸºçº¿éƒ½è¦æ˜¾è‘—å¾—å¤šã€‚å¦‚æ­¤å¤§çš„æ‰¹å¤§å°ä½¿å¾—melonåœ¨ä¸€ä¸ªç«¯åˆ°ç«¯çš„å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œè®­ç»ƒä½œä¸šçš„æ”¶æ•›é€Ÿåº¦åŠ å¿«äº†3.48Ã—ï¼Œæ”¶æ•›ç²¾åº¦æé«˜äº†2.2%ã€‚ä¸ºäº†æ”¯æŒç›¸åŒçš„å¤§æ‰¹é‡ï¼Œä¸åŸºå‡†ç›¸æ¯”ï¼Œmeloné™ä½äº†49.43%çš„èƒ½æºæ¶ˆè€—ã€‚æ­¤å¤–ï¼Œä¸é‡å¯æœºåˆ¶ç›¸æ¯”ï¼ŒMelonèŠ‚çœäº†é«˜è¾¾95.73%çš„å†…å­˜é¢„ç®—åˆ‡æ¢å¼€é”€ã€‚</p><h5 id="Contributions"><a href="#Contributions" class="headerlink" title="Contributions"></a>Contributions</h5><ul><li>æˆ‘ä»¬å½»åº•æµ‹é‡å’Œæ¢ç´¢æœ‰å¸Œæœ›çš„å†…å­˜ä¼˜åŒ–å¯¹è®¾å¤‡ä¸Šè®­ç»ƒçš„æ·±åˆ»å½±å“ã€‚</li><li>æˆ‘ä»¬è®¾è®¡å¹¶å®ç°äº†ç¬¬ä¸€ä¸ªå†…å­˜ä¼˜åŒ–çš„è®¾å¤‡ä¸Šè®­ç»ƒæ¡†æ¶Melonï¼Œå…·æœ‰ä¸‰ç§æ–°æŠ€æœ¯ï¼Œå³ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å†…å­˜æ± ã€å†…å­˜æ ¡å‡†æ¸è¿›é‡æ–°è®¡ç®—å’ŒåŠ¨æ€å†…å­˜é€‚åº”</li><li>æˆ‘ä»¬ç”¨å…·æœ‰ä»£è¡¨æ€§çš„DNNæ¨¡å‹å’Œå•†ç”¨ç§»åŠ¨è®¾å¤‡è¯„ä¼°Melonã€‚ç»“æœè¯æ˜äº†å®ƒçš„æœ‰æ•ˆæ€§ã€‚</li></ul><h3 id="2-MOTIVATION-AND-PRELIMINARIES"><a href="#2-MOTIVATION-AND-PRELIMINARIES" class="headerlink" title="2 MOTIVATION AND PRELIMINARIES"></a>2 MOTIVATION AND PRELIMINARIES</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç®€è¦ä»‹ç»è®¾å¤‡ä¸Šçš„è®­ç»ƒï¼Œå¹¶è¿›è¡Œåˆæ­¥å®éªŒã€‚</p><h4 id="2-1-On-Device-Training"><a href="#2-1-On-Device-Training" class="headerlink" title="2.1 On-Device Training"></a>2.1 On-Device Training</h4><p>è®¾å¤‡ä¸Šè®­ç»ƒçš„èƒ½åŠ›æ˜¯è®¸å¤šé«˜çº§å­¦ä¹ åœºæ™¯çš„åŸºç¡€ï¼Œå¦‚è”é‚¦å­¦ä¹ [41]å’Œè¾¹ç¼˜è®¾ç½®ä¸‹è®¾å¤‡ä¸Šçš„è¿ç§»å­¦ä¹ ã€‚ç€å…¬ä¼—å¯¹æ•°æ®éšç§çš„æ—¥ç›Šå…³æ³¨å’ŒGDPR[4]ç­‰ç›¸å…³æ³•å¾‹é¢å¸ƒï¼Œè¿™ç§éœ€æ±‚ä¸æ–­å¢é•¿ã€‚</p><p>è®¾å¤‡ä¸Šè®­ç»ƒé€šå¸¸é‡‡ç”¨éšæœºæ¢¯åº¦ä¸‹é™ (SGD) [9]ï¼Œå…¶ä¸­è®­ç»ƒæ—¶æœŸå¯ä»¥åˆ†ä¸ºä¸€äº›å°æ‰¹é‡ã€‚æ¯ä¸€æ‰¹çš„è®­ç»ƒéƒ½åº”è¯¥ç»å†ä¸€ä¸ªå®Œæ•´çš„æ•°æ®æµï¼šå‰å‘ä¼ é€’æ¥è®¡ç®—æŸå¤±ï¼Œåå‘ä¼ é€’ä»¥è·å¾—æ¢¯åº¦ï¼Œä»¥åŠåŸºäºæ¢¯åº¦çš„å‚æ•°æ›´æ–°ã€‚ä¸æ¨¡å‹æ¨ç†ï¼ˆå³é¢„æµ‹ï¼‰é˜¶æ®µä¸åŒï¼Œä¸­é—´å¼ é‡ä¸€æ—¦å®ƒä»¬å·²ç»è¢«ä¸‹ä¸€å±‚ä½¿ç”¨ï¼Œè®­ç»ƒé˜¶æ®µéœ€è¦ä¿ç•™å‰å‘ä¼ é€’æœŸé—´ç”Ÿæˆçš„è¾“å‡ºï¼Œç›´åˆ°å®ƒä»¬åœ¨åå‘ä¼ é€’æœŸé—´ä½¿ç”¨ã€‚å› æ­¤ï¼Œè®­ç»ƒæ¯”æ¨ç†éœ€è¦æ›´å¤šçš„å†…å­˜ã€‚</p><h5 id="Breakdown"><a href="#Breakdown" class="headerlink" title="Breakdown"></a>Breakdown</h5><p>æˆ‘ä»¬ä½¿ç”¨æœ€å…ˆè¿›çš„è®¾å¤‡ä¸Šè®­ç»ƒåº“ MNN å¯¹ DNN è®­ç»ƒæœŸé—´çš„å³°å€¼å†…å­˜å ç”¨è¿›è¡Œäº†ç»†åˆ†åˆ†æã€‚ç»“æœå¦‚å›¾1æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†å†…å­˜ä½¿ç”¨åˆ†ä¸º3ç±»ï¼Œå³&#x3D;&#x3D;æƒé‡å†…å­˜(å­˜å‚¨å‚æ•°)ï¼Œæ¿€æ´»å†…å­˜(å­˜å‚¨ä¸­é—´è¾“å‡º)å’Œä¼˜åŒ–å™¨å†…å­˜(å­˜å‚¨æ¢¯åº¦)ã€‚&#x3D;&#x3D;</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221211818878.png" alt="å›¾1:å†…å­˜å ç”¨ç»†åˆ†"></p><p>å®ƒè¡¨æ˜ï¼Œ&#x3D;&#x3D;æ¿€æ´»å†…å­˜é€šå¸¸ä¸»å¯¼æ•´ä½“å†…å­˜æ¶ˆè€—ï¼Œå¹¶ä¸æ‰¹å¤„ç†å¤§å°æˆçº¿æ€§æ¯”ä¾‹&#x3D;&#x3D;ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è¦åœ¨è®¾å¤‡ä¸Šå­¦ä¹ è¿‡ç¨‹ä¸­ä¼˜åŒ–è¿™éƒ¨åˆ†å†…å­˜ã€‚</p><h4 id="2-2-The-Memory-Wall"><a href="#2-2-The-Memory-Wall" class="headerlink" title="2.2 The Memory Wall"></a>2.2 The Memory Wall</h4><p>åœ¨è¿™é‡Œï¼Œä¸€ä¸ªç›´è§‚ä½†å°šæœªæ¢ç´¢çš„é—®é¢˜æ˜¯:å•†ç”¨ç§»åŠ¨è®¾å¤‡èƒ½å¦æ”¯æŒå…¸å‹DNNæ¨¡å‹çš„è®­ç»ƒï¼Œä»¥è¾¾åˆ°è‰¯å¥½çš„ç²¾åº¦?åœ¨å®è·µä¸­ï¼Œæœºå™¨å­¦ä¹ ç•Œå·²ç»è¾¾æˆå…±è¯†ï¼Œ&#x3D;&#x3D;å¤§çš„æ‰¹å¤§å°æœ‰åŠ©äºç¨³å®šæ”¶æ•›æ–¹å‘&#x3D;&#x3D;ã€‚æˆ‘ä»¬è¿˜å¯¹æ‰¹é‡å¤§å°å¦‚ä½•å½±å“é›†ä¸­å¼ï¼ˆå³å•ä¸ª GPU æœºå™¨ä¸­çš„æ•°æ®ï¼‰å’Œè”é‚¦è®¾ç½®ï¼ˆå³å‡è®¾æ•°æ®ä»¥é IID æ–¹å¼åˆ†å¸ƒåœ¨è®¸å¤šå®¢æˆ·ç«¯ä¸Šï¼‰ä¸­çš„æ¨¡å‹æ”¶æ•›æ€§è¿›è¡Œäº†æµ‹é‡ç ”ç©¶ï¼‰ã€‚å®éªŒç»“æœå¦‚è¡¨2æ‰€ç¤ºã€‚æˆ‘ä»¬ç¡®è®¤å¤§å°ºå¯¸éœ€è¦ç¡®ä¿è‰¯å¥½çš„å‡†ç¡®æ€§å’Œæ”¶æ•›é€Ÿåº¦ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºè”é‚¦è®¾ç½®ä¸­æ‰¹é‡å¤§å°ä¸º 128 çš„ MobileNetV2ï¼Œè®­ç»ƒè¿‡ç¨‹åœ¨ç¬¬ 164 è½®æ”¶æ•›ï¼Œæ¯”æ‰¹é‡å¤§å°ä¸º 32 çš„ MobileNetV2 å¿« 45.73%ã€‚æ­¤å¤–ï¼Œæµ‹è¯•ç²¾åº¦é«˜ 3.94%ã€‚ç›¸åŒçš„è§‚å¯Ÿç»“æœå¯ä»¥åœ¨é›†ä¸­å¼è®¾ç½®ä¸­æ‰¾åˆ°ï¼Œ&#x3D;&#x3D;å…¶ä¸­ä½¿ç”¨æ›´å¤§çš„æ‰¹é‡å¤§å°ä¼šå¯¼è‡´ 2% çš„å‡†ç¡®ç‡æˆ– 39.02% æ›´å¿«çš„æ”¶æ•›æ—¶é—´ã€‚&#x3D;&#x3D;</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221212605094.png" alt="å›¾2:ä¸åŒæ‰¹é‡è®­ç»ƒçš„æ”¶æ•›é€Ÿåº¦"></p><p>ç„¶è€Œï¼Œä½¿ç”¨&#x3D;&#x3D;æ›´å¤§æ‰¹é‡å¤§å°è®­ç»ƒæ¨¡å‹éœ€è¦æ›´å¤šçš„å†…å­˜å®¹é‡ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†&#x3D;&#x3D;ã€‚åœ¨å®è·µä¸­ï¼Œå•†å“ç§»åŠ¨è®¾å¤‡ä¸èƒ½å……åˆ†æ”¯æŒå¤§æ‰¹é‡è®­ç»ƒï¼Œå³å†…å­˜ç“¶é¢ˆã€‚è¡¨ 1 æ€»ç»“äº†å†…å­˜å¢™å¦‚ä½•å½±å“è®¾å¤‡ä¸Šçš„è®­ç»ƒã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221212642249.png" alt="è¡¨1:å†…å­˜å¢™åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„å½±å“"></p><p>å³ä½¿ä½¿ç”¨æ——èˆ°é«˜ç«¯å•†å“è®¾å¤‡ï¼ˆSamsung æ³¨æ„ 10ã€8GB RAMï¼‰ï¼ŒMNN åº“åªèƒ½æ”¯æŒ 32 çš„æ‰¹é‡å¤§å°ï¼ŒåŒæ—¶åœ¨é›†ä¸­å¼å’Œè”é‚¦è®¾ç½®ä¸­å¯¼è‡´æ›´ä½çš„å‡†ç¡®æ€§å’Œæ›´å¤šçš„è®­ç»ƒè½®æ¬¡ã€‚</p><p>ã€ï¼Ÿ128è½®çš„æ˜¯æ€ä¹ˆè®­ç»ƒå‡ºæ¥çš„ã€‘</p><h3 id="3-EXPLORING-EXISTING-TECHNIQUES"><a href="#3-EXPLORING-EXISTING-TECHNIQUES" class="headerlink" title="3 EXPLORING EXISTING TECHNIQUES"></a>3 EXPLORING EXISTING TECHNIQUES</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥æœ€åˆä¸ºäº‘è®¾è®¡çš„ç°æœ‰å†…å­˜èŠ‚çœæŠ€æœ¯ï¼Œå¹¶å®šé‡åˆ†æä¸ºä»€ä¹ˆè¿™äº›æŠ€æœ¯ä¸è¶³ä»¥ç”¨äºç§»åŠ¨è®¾å¤‡ã€‚ç„¶åæˆ‘ä»¬æ¢ç´¢æ–°çš„è®¾è®¡ç©ºé—´ï¼Œå¯èƒ½æœ‰åŠ©äºèŠ‚çœè®­ç»ƒå†…å­˜æ¶ˆè€—ã€‚</p><h5 id="Model-amp-gradients-compression"><a href="#Model-amp-gradients-compression" class="headerlink" title="Model &amp; gradients compression"></a>Model &amp; gradients compression</h5><p>é‡åŒ–[48,64]ï¼ˆæ‰“é©¬èµ›å…‹ï¼‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œ&#x3D;&#x3D;é€šè¿‡å‡å°‘è¡¨ç¤ºæ¯ä¸ªæƒé‡æ‰€éœ€çš„æ¯”ç‰¹æ•°æ¥å‹ç¼©dnnã€‚&#x3D;&#x3D;ä¾‹å¦‚ï¼Œ8ä½å’Œ16ä½é‡åŒ–æ˜¯å‹ç¼©dnnæœ€å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼Œç²¾åº¦æŸå¤±å¯ä»¥å¿½ç•¥ä¸è®¡[18,58]ã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œä½¿ç”¨1ä½è¡¨ç¤ºæ³•å·²è¢«è¯æ˜æ˜¯æœ‰æ•ˆçš„[12,13,51]ã€‚ç„¶è€Œï¼Œä¸ºäº†å‡å°‘å†…å­˜å ç”¨ï¼Œä½ç²¾åº¦è¡¨ç¤ºä¸‹çš„è®­ç»ƒæ¨¡å‹æ¯”æ¨ç†æ›´å…·æŒ‘æˆ˜æ€§ï¼Œè€Œä¸”å¾€å¾€ä¼šå¯¼è‡´æ¨¡å‹ç²¾åº¦çš„ä¸å¯æ¥å—çš„ä¸‹é™ã€‚</p><p>è®¡ç®—å’Œå­˜å‚¨ç½‘ç»œæ¿€æ´»æ‰€éœ€çš„å†…å­˜è¿œè¿œè¶…è¿‡å­˜å‚¨æ¨¡å‹æœ¬èº«æ‰€éœ€çš„å†…å­˜ã€‚ä¸¤ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†è¾“å…¥æ•°æ®å‹ç¼©åˆ°æ›´å°çš„å°ºå¯¸ï¼Œæˆ–è€…ä½¿æ¨¡å‹â€œæ›´çª„â€(ä¾‹å¦‚ï¼Œå‡å°‘æ¯ä¸ªå·ç§¯çš„è¾“å‡ºé€šé“æ•°é‡)ã€‚è¶…è¿‡ä¸€å®šç¨‹åº¦ï¼Œè¿™äº›æŠ€æœ¯ä¸­çš„æ¯ä¸€ç§éƒ½å¿…ç„¶å¯¼è‡´å‡†ç¡®æ€§çš„æŸå¤±â€”â€”å‰è€…æ˜¯å› ä¸ºå®ƒä¸¢å¼ƒäº†æ•°æ®ä¸­çš„ä¿¡æ¯ï¼Œåè€…æ˜¯å› ä¸ºå®ƒé™ä½äº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›</p><p>ã€å‹ç¼©å¸¦æ¥ç²¾åº¦ä¸‹é™ã€‘</p><p>æˆ‘ä»¬æ„è¯†åˆ°ï¼ŒåŸºäºfp32çš„è®­ç»ƒå’ŒåŸºäºint8çš„è®­ç»ƒä¹‹é—´çš„ç²¾åº¦å·®è·æ˜¯æ— æ³•é€šè¿‡å…ˆè¿›çš„å­¦ä¹ ç®—æ³•æ¥æ¶ˆé™¤çš„ã€‚æœ€è¿‘çš„ä¸€é¡¹ç ”ç©¶[78]æå‡ºäº†ä¸€ç§åå‘é‡åŒ–çš„æŸå¤±æ„ŸçŸ¥è¡¥å¿ï¼Œä½†åœ¨CIFAR-10æ•°æ®é›†ä¸Šçš„ç²¾åº¦ä¸‹é™é«˜è¾¾7.9%ã€‚å¦ä¸€ç§æœ€å…ˆè¿›çš„åŸºäºæ•´æ•°çš„è®­ç»ƒç®—æ³•NITI[63]ä½¿ç”¨äº†ç¦»æ•£å‚æ•°æ›´æ–°æ–¹æ¡ˆï¼Œä¹Ÿæ˜¾è‘—é™ä½äº†DNNçš„ç²¾åº¦ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œåœ¨åƒFLè¿™æ ·çš„æ–°å…´å­¦ä¹ æ¨¡å¼ä¸­ï¼Œè¿™ç§å‡†ç¡®æ€§å·®è·å¯èƒ½ä¼šè¢«æ”¾å¤§ã€‚æˆ‘ä»¬åœ¨å›¾3æ‰€ç¤ºçš„åˆæ­¥å®éªŒä¸­è§‚å¯Ÿåˆ°äº†è¿™ç§ç°è±¡ï¼Œå…¶ä¸­æˆ‘ä»¬æ¯”è¾ƒäº†é›†ä¸­è®¾ç½®å’Œè”é‚¦è®¾ç½®ä¸‹NITIçš„æ”¶æ•›è¿‡ç¨‹ã€‚å®ƒè¡¨æ˜ï¼Œä¸åŸºäºfp32çš„è®­ç»ƒç›¸æ¯”ï¼ŒNITIçš„å‡†ç¡®æ€§ä¸‹é™åœ¨è”é‚¦è®¾ç½®ä¸­æ›´ä¸ºæ˜æ˜¾ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221213714568.png" alt="å›¾3:è”é‚¦å­¦ä¹ çš„å‡†ç¡®æ€§æŸå¤±è¢«æ”¾å¤§äº†"></p><h5 id="Host-device-memory-swapping"><a href="#Host-device-memory-swapping" class="headerlink" title="Host-device memory swapping"></a>Host-device memory swapping</h5><p>ä¸»æœºå’Œè®¾å¤‡é—´çš„å†…å­˜äº¤æ¢ã€‚äº‘gpué€šå¸¸é…å¤‡ä¸“ç”¨çš„å†…å­˜å¡ï¼Œè¿™äº›å†…å­˜å¡ä¹‹é—´çš„æ•°æ®ç§»åŠ¨<strong>éå¸¸å¿«</strong>ï¼Œä¾‹å¦‚PCIe 5.0çš„128GB&#x2F;sã€‚é‰´äºä¸»å­˜é€šå¸¸æ¯”GPUå†…å­˜æ›´ä¸°å¯Œï¼Œä¹‹å‰çš„å·¥ä½œ[42,50,52,61]æ¢ç´¢äº†åœ¨DNNè®­ç»ƒä¸­ä½¿ç”¨ä¸»å­˜ä½œä¸ºå¤–éƒ¨æ•°æ®å¤‡ä»½ã€‚æ™ºèƒ½äº¤æ¢æœºåˆ¶å¯ä»¥å‡å°‘GPUä¸Šçš„å†…å­˜å ç”¨ï¼ŒåŒæ—¶å…·æœ‰è¾¹é™…çš„ååé‡æŸå¤±ï¼Œå› ä¸ºCPU&#x2F;GPUå†…å­˜ä¹‹é—´çš„I&#x2F;Oå¯ä»¥ä¸è®­ç»ƒé‡å ï¼Œå¹¶ä¸”å¯ä»¥å®Œå…¨è¦†ç›–å¼€é”€ã€‚</p><p>ç„¶è€Œï¼Œä¸äº‘ç›¸æ¯”ï¼Œäº¤æ¢ä¸é€‚ç”¨äºç§»åŠ¨è®¾å¤‡ï¼Œç§»åŠ¨è®¾å¤‡é€šå¸¸ä½¿ç”¨æ‰€æœ‰å¤„ç†å™¨çš„é›†æˆå†…å­˜èŠ¯ç‰‡ã€‚å› æ­¤ï¼Œäº¤æ¢åªèƒ½åœ¨è®¾å¤‡ä¸Šçš„ä¸»å†…å­˜å’Œç£ç›˜ä¹‹é—´æ‰§è¡Œï¼Œå…¶ä¸­å¸¦å®½éå¸¸æœ‰é™ï¼Œä¾‹å¦‚ï¼Œåœ¨è¡¨ 3 ä¸­åˆ—å‡ºçš„è®¾å¤‡ä¸Šæµ‹è¯•çš„ 100-300MB&#x2F;s ç”¨äºå†™å…¥æ“ä½œã€‚æˆ‘ä»¬è¿˜å°†é€šè¿‡å®éªŒè¯æ˜ï¼ŒåŸºäºäº¤æ¢çš„æœºåˆ¶åœ¨ Â§6 ä¸­çš„è®¾å¤‡ä¸Šè¡¨ç°å‡ºè¾ƒå·®çš„æ€§èƒ½ã€‚</p><p>ã€äº¤æ¢å¸¦å®½å°ï¼Œå¼€é”€å¤§ã€‘</p><h5 id="Activation-recomputation"><a href="#Activation-recomputation" class="headerlink" title="Activation recomputation"></a>Activation recomputation</h5><p>å¦‚å‰é¢æåˆ°çš„ï¼Œå‰å‘ä¼ é€’æœŸé—´ç”Ÿæˆçš„æ¿€æ´»æ”¯é…å†…å­˜ä½¿ç”¨ã€‚å› æ­¤ï¼Œä¸€äº›æ–‡çŒ®æ¢ç´¢äº†åœ¨å‰å‘ä¼ é€’è¿‡ç¨‹ä¸­ä¸¢å¼ƒä¸­é—´æ¿€æ´»ï¼Œå¹¶åœ¨åå‘é˜¶æ®µéœ€è¦é‡æ–°è®¡ç®—å®ƒä»¬ã€‚å¦‚å‰é¢æåˆ°çš„ï¼Œå‰å‘ä¼ é€’æœŸé—´ç”Ÿæˆçš„æ¿€æ´»æ”¯é…å†…å­˜ä½¿ç”¨ã€‚å› æ­¤ï¼Œä¸€äº›æ–‡çŒ®æ¢ç´¢äº†åœ¨å‰å‘ä¼ é€’è¿‡ç¨‹ä¸­ä¸¢å¼ƒä¸­é—´æ¿€æ´»ï¼Œå¹¶åœ¨åå‘é˜¶æ®µéœ€è¦é‡æ–°è®¡ç®—å®ƒä»¬ã€‚ã€æ•°æ®åº“ï¼Ÿã€‘é‡æ–°è®¡ç®—æ–‡çŒ®çš„ä¸€ä¸ªå…³é”®ä¸»é¢˜æ˜¯é€‰æ‹©æ£€æŸ¥ç‚¹ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæå‡ºäº†è®¸å¤šç®—æ³•ã€‚</p><p>æˆ‘ä»¬è®¤ä¸ºé‡æ–°è®¡ç®—å¯èƒ½å¯¹è®¾å¤‡ä¸Šçš„å­¦ä¹ æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä¸ä¼šè¡°å‡æ¨¡å‹ç²¾åº¦ï¼Œå¹¶ä¸”ä¸ä¾èµ–äºè®¾å¤‡ç¡¬ä»¶ä¹‹é—´çš„å¼±ç‰¹å¾ã€‚ç„¶è€Œï¼Œå½“å‰çš„ç®—æ³•åŸºäºä¸€ä¸ªç®€å•çš„å‡è®¾ï¼Œå³ä¿ç•™å¼ é‡å¤§å°çš„æ€»å’Œç­‰äºæ€»å†…å­˜å ç”¨ï¼Œå½“ä½¿ç”¨ç”¨æˆ·ç©ºé—´å†…å­˜æ± æ—¶ï¼Œè¿™å°†ä¸å‡†ç¡®ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰è€ƒè™‘å†…å­˜æ± çš„å½±å“ã€‚</p><p>ã€æ²¡æœ‰è€ƒè™‘å†…å­˜æ± ï¼Œæ—¶é—´æ¢ç©ºé—´ã€‘</p><h5 id="Splitting-mini-batch-to-micro-batch"><a href="#Splitting-mini-batch-to-micro-batch" class="headerlink" title="Splitting mini-batch to micro-batch."></a>Splitting mini-batch to micro-batch.</h5><p>ä½¿ç”¨å°æ‰¹é‡ SGD ç®—æ³•ï¼Œæƒé‡æ¢¯åº¦åœ¨æ‰¹æ¬¡ä¸­çš„æ‰€æœ‰æ ·æœ¬ä¸­å–å¹³å‡å€¼ã€‚å› æ­¤ï¼Œå°æ‰¹é‡å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†ä¸ºå„ç§è¾ƒå°çš„æ‰¹æ¬¡ï¼Œå³å¾®æ‰¹æ¬¡ [24, 55]ï¼Œå…¶æ¢¯åº¦æ˜¯æ‰€æœ‰å¾®æ‰¹æ¬¡æ¢¯åº¦çš„å¹³å‡å€¼ã€‚&#x3D;&#x3D;æˆ‘ä»¬åœ¨å›¾ 1 ä¸­çš„æµ‹é‡è¡¨æ˜æ¿€æ´»å†…å­˜å¤§å°ä¸æ‰¹é‡å¤§å°æˆæ­£æ¯”&#x3D;&#x3D;ï¼Œå› æ­¤å°†å°æ‰¹é‡æ‹†åˆ†ä¸ºå¾®æ‰¹æ¬¡å¯ä»¥æ˜¾ç€å‡å°‘æ‰€éœ€çš„å†…å­˜</p><p>&#x3D;&#x3D;å¾®æ‰¹æ¬¡æœ€åˆæ˜¯ä¸ºç®¡é“å¹¶è¡Œæ€§è€Œè®¾è®¡çš„ï¼Œä»¥å®ç°é«˜æ•ˆçš„åˆ†å¸ƒå¼æœºå™¨å­¦ä¹ &#x3D;&#x3D;ã€‚è¯¥æŠ€æœ¯å¾ˆå°‘ç”¨äºäº‘ç«¯ä»¥å‡å°‘å†…å­˜å ç”¨ï¼Œä¸»è¦æ˜¯å› ä¸º&#x3D;&#x3D;è¾ƒå°çš„å¾®æ‰¹å¤§å°ä¸èƒ½å……åˆ†åˆ©ç”¨äº‘ GPU çš„é«˜å¹¶è¡Œæ€§&#x3D;&#x3D;ï¼Œå¦‚å›¾ 4 æ‰€ç¤ºã€‚å°æ‰¹é‡çš„æ—¶å€™cpuçš„å¹¶è¡Œæ€§å·²ç»ç”¨æ»¡äº†ã€‚ç„¶è€Œï¼Œåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œç›¸å¯¹è¾ƒå°çš„æ‰¹å¤„ç†å¤§å°è¶³ä»¥è¾¾åˆ°æœ€å¤§çš„ç¡¬ä»¶èµ„æºåˆ©ç”¨ç‡ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221215815035.png" alt="å›¾4:ä½¿ç”¨å°æ‰¹é‡å¯ä»¥å……åˆ†åˆ©ç”¨ç§»åŠ¨ç«¯ç¡¬ä»¶çš„å¹¶è¡Œæ€§"></p><p>æ­¤å¤–ï¼Œå¯¹äºå…·æœ‰BatchNormalization (BN)å±‚2çš„DNNæ¨¡å‹ï¼Œæ— æ³•ä¿è¯å¾®æ‰¹çš„è®¡ç®—æ­£ç¡®æ€§ï¼Œè¿™æ¶‰åŠåˆ°æ ·æœ¬é—´çš„æ•°æ®ä¾èµ–æ€§ã€‚å°½ç®¡æå‡ºäº†åƒGhostBN[21]è¿™æ ·çš„ç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†ç»Ÿè®¡å˜åŒ–ä»ç„¶æ˜¯ä¸å¯é¿å…çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å¾®æ‰¹æ¬¡è§†ä¸ºä»…ç”¨äºæ²¡æœ‰ BN å±‚çš„æ¨¡å‹çš„è®¾å¤‡ä¸Šå†…å­˜ä¿å­˜æŠ€æœ¯çš„æœºä¼šã€‚</p><p>åœ¨æ¯ä¸ªå°æ‰¹ç»“æŸæ—¶ï¼Œç´¯ç§¯æ‰€æœ‰Mä¸ªå¾®æ‰¹çš„æ¢¯åº¦ï¼Œå¹¶åº”ç”¨äºæ›´æ–°æ‰€æœ‰åŠ é€Ÿå™¨çš„æ¨¡å‹å‚æ•°ã€‚</p><p>ä¾‹å¦‚ï¼ŒBatchNormåœ¨è®­ç»ƒæœŸé—´å¯¹å¾®æ‰¹ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ï¼Œä½†ç´¯ç§¯å°æ‰¹ç»Ÿè®¡ä¿¡æ¯ç”¨äºè¯„ä¼°</p><p>å¾®æ‰¹å¤„ç†(å‡å°‘æ¿€æ´»å†…å­˜)ã€‚åœ¨åŸºäºå°æ‰¹é‡çš„è®­ç»ƒç®—æ³•ä¸­ï¼Œå¯ä»¥é€šè¿‡ç½‘ç»œä¸€æ¬¡æ€§å‘é€æ•´ä¸ªå°æ‰¹é‡ï¼Œç„¶åç›¸åº”åœ°æ›´æ–°æƒé‡ï¼Œæˆ–è€…é€šè¿‡ç½‘ç»œä¾æ¬¡å‘é€å°æ‰¹é‡çš„æ›´å°å­é›†(ç§°ä¸ºå¾®æ‰¹é‡)ï¼Œç§¯ç´¯æ¢¯åº¦ï¼Œç›´åˆ°æ•´ä¸ªå°æ‰¹é‡è¢«å¤„ç†å®Œæ¯•</p><p>è¿™åœ¨æ•°å­¦ä¸Šç­‰åŒäºåœ¨DC-Transformerç­‰æ¨¡å‹ä¸­çš„æ ‡å‡†è®­ç»ƒï¼Œè¿™äº›æ¨¡å‹ä¸åŒ…å«æ‰¹é‡å½’ä¸€åŒ–ï¼Œå¹¶ä¸”ç¡®å®ä¸ä¼šå¯¼è‡´DC-Transformerçš„å‡†ç¡®æ€§ä¸‹é™ã€‚ç„¶è€Œï¼Œå¾®æ‰¹å¤„ç†æ”¹å˜äº†æ‰¹å½’ä¸€åŒ–å±‚çš„ç»Ÿè®¡ç‰¹æ€§;ç„¶è€Œï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨WideResNetä¸Šï¼Œä½¿ç”¨å°è‡³10çš„å¾®æ‰¹å¤„ç†è¿›è¡Œè®­ç»ƒä¸ä¼šå¯¼è‡´å‡†ç¡®æ€§çš„ä»»ä½•æŸå¤±</p><h5 id="Summarized-Implications"><a href="#Summarized-Implications" class="headerlink" title="Summarized Implications"></a>Summarized Implications</h5><p>é€šè¿‡å¯¹ç°æœ‰æŠ€æœ¯çš„å…ˆå‰æµ‹é‡ï¼Œæˆ‘ä»¬å‘ç°ç§»åŠ¨åœºæ™¯ä¸äº‘åœºæ™¯ä¹‹é—´å­˜åœ¨å·®è·ã€‚ä¸€æ–¹é¢ï¼Œåœ¨äº‘ä¸­å¹¿æ³›ç ”ç©¶çš„äº¤æ¢å’Œå‹ç¼©ä¸èƒ½å¾ˆå¥½åœ°é€‚åº”ç§»åŠ¨è®¾å¤‡ã€‚å¦ä¸€æ–¹é¢ï¼Œå¾®æ‰¹æ¬¡å¸¦æ¥äº†ä¸€ä¸ªæ–°çš„æœºä¼šï¼Œç”±äºç§»åŠ¨è®¾å¤‡çš„ç¡¬ä»¶å®¹é‡æœ‰é™ï¼Œå…¶ç¼ºç‚¹å¾—åˆ°äº†ç¼“è§£ï¼Œé‡æ–°è®¡ç®—æŠ€æœ¯è¶³å¤Ÿé€šç”¨ï¼Œå¯ä»¥æ”¯æŒå„ç§ç¡¬ä»¶å’Œæ¨¡å‹ã€‚è¿™äº›å‘ç°è¡¨æ˜ï¼Œè®¾å¤‡ä¸Šçš„å†…å­˜ä¼˜åŒ–ä¸äº‘æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œå¯¼è‡´æˆ‘ä»¬å°†Melonæ„å»ºä¸ºç‰¹å®šäºç§»åŠ¨çš„æ¡†æ¶ã€‚ç‰¹åˆ«æ˜¯ï¼ŒMelon éœ€è¦æ”¹è¿›é€‚å½“çš„æŠ€æœ¯ï¼ˆå¾®æ‰¹æ¬¡å’Œé‡æ–°è®¡ç®—ï¼‰ï¼Œå¹¶é¦–æ¬¡å°†å®ƒä»¬æ•´åˆä»¥è·å¾—èŠ‚çœå†…å­˜çš„æœ€å¥½å¤„ã€‚</p><h3 id="4-THE-DESIGN"><a href="#4-THE-DESIGN" class="headerlink" title="4 THE DESIGN"></a>4 THE DESIGN</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆæ¦‚è¿°Melonï¼Œç„¶åè¯¦ç»†è¯´æ˜å…¶æ¯ç§æ–°æŠ€æœ¯</p><h4 id="4-1-Overview"><a href="#4-1-Overview" class="headerlink" title="4.1 Overview"></a>4.1 Overview</h4><h5 id="Design-goal"><a href="#Design-goal" class="headerlink" title="Design goal"></a>Design goal</h5><p>Melonçš„ç›®æ ‡æ˜¯åœ¨&#x3D;&#x3D;ç»™å®šçš„æ‰¹å¤§å°å’Œå†…å­˜é¢„ç®—ä¸‹æœ€å¤§åŒ–æ¨¡å‹çš„è®­ç»ƒæ€§èƒ½&#x3D;&#x3D;ã€‚åœ¨è®­ç»ƒä»»åŠ¡ä¸­ï¼Œæ‰¹å¤„ç†å¤§å°é€šå¸¸ç”±ç®—æ³•å¼€å‘äººå‘˜å›ºå®šï¼Œè€Œå†…å­˜é¢„ç®—å¯ä»¥ç”±åº”ç”¨ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´ã€‚</p><p>Melonæ”¹è¿›äº†å¾®æ‰¹å¤„ç†å’Œé‡è®¡ç®—æŠ€æœ¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸æ–°çš„å†…å­˜æ± ç»“åˆä»¥å‡å°‘å†…å­˜ç¢ç‰‡ã€‚åœ¨è®­ç»ƒæ²¡æœ‰å¼•å…¥äº¤å‰æ ·æœ¬ä¾èµ–çš„BNå±‚çš„æ¨¡å‹æ—¶ï¼ŒMeloné‡‡ç”¨äº†å¾®æ‰¹æŠ€æœ¯ã€‚Melonæ”¹è¿›äº†å¾®æ‰¹å¤„ç†å’Œé‡è®¡ç®—æŠ€æœ¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸æ–°çš„å†…å­˜æ± ç»“åˆä»¥å‡å°‘å†…å­˜ç¢ç‰‡ã€‚åœ¨è®­ç»ƒæ²¡æœ‰å¼•å…¥&#x3D;&#x3D;äº¤å‰æ ·æœ¬ä¾èµ–çš„BNå±‚&#x3D;&#x3D;çš„æ¨¡å‹æ—¶ï¼ŒMeloné‡‡ç”¨äº†å¾®æ‰¹æŠ€æœ¯ã€‚é¦–å…ˆï¼Œä»æ¯ä¸ªå¾®æ‰¹ä¸­&#x3D;&#x3D;èšåˆç¼“å†²æ¢¯åº¦éœ€è¦æ—¶é—´ï¼Œä½†ä¸è®­ç»ƒæ—¶é—´ç›¸æ¯”ï¼Œå¼€é”€å¾®ä¸è¶³é“(â‰¤1%)ã€‚&#x3D;&#x3D;ç¬¬äºŒä¸ªå¼€é”€æ˜¯å°æ‰¹å¤„ç†å¤§å°é™ä½äº†å†…éƒ¨æ“ä½œæ‰§è¡Œçš„å¹¶è¡Œæ€§ã€‚ç”±äºç§»åŠ¨è®¾å¤‡çš„ç¡¬ä»¶å®¹é‡æœ‰é™ï¼Œè¿™ä¸€å¼€é”€ä¹Ÿå¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå¦‚Â§3æ‰€è¿°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸ºMeloné‡‡ç”¨å¾®æ‰¹æŠ€æœ¯å¾ˆå¥½åœ°è§£å†³äº†æŸäº›dnnçš„å†…å­˜å£é—®é¢˜ã€‚</p><p>ç„¶è€Œï¼ŒBN å±‚æˆä¸º DNN è®­ç»ƒçš„äº‹å®æ ‡å‡†ï¼ˆä¾‹å¦‚ ResNet [19] å’Œ Transformers [59]ï¼‰ã€‚å› æ­¤ï¼ŒMelon æ›´è¿›ä¸€æ­¥ï¼Œä¸“æ³¨äºæ”¯æŒé€šè¿‡é‡æ–°è®¡ç®—åŒ…å« BN å±‚çš„é€šç”¨ DNN æ¨¡å‹ã€‚Melonis çš„å…³é”®è®¾è®¡ï¼Œé€šè¿‡ç¡®å®šåº”è¯¥ä¸¢å¼ƒå“ªäº›å¼ é‡æˆ–é‡æ–°è®¡ç®—æ¥æœ€å°åŒ–é‡æ–°è®¡ç®—å¼€é”€ã€‚ç„¶è€Œï¼Œç›´æ¥åº”ç”¨æ± å’Œé‡æ–°è®¡ç®—å°†é¢ä¸´ä¸€ä¸ªä¸¤éš¾å¢ƒåœ°ï¼Œè¿™ä¸¤ä¸ªå›°å¢ƒéƒ½éœ€è¦å½¼æ­¤çš„å…¨å±€çŸ¥è¯†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„é‡æ–°è®¡ç®—æœºåˆ¶ï¼Œå¦‚Â§4.3æ‰€ç¤º</p><h5 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h5><p>å¦‚å›¾5æ‰€ç¤ºï¼ŒMelonåˆ†ä¸¤ä¸ªé˜¶æ®µå·¥ä½œ</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221224148015.png" alt="å›¾5:Melonæ¦‚è§ˆ"></p><ol><li>åœ¨å†³ç­–é˜¶æ®µï¼ŒMelonç”Ÿæˆåœ¨ä¸åŒå†…å­˜é¢„ç®—ä¸‹å®ç°æœ€ä½³æ€§èƒ½çš„æ‰§è¡Œè®¡åˆ’</li><li>åœ¨æ‰§è¡Œé˜¶æ®µï¼ŒMoon æ ¹æ®è®¡åˆ’æ‰§è¡Œ DNN è®­ç»ƒã€‚</li></ol><p>è¿™æ ·çš„ä¸¤é˜¶æ®µè®¾è®¡æ˜¯åŸºäºDNNè®­ç»ƒè¿‡ç¨‹ä¸­è§„åˆ™å¼ é‡è®¿é—®æ¨¡å¼çš„æœºä¼šï¼Œå·²ç»åœ¨ç°æœ‰çš„å·¥ä½œ[46]ä¸­é‡‡ç”¨ã€‚æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªé˜¶æ®µéƒ½åœ¨è®¾å¤‡ä¸Šè¿è¡Œï¼Œ&#x3D;&#x3D;å†³ç­–é˜¶æ®µåœ¨æ‰§è¡Œé˜¶æ®µä¹‹å‰è‡ªåŠ¨è§¦å‘ã€‚&#x3D;&#x3D;å› æ­¤ï¼Œè¿™æ ·çš„è®¾è®¡ä¸ä¼šä¸ºå¼€å‘äººå‘˜å¼•å…¥ä»»ä½•é¢å¤–çš„ç¼–ç¨‹å·¥ä½œ(ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„å®ç°ä¸­åªæœ‰ä¸€è¡Œshellå‘½ä»¤)ã€‚</p><ul><li><strong>Decision stage</strong></li></ul><p>åœ¨è®­ç»ƒDNNæ¨¡å‹ä¹‹å‰ï¼ŒMeloné¦–å…ˆè¿è¡Œåˆ†æè¿­ä»£ï¼Œé€šè¿‡execution Profilerè·å¾—è¿è¡Œæ—¶ä¿¡æ¯ï¼šè¢«åˆ†æçš„ä¿¡æ¯åŒ…å«äº†åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç¥ç»ç½‘ç»œç®—å­å’Œå¼ é‡ï¼ŒåŒ…æ‹¬&#x3D;&#x3D;æ•°æ®æµä¾èµ–å…³ç³»ã€æ¯ä¸ªå¼ é‡çš„å¤§å°ã€æ¯ä¸ªç®—å­çš„è®¡ç®—æ—¶é—´ã€æ¯ä¸ªå¼ é‡çš„ç”Ÿå‘½å‘¨æœŸ&#x3D;&#x3D;ç­‰ã€‚&#x3D;&#x3D;ç„¶åï¼Œæ¦‚è¦ä¿¡æ¯è¢«æä¾›ç»™æ‰§è¡Œè®¡åˆ’ç”Ÿæˆå™¨ï¼Œå®ƒä¼šç”Ÿæˆæ‰§è¡Œè®¡åˆ’æ¥è¯¦ç»†è¯´æ˜å†…å­˜èŠ‚çœçš„ç»†èŠ‚ï¼Œä¾‹å¦‚:ï¼ˆ1ï¼‰æ¯ä¸ªå¼ é‡è¢«æ”¾åœ¨å“ªé‡Œï¼ˆ2ï¼‰å“ªäº›è¿ç®—ç¬¦éœ€è¦é‡æ–°è®¡ç®—ã€‚&#x3D;&#x3D;æ­¤å¤–ï¼Œæ‰§è¡Œè®¡åˆ’è¿˜åŒ…å«æ‰¹é‡æ‹†åˆ†ç­–ç•¥ï¼Œè¯¥ç­–ç•¥æŒ‡å®šäº†&#x3D;&#x3D;æ²¡æœ‰BNå±‚çš„æ¨¡å‹çš„æ‹†åˆ†æ‰¹æ¬¡å¤§å°ã€‚&#x3D;&#x3D;ç”±äºè¯¥æŠ€æœ¯å¯¹è®­ç»ƒè¿‡ç¨‹çš„ç»Ÿè®¡ç‰¹å¾æ²¡æœ‰å½±å“ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨è®¾å¤‡æ”¯æŒçš„æœ€å¤§å¾®æ‰¹å¤„ç†å¤§å°ï¼Œä»¥æœ€å°åŒ–é€šè¿‡èšåˆç¼“å†²æ¢¯åº¦å¼•å…¥çš„é¢å¤–å¼€é”€ã€‚ä¸‹é¢çš„å°èŠ‚æè¿°äº†Melonå¦‚ä½•æœç´¢æœ€ä½³æ‰§è¡Œè®¡åˆ’ã€‚æ¯ä¸ªæ‰§è¡Œè®¡åˆ’å¯¹åº”ä¸€ä¸ªå†…å­˜é¢„ç®—ï¼Œå› æ­¤Meloné¢„å…ˆå®šä¹‰äº†ä¸€ç»„å†…å­˜é¢„ç®—ï¼Œå¹¶ä¸ºæ¯ä¸ªé¢„ç®—ç”Ÿæˆæœ€ä½³çš„æ‰§è¡Œè®¡åˆ’ï¼Œè¿™äº›è®¡åˆ’å°†ä¸ç”¨äºæ‰§è¡Œé˜¶æ®µçš„æ¨¡å‹ä¸€èµ·å­˜å‚¨åœ¨æœ¬åœ°ã€‚é€‚åº”ä¸€ç»„é¢„å®šä¹‰çš„é¢„ç®—ï¼Œè€Œä¸æ˜¯ä»»æ„é¢„ç®—ï¼Œç®€åŒ–äº†Melonçš„å†…å­˜ä¼˜åŒ–è®¾è®¡ã€‚æˆæœ¬æ˜¯å¾®ä¸è¶³é“çš„ï¼Œå› ä¸ºæ¯ä¸ªæ‰§è¡Œè®¡åˆ’åœ¨æˆ‘ä»¬çš„å®ç°ä¸­åªéœ€è¦å‡ ä¸ª KBã€‚</p><ul><li><strong>Execution stage</strong></li></ul><p>ä¸€æ—¦è®­ç»ƒä»»åŠ¡å¼€å§‹ï¼ŒMelon çš„è®­ç»ƒå¼•æ“æ ¹æ®å½“å‰å†…å­˜é¢„ç®—åŠ è½½é€‚å½“çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¹¶æ‰§è¡Œè®¡åˆ’æŒ‡å¯¼çš„è®­ç»ƒã€‚&#x3D;&#x3D;å½“å†…å­˜é¢„ç®—å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒMelon ä¼šæ£€æŸ¥æ˜¯å¦éœ€è¦åŠ è½½æ–°è®¡åˆ’ã€‚å¦‚æœéœ€è¦ï¼ŒMelon æ ¹æ®ç¬¬ 4.4 èŠ‚ä¸­è®¨è®ºçš„æŠ€æœ¯å¿«é€Ÿåˆ‡æ¢åˆ°æ–°è®¡åˆ’ã€‚&#x3D;&#x3D;</p><p>ä¸ºäº†å°½é‡å‡å°‘å¼€å‘äººå‘˜çš„æ‰‹åŠ¨å·¥ä½œï¼ŒMoon çš„å†³ç­–é˜¶æ®µåœ¨è®¾å¤‡ä¸Šè¿è¡Œä»¥è‡ªåŠ¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ã€‚è¿™äº›è®¡åˆ’å¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°å­˜å‚¨ä¸Šï¼Œå› æ­¤å®ƒä»¬åªéœ€è¦ç”Ÿæˆä¸€æ¬¡ï¼Œä¾‹å¦‚ï¼Œå½“å®‰è£…åº”ç”¨ç¨‹åºæˆ–ä»æœåŠ¡å™¨è·å–æ–°æ¨¡å‹æ—¶ã€‚</p><h4 id="4-2-Lifetime-Aware-Memory-Pool"><a href="#4-2-Lifetime-Aware-Memory-Pool" class="headerlink" title="4.2 Lifetime-Aware Memory Pool"></a>4.2 Lifetime-Aware Memory Pool</h4><p>ç”¨æˆ·ç©ºé—´å†…å­˜æ± [77]æ˜¯è®­ç»ƒæ¡†æ¶[6,26,45]ç®¡ç†å†…å­˜çš„å¸¸ç”¨æ–¹æ³•ã€‚å®ƒé¿å…äº†ä¸æ“ä½œç³»ç»Ÿé¢‘ç¹äº¤äº’ä»¥åˆ†é…&#x2F;é‡Šæ”¾å†…å­˜å—çš„é«˜å¼€é”€ã€‚ã€ç”Ÿæ´»è´¹ã€‘å¦‚ä»Šï¼Œè¿™äº›æ¡†æ¶ä½¿ç”¨çš„å†…å­˜æ± æŒ‰é¡ºåºä¸ºå¼ é‡åˆ†é…å†…å­˜ï¼Œå¹¶åœ¨æ¯ä¸ªåˆ†é…åæ›´æ–°æ± ä¿¡æ¯ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å¿½ç•¥äº† DNN è®­ç»ƒè¿­ä»£é‡å¤çš„ç‹¬ç‰¹ç‰¹å¾ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å†…å­˜ç¢ç‰‡ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨ MNN åœ¨ç›¸åŒçš„è®¾ç½®ä¸­æµªè´¹é«˜è¾¾ 42% çš„å†…å­˜ç©ºé—´</p><h5 id="4-2-1-Opportunity-and-Heuristics"><a href="#4-2-1-Opportunity-and-Heuristics" class="headerlink" title="4.2.1 Opportunity and Heuristics."></a>4.2.1 Opportunity and Heuristics.</h5><p>æ”¹è¿›å†…å­˜å¸ƒå±€çš„ä¸€ä¸ªæœºä¼šæ˜¯åœ¨æ‰¹å¤„ç†ç²’åº¦çš„è®­ç»ƒä¸­ä¿æŒä¸€è‡´çš„å†…å­˜æ“ä½œã€‚åŸºäºæ¦‚è¦çš„å†…å­˜æ“ä½œä¿¡æ¯ï¼Œå¯ä»¥ç”¨æœ€å°çš„å†…å­˜å¤§å°æ„å»ºæœ€ä½³å¸ƒå±€ã€‚å›¾6æ˜¾ç¤ºäº†å¦‚ä½•é€šè¿‡æ›´å¥½çš„å¸ƒå±€æ¥èŠ‚çœå†…å­˜çš„ç¤ºä¾‹ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221230605606.png" alt="å›¾6:æ”¹å–„å†…å­˜å¸ƒå±€"></p><p>With the on-demand strategy shown in Figure 6(a), the ğ‘‡2 is assigned to an address aside ğ‘‡1. After ğ‘‡1 is released, ğ‘‡4 cannot fit into the memory space below ğ‘‡2, therefore it should be located in the address above ğ‘‡2. Consequently, the total memory footprint is the sum of ğ‘‡1, ğ‘‡2 and ğ‘‡4. In the optimized allocation strategy shown in Figure 6(b), the memory footprint size can be reduced to the sum of ğ‘‡2 and ğ‘‡4.</p><p>ä½†æ˜¯ï¼Œè§£å†³ä¸Šè¿°å†…å­˜èŠ‚çœé—®é¢˜ç±»ä¼¼äº2DSPé—®é¢˜[8]â€”â€”ä¸€ä¸ªç»å…¸çš„NP-Hardé—®é¢˜ã€‚è¯¥é—®é¢˜çš„è¾“å…¥ç”±æ•°åƒä¸ªå¼ é‡ç»„æˆï¼Œå› æ­¤ä¸å¯èƒ½ç©·å°½æœ€ä¼˜è§£ã€‚ä¸ºäº†è·å¾—ä¸€ä¸ªæ¥è¿‘æœ€ä¼˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¾ˆå°‘çš„åŠªåŠ›å·²ç»æŠ•å…¥ã€‚&#x3D;&#x3D;è¿™äº›æ–¹æ³•é€šå¸¸ä»¥â€œå¤§å¼ é‡ä¼˜å…ˆâ€çš„è´ªå©ªæ–¹å¼æ‰§è¡Œå†…å­˜åˆ†é…ã€‚&#x3D;&#x3D;ç›¸åï¼Œæˆ‘ä»¬å‘ç°å¼ é‡çš„ç”Ÿå‘½æœŸ(ç»åº¦)ä¼šå¯¹å¸ƒå±€æ•ˆæœäº§ç”Ÿå·¨å¤§å½±å“ã€‚ç›´è§‚åœ°è¯´ï¼Œä¸€ä¸ªå¼ é‡åœ¨å†…å­˜æ± ä¸­åœç•™çš„æ—¶é—´è¶Šé•¿ï¼Œå®ƒä¸å…¶ä»–å¼ é‡çš„â€œå¹²æ‰°â€å°±è¶Šå¤šï¼Œå› ä¸ºå®ƒå°†å†…å­˜æ± åˆ†å‰²ä¸ºä¸¤ä¸ªç”±æ—¶é—´æˆ³ç»™å‡ºçš„åˆ†ç¦»æ®µã€‚äº‹å®ä¸Šï¼Œè¿™ç§ç”Ÿå‘½å‘¨æœŸå¤šæ ·åŒ–åœ¨ DNN è®­ç»ƒä¸­å¾ˆæ™®éï¼Œå¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ã€‚</p><ol><li>&#x3D;&#x3D;æ¿€æ´»è·¨è¶Šå¾ˆé•¿çš„ç”Ÿå‘½å‘¨æœŸï¼Œå³åœ¨æ­£å‘ä¼ é€’æ—¶äº§ç”Ÿï¼Œåœ¨åå‘ä¼ é€’æ—¶é‡Šæ”¾ã€‚ä¸å †æ ˆæ•°æ®ç»“æ„ç±»ä¼¼ï¼Œå®ƒéµå¾ªâ€œå…ˆäº§ç”Ÿåå‘å¸ƒâ€(First Produce Last Release, FPLR)é¡ºåºï¼Œå³è¶Šæ—©äº§ç”Ÿæ¿€æ´»ï¼Œè¶Šæ™šé‡Šæ”¾æ¿€æ´»ã€‚&#x3D;&#x3D;</li><li>å…¶ä»–ä¸´æ—¶å¼ é‡çš„ç”Ÿå‘½å‘¨æœŸæ¯”æ¿€æ´»è¦çŸ­å¾—å¤šï¼Œåªè·¨è¶Šå‡ ä¸ªç”šè‡³ä¸€ä¸ªç®—å­ã€‚è¿™æ ·çš„è§‚å¯ŸæŒ‡å¯¼æˆ‘ä»¬æ ¹æ®æ¯ä¸ªå¼ é‡çš„ç”Ÿå‘½å‘¨æœŸä»¥è´ªå©ªçš„æ–¹å¼åˆ†é…å®ƒä»¬ï¼Œä»¥è¿‘ä¼¼è¿™ä¸ªç±»2dspé—®é¢˜çš„æœ€ä¼˜è§£ã€‚</li></ol><h5 id="4-2-2-Our-Approach"><a href="#4-2-2-Our-Approach" class="headerlink" title="4.2.2 Our Approach"></a>4.2.2 Our Approach</h5><p>åŸºäºå‰é¢çš„è§‚å¯Ÿï¼Œmeloné‡‡ç”¨äº†ä¸€ç§å¼ é‡ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ç®—æ³•æ¥ä¼˜åŒ–å†…å­˜å¸ƒå±€ã€‚&#x3D;&#x3D;å…³é”®æ€æƒ³æ˜¯å°†é•¿ç”Ÿå‘½æœŸå¼ é‡æ”¾åœ¨çŸ­ç”Ÿå‘½æœŸå¼ é‡ä¸‹é¢ï¼Œä»¥å·©å›ºæ•´ä¸ªå†…å­˜å¸ƒå±€ã€‚&#x3D;&#x3D;Melonè¿­ä»£åœ°å°†å…·æœ‰æœ€é•¿ç”Ÿå­˜æœŸçš„å¼ é‡æ”¾ç½®åœ¨å¯èƒ½çš„æœ€ä½å†…å­˜åœ°å€ä¸Šã€‚å½“ä¸€ä¸ªå¼ é‡çš„å°¾éƒ¨è¶…è¿‡å½“å‰æ± çš„å¤§å°æ—¶ï¼Œå†…å­˜æ± å°±ä¼šæ‰©å±•ã€‚è¿™ä¸ªè¿‡ç¨‹ä»¥è´ªå©ªçš„æ–¹å¼æ‰§è¡Œã€‚åˆ©ç”¨æ¯ä¸ªå¼ é‡çš„æ¦‚è¦ä¿¡æ¯ï¼ŒMelonå°†å†…å­˜æ± å’Œå¼ é‡æŠ½è±¡ä¸ºä¸€ä¸ª2Dè½´å’ŒçŸ©å½¢ï¼Œå¦‚å›¾6æ‰€ç¤º.å†…å­˜åœ°å€å¯ä»¥è¡¨ç¤ºä¸ºç›¸å¯¹äºæ± åº•éƒ¨çš„åç§»é‡ã€‚åœ¨æ‰§è¡Œé˜¶æ®µï¼ŒMelonä¸€æ¬¡è¯·æ±‚æ‰€æœ‰çš„å†…å­˜ç©ºé—´ã€‚åœ¨ä¸ºæ¯ä¸ªå¼ é‡åˆ†é…å†…å­˜æ—¶ï¼ŒMelonåªæ˜¯æ ¹æ®æ‰§è¡Œè®¡åˆ’ä¸ºæ¯ä¸ªå¼ é‡åˆ†é…æ± ä¸­ç‰¹å®šçš„åœ°å€ã€‚</p><h4 id="4-3-Memory-Calibrated-Progressive-Recomputation"><a href="#4-3-Memory-Calibrated-Progressive-Recomputation" class="headerlink" title="4.3 Memory-Calibrated Progressive Recomputation"></a>4.3 Memory-Calibrated Progressive Recomputation</h4><h5 id="4-3-1-Problems-of-Existing-Techniques"><a href="#4-3-1-Problems-of-Existing-Techniques" class="headerlink" title="4.3.1 Problems of Existing Techniques"></a>4.3.1 Problems of Existing Techniques</h5><p>é¦–å…ˆï¼Œå…ˆå‰çš„é‡æ–°è®¡ç®—ç­–ç•¥[11,46]åªè€ƒè™‘å‰å‘ä¼ æ’­ä¸­äº§ç”Ÿçš„æ¿€æ´»ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°åœ¨å‰å‘å’Œåå‘é˜¶æ®µéƒ½äº§ç”Ÿäº†è®¸å¤šç¢ç‰‡åŒ–å’Œä¸´æ—¶å¼ é‡ï¼Œä¾‹å¦‚å›¾ 7ä¸­çš„F3å’ŒB3ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221232121580.png" alt="å›¾7:Melonçš„é‡æ–°è®¡ç®—å·¥ä½œæµç¨‹"></p><p>&#x3D;&#x3D;å…¶æ¬¡ï¼Œå…ˆå‰çš„å·¥ä½œä½¿é‡è®¡ç®—ç­–ç•¥ä»…åŸºäºæœ´ç´ å³°å€¼å†…å­˜ï¼Œå³æ‰€æœ‰æ¿€æ´»å¼ é‡çš„å’Œã€‚&#x3D;&#x3D;äº‹å®ä¸Šï¼Œåœ¨MobileNetV2ä¸MNNçš„è®­ç»ƒå‘å‰ä¼ é€’è¿‡ç¨‹ä¸­äº§ç”Ÿçš„1800å¤šä¸ªå¼ é‡ä¸­ï¼Œåªæœ‰å¤§çº¦200ä¸ªæ˜¯éœ€è¦é•¿æœŸä½¿ç”¨çš„æ¿€æ´»ã€‚è™½ç„¶å…¶ä»–å¼ é‡åªå­˜åœ¨å¾ˆçŸ­çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†å®ƒä»¬ä¼šå ç”¨é‡è¦çš„å†…å­˜ç©ºé—´ï¼Œå¹¶å¯¼è‡´å†…å­˜ä½¿ç”¨æº¢å‡ºã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰è€ƒè™‘å†…å­˜æ± çš„å½±å“ï¼Œé‡æ–°è®¡ç®—ç­–ç•¥ä¼šå¯¼è‡´ä¸å‡†ç¡®çš„ç»“æœã€‚</p><h5 id="4-3-2-Our-Approach"><a href="#4-3-2-Our-Approach" class="headerlink" title="4.3.2 Our Approach"></a>4.3.2 Our Approach</h5><p>ä¸ºæ­¤ï¼ŒMelonå¼•å…¥äº†ä¸€ç§ä¸åŒçš„é‡è®¡ç®—æœºåˆ¶ï¼Œè¯¥æœºåˆ¶å…¨é¢è€ƒè™‘äº†å†…å­˜æ± çš„å½±å“ã€‚ä½†æ˜¯ï¼Œå¦‚Â§4.2æ‰€è¿°ï¼Œ&#x3D;&#x3D;æ± éœ€è¦æ‰€æœ‰å¼ é‡çš„å…¨å±€çŸ¥è¯†æ¥è¿›è¡Œåˆ†é…å†³ç­–ï¼Œ&#x3D;&#x3D;å³æ‰€æœ‰å¼ é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½å¯èƒ½å—åˆ°é‡æ–°è®¡ç®—çš„å½±å“ã€‚åªæœ‰å½“æ± çš„ä¿¡æ¯å¯è®¿é—®æ—¶ï¼Œå³å½“å‰å¼ é‡çš„å°¾éƒ¨æ˜¯å¦è¶…è¿‡å†…å­˜é¢„ç®—æ—¶ï¼Œæ‰èƒ½åˆ¶å®šé‡è®¡ç®—ç­–ç•¥ã€‚æ¢å¥è¯è¯´ï¼Œå†…å­˜æ± å’Œé‡æ–°è®¡ç®—éƒ½éœ€è¦å½¼æ­¤çš„å®Œæ•´çŸ¥è¯†æ‰èƒ½åšå‡ºè‰¯å¥½çš„å†³ç­–ã€‚&#x3D;&#x3D;ä¸ºäº†è§£å†³è¿™ä¸ªå›°å¢ƒï¼Œæˆ‘ä»¬å¼•å…¥äº†å†…å­˜æ ¡å‡†çš„æ¸è¿›å¼é‡æ–°è®¡ç®—&#x3D;&#x3D;ï¼Œå¦‚ç®—æ³• 1 æ‰€ç¤ºã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221221233043499.png" alt="image-20221221233043499"></p><p>Melonå°†æ•´ä¸ªç®—å­å›¾ä½œä¸ºè¾“å…¥ï¼Œå¹¶å¯¹æ¯ä¸ªå¼ é‡è¿›è¡Œå¹³ç­‰çš„é‡æ–°è®¡ç®—ã€‚</p><p>åœ¨ç¡®å®šè¦ä¸¢å¼ƒå“ªäº›å¼ é‡è¿›è¡Œé‡æ–°è®¡ç®—æ—¶ï¼Œ&#x3D;&#x3D;Melonå¼•å…¥äº†åº¦é‡ä¸‰è§’å½¢æ¯ç§’(TPS) (Eq 1)æ¥ä¼°è®¡é‡æ–°è®¡ç®—æ¯ä¸ªå¼ é‡çš„å¥½å¤„ï¼Œå³å¤§å°æ›´å¤§ã€é‡Šæ”¾å¯¿å‘½æ›´é•¿&#x3D;&#x3D;ã€é‡æ–°è®¡ç®—æ—¶é—´æ›´çŸ­çš„å¼ é‡å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥ç¨åä¸¢å¼ƒå¹¶é‡æ–°è®¡ç®—ã€‚é‡Šæ”¾ç”Ÿå‘½æœŸå®šä¹‰ä¸ºä¸¢å¼ƒå’Œé‡æ–°è®¡ç®—ä¹‹é—´çš„ç”Ÿå‘½æœŸã€‚æ›´å¤§çš„å¤§å°å’Œæ›´é•¿çš„é‡Šæ”¾ç”Ÿå‘½å‘¨æœŸè¡¨æ˜ä¸¢å¼ƒå¼ é‡å¯ä»¥åœ¨å†…å­˜æ± ä¸­å¸¦æ¥æ›´å¤šå¯ç”¨ç©ºé—´ï¼Œå¦‚å›¾6æ‰€ç¤º</p><p>Melonçš„é‡è®¡ç®—æœºåˆ¶æ˜¯ä»¥é€’è¿›çš„æ–¹å¼è¿›è¡Œçš„ã€‚å®ƒé¦–å…ˆé€šè¿‡åŸå§‹çš„æ‰§è¡Œæµ(ç¬¬1è¡Œ)åˆå§‹åŒ–å†…å­˜æ± ï¼Œç„¶åæŒ‰ç…§åŸå§‹çš„æ‰§è¡Œæµ(ç¬¬12è¡Œ)é€ä¸ªæ¨¡æ‹Ÿæ‰§è¡Œæ“ä½œç¬¦ã€‚åœ¨æ¨¡æ‹Ÿæ‰§è¡ŒæœŸé—´ï¼Œæ¯ä¸ªå¼ é‡éƒ½è¢«åˆ†é…äº†å®ƒåœ¨æ± ä¸­çš„ç¡®åˆ‡ä½ç½®çš„åœ°å€ã€‚</p><p>&#x3D;&#x3D;å½“ä¸€ä¸ªå¼ é‡çš„å°¾éƒ¨è¶…è¿‡å†…å­˜é¢„ç®—æ—¶ï¼Œ&#x3D;&#x3D;é‡æ–°è®¡ç®—æœºåˆ¶è¢«è§¦å‘(ç¬¬6-10è¡Œ)ã€‚é‡è®¡ç®—æœºåˆ¶ä¸æ–­ä¸¢å¼ƒTPSå€¼æœ€å¤§çš„å¼ é‡ï¼Œå¹¶å¯¹å†…å­˜æ± è¿›è¡Œæ ¡å‡†ï¼Œç›´åˆ°æ± å¤§å°ä¸å¤§äºé¢„ç®—ã€‚ä¸‹ä¸€ä¸ªç®—å­çš„è¾“å…¥å¼ é‡è¢«è®¤ä¸ºæ²¡æœ‰è¢«ä¸¢å¼ƒ(ç¬¬7è¡Œ)ã€‚åœ¨ä¸¢å¼ƒè¿‡ç¨‹ä¸­ï¼Œæ± åœ¨å½“å‰æ­¥éª¤é‡Šæ”¾å¼ é‡(å¦‚å›¾6æ‰€ç¤ºï¼Œåˆ é™¤éƒ¨åˆ†çŸ©å½¢)ã€‚ä¸€æ—¦ä¸€ä¸ªå¼ é‡è¢«ä¸¢å¼ƒï¼ŒMelonæ ¡å‡†ä¹‹åäº§ç”Ÿçš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸä¸å®ƒæœ‰â€œå¹²æ‰°â€çš„å¼ é‡çš„å†…å­˜åœ°å€(ç¬¬8è¡Œ)</p><p>å½“ä¸€ä¸ªå¼ é‡çš„å°¾éƒ¨è¶…è¿‡å†…å­˜é¢„ç®—æ—¶ï¼Œé‡æ–°è®¡ç®—æœºåˆ¶è¢«è§¦å‘(ç¬¬6-10è¡Œ)ã€‚é‡è®¡ç®—æœºåˆ¶ä¸æ–­ä¸¢å¼ƒTPSå€¼æœ€å¤§çš„å¼ é‡ï¼Œå¹¶å¯¹å†…å­˜æ± è¿›è¡Œæ ¡å‡†ï¼Œç›´åˆ°æ± å¤§å°ä¸å¤§äºé¢„ç®—ã€‚ä¸‹ä¸€ä¸ªç®—å­çš„è¾“å…¥å¼ é‡è¢«è®¤ä¸ºæ²¡æœ‰è¢«ä¸¢å¼ƒ(ç¬¬7è¡Œ)ã€‚åœ¨ä¸¢å¼ƒè¿‡ç¨‹ä¸­ï¼Œæ± åœ¨å½“å‰æ­¥éª¤é‡Šæ”¾å¼ é‡(å¦‚å›¾6æ‰€ç¤ºï¼Œåˆ é™¤éƒ¨åˆ†çŸ©å½¢)ã€‚ä¸€æ—¦ä¸€ä¸ªå¼ é‡è¢«ä¸¢å¼ƒï¼ŒMelonæ ¡å‡†ä¹‹åäº§ç”Ÿçš„æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸä¸å®ƒæœ‰â€œå¹²æ‰°â€çš„å¼ é‡çš„å†…å­˜åœ°å€(ç¬¬8è¡Œ)ã€‚è¿™é‡Œçš„å¹²æ¶‰è¢«å®šä¹‰ä¸ºä¸¤ä¸ªå¼ é‡å¯¿å‘½çš„é‡å ã€‚å¦‚å›¾6æ‰€ç¤ºï¼Œæ­¤æ—¶å³ä¾§çš„å¼ é‡å°†â€œä¸‹æ²‰â€åˆ°è¾ƒä½çš„åœ°å€ã€‚è¿™æ ·çš„ä¸¢å¼ƒè¿‡ç¨‹åœ¨å†…å­˜å¼ é‡ä¸Šé‡å¤ï¼Œç›´åˆ°æ± çš„å¤§å°æ²¡æœ‰è¶…è¿‡å†…å­˜é¢„ç®—ã€‚</p><p>å½“å½“å‰è¿ç®—ç¬¦æ‰€éœ€è¦çš„å¼ é‡åœ¨å†…å­˜ä¸­æ²¡æœ‰å‡ºç°æ—¶ï¼Œç®—æ³•åˆ†é…å†…å­˜å¹¶ä¸å®ƒçš„æºå¼ é‡ä¸€èµ·é‡æ–°è®¡ç®—(ç¬¬13-19è¡Œ)ã€‚æºå¼ é‡è¢«é€’å½’æ”¶é›†ï¼Œç›´åˆ°è¾“å…¥å¼ é‡å‡ºç°åœ¨å†…å­˜ä¸­(ç¬¬14è¡Œ)ã€‚é€šè¿‡è¿™æ ·çš„æœºåˆ¶(ç¬¬7è¡Œå’Œç¬¬14è¡Œ)ï¼Œä¿è¯äº†æ“ä½œç¬¦ä¹‹é—´çš„è¾“å…¥ä¾èµ–ã€‚é‡æ–°è®¡ç®—å¼ é‡ä¼šå¯¼è‡´å¤§é‡çš„æ—¶é—´å¼€é”€ï¼Œå› ä¸ºå®ƒä¼šäº§ç”Ÿä¸€äº›åº”è¯¥æ·»åŠ åˆ°æ± ä¸­çš„å¼ é‡ã€‚å› æ­¤ï¼Œ<strong>Melonéœ€è¦æ‰©å±•å†…å­˜ä¸­å·²ç»å­˜åœ¨çš„å¼ é‡çš„ç”Ÿå‘½å‘¨æœŸ</strong>(å›¾6ä¸­çš„æ—¶é—´è½´)ã€‚é¦–å…ˆï¼Œæ± å°†ç”Ÿå‘½å‘¨æœŸä»å½“å‰æ­¥éª¤å»¶é•¿åˆ°è¿™äº›å¼ é‡çš„ç”Ÿå‘½å‘¨æœŸé•¿åº¦ï¼Œå¹¶ä¸”å½“å‰æ—¶é—´çš„æ‰€æœ‰â€œçŸ©å½¢â€å°†å‘å³ç§»åŠ¨ï¼Œè¡¨æ˜å®ƒä»¬å°†åœ¨ç¨åç”Ÿæˆã€‚ç„¶åå°†è¿™äº›å¼ é‡æ·»åŠ åˆ°æ± ä¸­ï¼Œæ± ä»¥åŒæ ·çš„æ–¹å¼æ ¡å‡†å¯¿å‘½ä¸å®ƒä»¬æœ‰å¹²æ‰°çš„å¼ é‡ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222161555781.png" alt="å›¾7:melonçš„å·¥ä½œæµç¨‹"></p><p>å›¾7æ¼”ç¤ºäº†Melonçš„é‡æ–°è®¡ç®—æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å‡è®¾æ‹“æ‰‘é¡ºåºä¸Šçš„æ“ä½œå›¾ä¸ºF1â†’F5, B5â†’B1 .Fè¡¨ç¤ºå‰å‘è®¡ç®—ï¼ŒBè¡¨ç¤ºè¿”å‘è®¡ç®—ã€‚å›¾ä¸­çš„é»‘è‰²ç®­å¤´è¡¨ç¤ºæ“ä½œç¬¦å›¾ä¸­çš„æ•°æ®æµã€‚æ´»åŒ–æ˜¯ç”±F1, F2å’ŒF4,F3å’ŒF5æ˜¯äº§ç”Ÿä¸´æ—¶å¼ é‡çš„ç®—å­ã€‚å‡è®¾å†…å­˜é¢„ç®—åœ¨ğ¹3ä¹‹åç”¨å®Œï¼Œå³ä½¿ğ¹3çš„è¾“å‡ºä¸æ˜¯æ¿€æ´»ï¼Œå…·æœ‰æœ€å¤§TPSçš„ğ¹2çš„è¾“å‡ºä¹Ÿä¼šè¢«ä¸¢å¼ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±åœ°å†…å­˜åˆ†é…æ— æ³•å·¥ä½œï¼Œå› ä¸ºåº”è¯¥ä¿ç•™F1å’Œá„‘á…­F2çš„è¾“å‡ºï¼Œç›´åˆ°å®ƒä»¬åœ¨å‘åä¼ é€’ä¸­æ²¡æœ‰ä½¿ç”¨ã€‚åœ¨åå‘ä¼ æ’­æœŸé—´ï¼Œğµ3ä½œä¸ºä¸­é—´ç®—å­æ¥æ”¯æŒ ğµ2 çš„è®¡ç®—ã€‚å³ä½¿åœ¨åå‘ä¼ é€’ä¸­ï¼Œå†…å­˜å ç”¨å¤§å°ä¹Ÿå¯èƒ½è¶…è¿‡é¢„ç®—ï¼Œç„¶åç®—æ³•é€‰æ‹©ä¸€ä¸ªå¼ é‡ä»¥ä¸å‰å‘ä¼ é€’ç›¸åŒçš„æ–¹å¼è¢«èµ¶å‡ºã€‚å½“å¼ é‡è¢«é©±é€æ—¶ï¼Œå°†æ›´æ–°æ¯ä¸ªå¼ é‡çš„TPSã€‚</p><h4 id="4-4-Memory-Budget-Adaptation"><a href="#4-4-Memory-Budget-Adaptation" class="headerlink" title="4.4 Memory Budget Adaptation"></a>4.4 Memory Budget Adaptation</h4><p>ç§»åŠ¨è®¾å¤‡é€šå¸¸æ”¯æŒå¤šåº”ç”¨ç¨‹åºæ‰§è¡Œç¯å¢ƒï¼Œå…¶ä¸­æ¯ä¸ªåº”ç”¨ç¨‹åº&#x2F;æœåŠ¡åˆ†é…çš„ç¡¬ä»¶èµ„æºå¯ä»¥é«˜åº¦åŠ¨æ€ã€‚è¿™ç§å†…å­˜é€‚åº”ä¿¡å·å¯èƒ½æ¥è‡ªæ“ä½œç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºæœ¬èº«ã€‚ä¸ºäº†é€‚åº”æ–°çš„å†…å­˜é¢„ç®—ï¼Œmelonéœ€è¦(i)å¿«é€Ÿå“åº”å˜åŒ–ï¼Œä¾‹å¦‚ï¼Œåœ¨éœ€è¦æ—¶é‡Šæ”¾å†…å­˜ï¼Œä»¥åŠ(ii)æœ€å°åŒ–åˆ‡æ¢æ‰§è¡Œè®¡åˆ’çš„å¼€é”€ã€‚</p><p>å¯¹äºæ‰©å¤§å†…å­˜é¢„ç®—çš„æƒ…å†µï¼ŒMelonç®€å•åœ°é‡‡ç”¨äº†æƒ°æ€§åˆ‡æ¢ç­–ç•¥ï¼Œå³ç­‰å¾…å½“å‰æ‰¹å¤„ç†çš„è®­ç»ƒç»“æŸï¼Œç„¶ååˆ‡æ¢åˆ°æ–°çš„æ‰§è¡Œè®¡åˆ’ã€‚ç„¶è€Œï¼Œåœ¨å†…å­˜é¢„ç®—ç¼©æ°´çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æ‡’æƒ°çš„ç­–ç•¥æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºå†…å­˜éœ€è¦ç«‹å³é‡Šæ”¾ç»™åº”ç”¨ç¨‹åºæˆ–æ“ä½œç³»ç»Ÿã€‚å¦ä¸€ç§ç›´è§‚çš„æ–¹æ³•æ˜¯åœæ­¢-é‡æ–°å¯åŠ¨ï¼Œè¿™æ„å‘³ç€æ•´ä¸ªå†…å­˜æ± å°†è¢«é‡æ–°åˆ†é…ï¼Œå½“å‰æ‰¹å¤„ç†çš„æ‰€æœ‰ä¸­é—´ç»“æœå°†è¢«ä¸¢å¼ƒã€‚è™½ç„¶å®ƒå¯ä»¥ç«‹å³é‡Šæ”¾å†…å­˜ï¼Œä½†é‡æ–°æ‰§è¡Œæ“ä½œç¬¦ä¹Ÿä¼šå¯¼è‡´éå¸¸é«˜çš„å¼€é”€ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§åŠ¨æ€å†…å­˜è°ƒæ•´æœºåˆ¶ï¼Œå¯ä»¥å¿«é€Ÿå“åº”å†…å­˜é¢„ç®—çš„å˜åŒ–ï¼Œå¹¶æ ¹æ®ä¿ç•™çš„(éƒ¨åˆ†)ç»“æœæ¢å¤æ‰§è¡Œã€‚ä¸€æ—¦æœ‰äº†æ–°çš„é¢„ç®—ï¼ŒMeloné¦–å…ˆç¼©å°æ± å¤§å°ä»¥æ»¡è¶³å†…å­˜é¢„ç®—ã€‚Melonä»å½“å‰å†…å­˜æ± å¼€å§‹ä¿å­˜æ–°å†…å­˜é¢„ç®—çš„å¤§å°ï¼Œå¹¶é€šè¿‡reallocå‡½æ•°è½¬å‚¨å‰©ä½™çš„å†…å­˜é¢„ç®—ã€‚ç„¶åå®ƒåŠ è½½æ–°çš„æ‰§è¡Œè®¡åˆ’å¹¶è·³è½¬åˆ°å½“å‰æ“ä½œç¬¦çš„æ‰§è¡Œç‚¹ã€‚</p><p>ä¸‹ä¸€ä¸ªå…³é”®æ­¥éª¤æ˜¯æ¢å¤æ–°è®¡åˆ’çš„å†…å­˜å¸ƒå±€ã€‚æˆ‘ä»¬ä½¿ç”¨ Aã€B å’Œ C åˆ†åˆ«è¡¨ç¤ºæ—§æ‰§è¡Œè®¡åˆ’çš„å†…å­˜å¼ é‡é›†ã€æ–°æ‰§è¡Œè®¡åˆ’ä¸­åº”è¯¥åœ¨å†…å­˜ä¸­å‘ˆç°çš„å¼ é‡é›†å’Œä¸¢å¼ƒçš„å¼ é‡é›†ã€‚Melon ä»…åœ¨å†…å­˜ä¸­çš„ (ğ´ âˆ’ğ¶) âˆ©ğµ ä¸­ä¿ç•™å¼ é‡å¹¶è½¬å‚¨å…¶ä»–å¼ é‡ã€‚è¯·æ³¨æ„ï¼Œè½¬å‚¨æ“ä½œåœ¨ç‰©ç†ä¸Šä¸éœ€è¦ä»»ä½•å†…å­˜æ“ä½œï¼Œä½†åªæ ‡è®°ç›¸åº”çš„å†…å­˜å—freeã€‚ç„¶åï¼ŒMelon å°†æ—§æ‰§è¡Œè®¡åˆ’çš„å‰©ä½™å¼ é‡çš„å†…å­˜åœ°å€è°ƒæ•´ä¸ºæ–°å¼ é‡ã€‚æœ€åï¼ŒMelon æ ¹æ®æ¨¡å‹çš„æ‰§è¡Œé¡ºåºé‡æ–°è®¡ç®— ğ¶ âˆ’ (ğ´ âˆ’ ğµ) ä¸­çš„å¼ é‡ã€‚é€šè¿‡å‰é¢çš„æ­¥éª¤ï¼ŒMelonå¯ä»¥æˆåŠŸåœ°æ¢å¤å†…å­˜å¸ƒå±€ï¼Œå¹¶ä½¿ç”¨æ–°çš„æ‰§è¡Œè®¡åˆ’æ¢å¤è®­ç»ƒï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹é‡æ–°æ‰§è¡Œä¹‹å‰çš„æ“ä½œç¬¦ã€‚</p><h3 id="5-IMPLEMENTATION"><a href="#5-IMPLEMENTATION" class="headerlink" title="5 IMPLEMENTATION"></a>5 IMPLEMENTATION</h3><p>æˆ‘ä»¬å·²ç»åœ¨MNN (v1.1.0)[26]ä¸Šå®Œå…¨å®ç°äº†Melonçš„åŸå‹ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼ŒMNNã€TFLite[5]å’ŒDL4J[3]æ˜¯å”¯ä¸€ä¸‰ä¸ªæ”¯æŒåœ¨Androidè®¾å¤‡ä¸Šè®­ç»ƒç°ä»£dnnçš„åº“ã€‚æˆ‘ä»¬ä½¿ç”¨MNNæ˜¯å› ä¸ºå®ƒåœ¨é€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨æ–¹é¢ä¼˜äºå…¶ä»–ä¸¤ç§ï¼Œæ­£å¦‚æˆ‘ä»¬çš„æµ‹é‡(è¡¨2)å’Œä¹‹å‰çš„å·¥ä½œ[10]æ‰€ç¤ºã€‚æ³¨æ„ï¼ŒMelonçš„è®¾è®¡è¶³å¤Ÿé€šç”¨ï¼Œä¹Ÿå¯ä»¥é›†æˆåˆ°å…¶ä»–åº“ä¸­ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222164639140.png" alt="è¡¨2:ä½¿ç”¨MNNæ›´ä¼˜"></p><p>æˆ‘ä»¬çš„åŸå‹ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ¨¡å—(c++ä¸­æ€»å…±6.4k LoC):1)ç¦»çº¿åˆ†æå’Œåœ¨çº¿å†…å­˜ä¼˜åŒ–æ‰§è¡Œçš„æ‰§è¡Œå¼•æ“;(2)æ‰§è¡Œè®¡åˆ’ç”Ÿæˆå™¨ç”Ÿæˆä¸åŒå†…å­˜é¢„ç®—ä¸‹çš„æœ€ä¼˜æ‰§è¡Œè®¡åˆ’ã€‚è¯·æ³¨æ„ï¼Œå®ƒä»¬éƒ½ä»¥è‡ªåŠ¨çš„æ–¹å¼åœ¨è®¾å¤‡ä¸Šè¿è¡Œï¼Œä¸éœ€è¦å¼€å‘äººå‘˜ä»˜å‡ºé¢å¤–çš„åŠªåŠ›ã€‚</p><p>è™½ç„¶MNNåœ¨æ¦‚å¿µä¸Šä¸Androidå’ŒiOSè®¾å¤‡å…¼å®¹ï¼Œä½†æˆ‘ä»¬çš„åŸå‹ç›®å‰é’ˆå¯¹çš„æ˜¯Androidè®¾å¤‡ï¼Œå› ä¸ºæœ‰è®¸å¤šç‰¹å®šäºæ“ä½œç³»ç»Ÿçš„å†…å­˜æ“ä½œã€‚ç›®å‰åŸå‹ä¸»è¦æ”¯æŒç§»åŠ¨CPUä¸Šçš„è®­ç»ƒï¼Œå› ä¸ºmnnå¯¹gpuä¸Šè®­ç»ƒç›¸å…³ç®—å­çš„æ”¯æŒéå¸¸æœ‰é™ï¼Œå³ä½¿æ”¯æŒçš„æ¨¡å‹ä¸CPU[10]ç›¸æ¯”æ€§èƒ½ä¹Ÿå¾ˆå·®ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMelonçš„è®¾è®¡ä¸»è¦ä¸ç§»åŠ¨GPUå…¼å®¹ï¼Œä½†éœ€è¦è§£å†³ä¸€äº›ç‹¬ç‰¹çš„æŒ‘æˆ˜ï¼Œä¾‹å¦‚å†…å­˜é€‚é…è¿‡ç¨‹ä¸­çš„å†…å­˜å¤åˆ¶å¼€é”€ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼ŒMNN æ˜¯ç›®å‰å”¯ä¸€æ”¯æŒç§»åŠ¨ GPU çš„è®¾å¤‡ä¸Šè®­ç»ƒåº“ï¼Œä½œä¸ºè¿™é¡¹å·¥ä½œçš„å‘å¸ƒã€‚Â§6.7 ä¸­çš„è¯„ä¼°å°†è¯æ˜Melon çš„å…¼å®¹æ€§å’Œé€šç”¨æ€§ã€‚</p><h5 id="Baselines"><a href="#Baselines" class="headerlink" title="Baselines"></a>Baselines</h5><p>æˆ‘ä»¬è¿˜ä»ä»¥å¾€çš„æ–‡çŒ®ä¸­å¸å–æ•™è®­ï¼Œå®æ–½äº†å››ä¸ªåŸºçº¿ã€‚è¯·æ³¨æ„ï¼Œéƒ¨åˆ†å‰æœŸå·¥ä½œçš„æºä»£ç æ— æ³•è·å–ï¼Œæˆ‘ä»¬å°½é‡æ ¹æ®ç›¸åº”çš„è®ºæ–‡è¿›è¡Œå¤ç°ã€‚ä¸ºäº†å…¬å¹³æ¯”è¾ƒï¼Œæˆ‘ä»¬åœ¨MNNä¸Šé‡æ–°å®ç°äº†å®ƒä»¬ã€‚</p><ul><li>ç†æƒ³ï¼šæˆ‘ä»¬å‡è®¾è®¾å¤‡é…å¤‡äº†æ— é™å†…å­˜å®¹é‡çš„ç†æƒ³æƒ…å†µï¼Œé€šè¿‡ç›´æ¥é‡ç”¨è®¾å¤‡å†…å­˜æ¥å®ç°ï¼ˆä»è€Œå½±å“è®¡ç®—æ­£ç¡®æ€§ï¼‰ã€‚è¿™ä¸ªbaselineæä¾›äº†Melonæˆ–å…¶ä»–åŸºçº¿å¯ä»¥è¾¾åˆ°çš„ä¸¥æ ¼çš„æ€§èƒ½ä¸Šé™ã€‚</li><li>vDNN[52]: åŸºäºäº¤æ¢çš„è¿è¡Œæ—¶å†…å­˜ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ç°dnnå†…å­˜ä½¿ç”¨è™šæ‹ŸåŒ–ã€‚è¿™é‡Œæˆ‘ä»¬åœ¨å†…å­˜å’Œç£ç›˜(è®¾å¤‡ä¸Šçš„å†…éƒ¨å­˜å‚¨)ä¹‹é—´äº¤æ¢æ•°æ®ã€‚</li><li>Sublinear: ä¸€ç§åˆ†å±‚é‡è®¡ç®—ç®—æ³•ï¼Œå½“å½“å‰å†…å­˜ä½¿ç”¨è¶…è¿‡ç”±å¯å‘å¼ç¡®å®šçš„é˜ˆå€¼æ—¶ï¼Œæ¸…é™¤ä¸€ä¸ªå¼ é‡</li><li>Capuchin[46]ï¼šä¸€ç§æœ‰æ•ˆçš„åŸºäºå¼ é‡çš„ä¼˜åŒ–ç®—æ³•ï¼Œç»“åˆäº†äº¤æ¢å’Œé‡æ–°è®¡ç®—ã€‚</li></ul><h3 id="6-EVALUATION"><a href="#6-EVALUATION" class="headerlink" title="6 EVALUATION"></a>6 EVALUATION</h3><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»å„ä¸ªæ–¹é¢è¯„ä¼°Melonå’ŒåŸºçº¿ï¼Œä»¥æ¼”ç¤ºMelonçš„æ•ˆç‡ã€‚</p><h4 id="6-1-Experiment-Settings"><a href="#6-1-Experiment-Settings" class="headerlink" title="6.1 Experiment Settings"></a>6.1 Experiment Settings</h4><h5 id="Models-and-datasets"><a href="#Models-and-datasets" class="headerlink" title="Models and datasets"></a>Models and datasets</h5><p>æˆ‘ä»¬ä½¿ç”¨è¡¨3ä¸­åˆ—å‡ºçš„4ç§å…¸å‹çš„CNNæ¨¡å‹å¯¹Melonè¿›è¡Œè¯„ä¼°ï¼Œè¿™äº›æ¨¡å‹å¹¿æ³›åº”ç”¨äºç§»åŠ¨è®¾å¤‡ï¼ŒåŒ…æ‹¬MobileNetV1 [22]ï¼Œ MobileNetV2 [53]ï¼Œ SqueezeNet[25]å’ŒResNet-50[19]ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222165635792.png" alt="image-20221222165635792"></p><p>å¯¹äºæ¯ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬å®ç°äº†ä¸¤ä¸ªç‰ˆæœ¬:å¸¦BNå±‚å’Œä¸å¸¦BNå±‚(åœ¨æ¯ä¸ªå·ç§¯å±‚ä¹‹åæ·»åŠ )ã€‚æˆ‘ä»¬æ²¡æœ‰åŒ…æ‹¬è¯­è¨€æ¨¡å‹ï¼Œå› ä¸ºMNNç¼ºä¹è¿™æ ·çš„æ”¯æŒã€‚æˆ‘ä»¬ä½¿ç”¨CIFAR-100æ•°æ®é›†ï¼Œè¾“å…¥å¤§å°è°ƒæ•´ä¸º224Ã—224Ã—3[25,53]ã€‚</p><h5 id="Hardware-setup"><a href="#Hardware-setup" class="headerlink" title="Hardware setup"></a>Hardware setup</h5><p>æˆ‘ä»¬åœ¨4ä¸ªä¸åŒsocå’Œå†…å­˜å®¹é‡çš„Androidè®¾å¤‡ä¸Šè¿›è¡Œå®éªŒ(è¡¨3)ã€‚æˆ‘ä»¬ä¸€ç›´åœ¨å¤§æ ¸ä¸Šè¿è¡ŒMelonç­‰åŸºçº¿ï¼Œä»¥è¾¾åˆ°å…¬å¹³çš„æ¯”è¾ƒã€‚</p><h5 id="Metrics"><a href="#Metrics" class="headerlink" title="Metrics"></a>Metrics</h5><p>æˆ‘ä»¬åœ¨è®­ç»ƒæœŸé—´æµ‹é‡å†…å­˜ä½¿ç”¨ã€èƒ½é‡æ¶ˆè€—å’Œååé‡ã€‚procrank ç›‘æ§çš„å†…å­˜ä½¿ç”¨ã€‚èƒ½é‡æ¶ˆè€—æ˜¯é€šè¿‡ Android çš„ vFS (&#x2F;sys&#x2F;class&#x2F;power_supply) è®¡ç®—çš„ã€‚è®­ç»ƒååé‡å®šä¹‰ä¸ºæ¯ç§’è®­ç»ƒçš„æ•°æ®æ ·æœ¬çš„æ•°é‡ã€‚</p><h4 id="6-2-Overall-Performance"><a href="#6-2-Overall-Performance" class="headerlink" title="6.2 Overall Performance"></a>6.2 Overall Performance</h4><p>æˆ‘ä»¬é¦–å…ˆä»3ä¸ªä¸»è¦æ–¹é¢è¡¡é‡Melonçš„æ•´ä½“æ€§èƒ½ï¼Œå³è¾¾åˆ°ç›¸åŒååé‡æ—¶æ”¯æŒçš„æœ€å¤§æ‰¹å¤§å°ï¼Œè®­ç»ƒæ”¶æ•›æ€§èƒ½ï¼Œä»¥åŠæ›´å¤§æ‰¹çš„è®­ç»ƒååé‡ã€‚</p><h5 id="Maximal-batch-size-supported"><a href="#Maximal-batch-size-supported" class="headerlink" title="Maximal batch size supported"></a>Maximal batch size supported</h5><p>æˆ‘ä»¬é¦–å…ˆæµ‹é‡ä¸åŒååé‡æ‰€èƒ½è¾¾åˆ°çš„æœ€å¤§æ‰¹å¤§å°ã€‚æˆ‘ä»¬åœ¨ä¸‰æ˜ŸNote 10ä¸Šä½¿ç”¨MobileNetV2å’ŒSqueezeNet(éƒ½å¸¦æœ‰BNå±‚)è¿›è¡Œå®éªŒã€‚ç»“æœå¦‚å›¾8æ‰€ç¤ºã€‚ç»“æœè¡¨æ˜ï¼ŒMelonçš„å†…å­˜ä¼˜åŒ–åœ¨ä¸åŒçš„ååé‡ä¸‹éƒ½èƒ½å¾ˆå¥½åœ°æ‰©å±•ï¼Œå¹¶ä¸”æ€»æ˜¯æ˜¾è‘—ä¼˜äºå…¶ä»–æ–¹æ³•ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222170146596.png" alt="image-20221222170146596"></p><p>ä¾‹å¦‚ï¼Œå½“ååé‡ä¸º2.39fpsæ—¶ï¼ŒMelonå¯ä»¥è®­ç»ƒæ‰¹é‡å¤§å°ä¸º208çš„MobileNetV2ï¼Œè€Œå…¶ä»–åŸºçº¿çš„æ‰¹é‡å¤§å°éƒ½å°äº96ã€‚</p><h5 id="End-to-end-convergence-performance"><a href="#End-to-end-convergence-performance" class="headerlink" title="End-to-end convergence performance"></a>End-to-end convergence performance</h5><p>æˆ‘ä»¬è¿˜è¯„ä¼°äº†melonåœ¨é›†ä¸­å¼å’Œè”é‚¦è®¾ç½®ä¸‹ç«¯åˆ°ç«¯å­¦ä¹ ä»»åŠ¡ä¸­çš„è¡¨ç°ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®é›†æ˜¯CIFAR-100ã€‚å¯¹äºè”é‚¦è®¾ç½®ï¼Œæˆ‘ä»¬ç”¨10ä¸ªè®¾å¤‡åˆå§‹åŒ–è®­ç»ƒè¿‡ç¨‹ï¼Œæ‰€æœ‰è®¾å¤‡ä¸Šçš„æ•°æ®åˆ†å¸ƒæ˜¯éiid[29]ã€‚æ¯ä¸ªè®¾å¤‡ä¸Šçš„æ•°æ®åªè¦†ç›–ç±»çš„ä¸€ä¸ªå­é›†ã€‚ç”±äºå®éªŒæ˜¯ä¸ºäº†è¯´æ˜Melonåœ¨äº¤æ˜“æ‰¹é‡å¤§å°å’Œè®­ç»ƒé€Ÿåº¦ä¸Šçš„æœ‰æ•ˆæ€§ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è”é‚¦å­¦ä¹ ä¸­ä¸è€ƒè™‘è®¾å¤‡å¼‚è´¨æ€§[72]ï¼Œåªè€ƒè™‘ä¸‰æ˜ŸNote10ä¸Šçš„è®­ç»ƒé€Ÿåº¦ã€‚å¯¹äºè”é‚¦å’Œé›†ä¸­å¼åœºæ™¯ï¼Œå…¶ä»–è®¾ç½®éƒ½æ˜¯ç›¸åŒçš„ã€‚</p><p>å¦‚å›¾9æ‰€ç¤ºï¼Œé€šè¿‡æ”¯æŒæ›´å¤§çš„æ‰¹å¤§å°ï¼ŒMelonè·å¾—äº†æ¯”åŸå§‹MNNæ›´é«˜çš„æ”¶æ•›ç²¾åº¦ï¼Œåœ¨è”é‚¦è®¾ç½®ä¸‹ï¼ŒMobileNet-V2å’ŒSqueezeNetåˆ†åˆ«ä¸º3.94%å’Œ3.20%ã€‚åœ¨é›†ä¸­è®¾ç½®ä¸‹ï¼ŒMelonçš„æ”¶æ•›ç²¾åº¦åˆ†åˆ«æé«˜äº†1.98%å’Œ2.04%ã€‚å¦ä¸€æ–¹é¢ï¼ŒMelonæ˜¾è‘—å‡å°‘äº†è®­ç»ƒæ—¶é—´ï¼Œè¾¾åˆ°ç›¸åŒçš„ç²¾åº¦ã€‚ä¾‹å¦‚ï¼Œä¸åŸå§‹MNNç›¸æ¯”ï¼ŒMobileNetV2å’ŒSqueeze-Netçš„æ”¶æ•›ç²¾åº¦åˆ†åˆ«å‡å°‘2.80Ã—å’Œ3.48Ã—çš„æ—¶é—´(58.22%å’Œ59.18%)ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222170958494.png" alt="å›¾9:melonæ”¯æŒæ›´å¤§æ‰¹é‡è®­ç»ƒ"></p><h5 id="Throughput-with-the-same-batch-size"><a href="#Throughput-with-the-same-batch-size" class="headerlink" title="Throughput with the same batch size"></a>Throughput with the same batch size</h5><p>ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡æ”¹å˜ä¸åŒçš„(æ”¾å¤§çš„)æ‰¹å¤§å°æ¥å…¨é¢ç ”ç©¶Melonçš„è®­ç»ƒæ€§èƒ½ï¼Œè¿™äº›æ‰¹å¤§å°åœ¨ä¸ä½¿ç”¨å†…å­˜èŠ‚çœæŠ€æœ¯çš„æƒ…å†µä¸‹æ— æ³•è®­ç»ƒã€‚</p><p>å®éªŒåœ¨4ä¸ªè®¾å¤‡ä¸Šè¿›è¡Œï¼Œ2ä¸ªæ˜¯æœ‰BNå±‚çš„æ¨¡å‹ï¼Œ2ä¸ªæ˜¯æ²¡æœ‰BNå±‚çš„æ¨¡å‹ã€‚å¯¹äºæ¯ä¸ªç»„åˆï¼Œæˆ‘ä»¬é€‰æ‹©2-3ä¸ªæ‰¹å¤§å°ï¼Œä¾‹å¦‚ï¼Œå¦‚æœåŸå§‹æœ€å¤§æ‰¹å¤§å°æ˜¯32ï¼Œæˆ‘ä»¬ä½¿ç”¨64ã€96å’Œ128ä½œä¸ºæµ‹è¯•æ‰¹å¤§å°ã€‚ç»“æœåˆ†åˆ«æ˜¾ç¤ºåœ¨å›¾11å’Œå›¾12ä¸­</p><p>æˆ‘ä»¬çš„ä¸»è¦è§‚å¯Ÿç»“æœæ˜¯ï¼ŒMelonçš„æ€§èƒ½å§‹ç»ˆæ˜¾è‘—ä¼˜äºå…¶ä»–å¤‡é€‰ä¼˜åŒ–åŸºçº¿ï¼Œä¸IdealåŸºçº¿ç›¸æ¯”ï¼Œå®ƒçš„æ€§èƒ½é€šå¸¸ä¸IdealåŸºçº¿ç›¸ä¼¼ã€‚ä¾‹å¦‚ï¼Œåœ¨BNå±‚æ¨¡å‹ä¸Š(å›¾11)ï¼ŒMelonçš„ååé‡æ¯”vDNNé«˜1.51Ã— - 3.49Ã—higherï¼Œæ¯”sublinearé«˜1.13Ã— - 3.86ï¼Œæ¯”Capuchiné«˜1.01Ã— - 4.01ã€‚Melonå®éªŒè¡¨æ˜ï¼Œå…¶ä¼˜åŠ¿åœ¨è¾ƒå¤§çš„batch sizeä¸Šæ›´åŠ æ˜æ˜¾ï¼Œä¾‹å¦‚åœ¨64å’Œ128 batch sizeçš„çº¢ç±³Note9 Proä¸Šè®­ç»ƒMobileNetV2æ—¶ï¼Œåˆ†åˆ«æ¯”Capuchinæé«˜äº†3.25Ã—å’Œ3.34Ã—ã€‚ç„¶è€Œï¼ŒMelonå’ŒIdealåŸºçº¿ä¹‹é—´çš„æ€§èƒ½å·®è·æ€»æ˜¯éšç€æ›´å¤§çš„æ‰¹å¤„ç†è§„æ¨¡è€Œå¢åŠ (ä¾‹å¦‚ï¼Œåœ¨çº¢ç±³Note9 Proä¸Šè®­ç»ƒMobileNetV2æ—¶ï¼Œä»10.67%å¢åŠ åˆ°21.21%)ï¼Œå› ä¸ºMelonéœ€è¦æ›´ç§¯æåœ°ä¸¢å¼ƒå’Œé‡æ–°è®¡ç®—å¼•èµ·è®¡ç®—å¼€é”€çš„å¼ é‡ã€‚åœ¨åŸºçº¿ä¸­ï¼ŒvDNNåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹è¡¨ç°æœ€å·®ï¼Œå› ä¸ºåœ¨Â§3ä¸­æåˆ°çš„ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ•°æ®äº¤æ¢é€Ÿåº¦æœ‰é™ã€‚æ³¨æ„Capuchinçš„æ”¹è¿›å‡ ä¹å¾—ç›Šäºé‡æ–°è®¡ç®—ï¼Œå› ä¸ºäº¤æ¢å¼•å…¥äº†ä¸¥é‡çš„åŒæ­¥å¼€é”€ã€‚å®ƒè¿˜å¿½ç•¥äº†å†…å­˜æ± çš„å½±å“ï¼Œè¿™æ„å‘³ç€å®ƒå°†æµªè´¹æ›´å¤šçš„ç©ºé—´ï¼Œé‡æ–°è®¡ç®—æ›´å¤šçš„å¼ é‡æ¥æ”¯æŒæ›´å¤§çš„æ‰¹å¤„ç†å¤§å°ï¼Œå¯¼è‡´ååé‡æŸå¤±ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222171615052.png" alt="image-20221222171615052"></p><p>å¯¹äºæ²¡æœ‰BNå±‚çš„æ¨¡å‹(å›¾12)ï¼ŒMelonåœ¨ä»»æ„æ‰¹é‡å¤§å°ä¸‹å‡ ä¹å¯ä»¥èµ¶ä¸ŠIdealåŸºçº¿çš„æ€§èƒ½(æŸå¤±ä»…å°äº1%)ã€‚ä¸å…¶ä»–ä¼˜åŒ–åŸºå‡†ç›¸æ¯”ï¼Œæ€§èƒ½æå‡ä¹Ÿéå¸¸æ˜¾è‘—ï¼Œé­…æ—16tå¹³å‡æå‡1.77Ã—(æœ€é«˜2.66Ã—)ï¼Œçº¢ç±³Note8å¹³å‡æå‡1.57Ã—(æœ€é«˜2.15Ã—)ã€‚è¿™æ˜¯å› ä¸ºï¼Œå¯¹äºæ²¡æœ‰BNå±‚çš„æ¨¡å‹ï¼ŒMelonåˆ©ç”¨äº†å¾®æ‰¹å¤„ç†æŠ€æœ¯ï¼Œå¦‚Â§3æ‰€è¿°ï¼Œæ€§èƒ½ä¸‹é™å¾ˆå°ã€‚æ³¨æ„ï¼Œå½“æ‰¹å¤§å°ç›¸å¯¹è¾ƒå°æ—¶ï¼Œå…¶ä»–åŸºçº¿ä¹Ÿå¯ä»¥å®ç°ç›¸å¯¹è¾ƒé«˜çš„æ€§èƒ½ã€‚è¿™æ˜¯å› ä¸ºå»æ‰äº†æ‰€æœ‰çš„BNå±‚ï¼ŒBNå±‚çš„æ•°é‡æ¥è¿‘å·ç§¯å±‚ã€‚å°†æœ‰æ›´å°‘çš„æ¿€æ´»å’Œæ›´å°‘çš„è®¡ç®—ï¼Œå¯¼è‡´é«˜æ€§èƒ½çš„åŸºçº¿ã€‚ç„¶è€Œï¼Œä¸Melonä¸åŒçš„æ˜¯ï¼Œè¿™äº›åŸºçº¿çš„æ€§èƒ½éšç€å¤§æ‰¹å¤„ç†è€Œè¡°å‡ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222172934586.png" alt="image-20221222172934586"></p><h4 id="6-3-Memory-Budget-Adaptation"><a href="#6-3-Memory-Budget-Adaptation" class="headerlink" title="6.3 Memory Budget Adaptation"></a>6.3 Memory Budget Adaptation</h4><p>ç„¶åï¼Œæˆ‘ä»¬è¯„ä¼°äº†Â§4.4ä¸­æ‰€ä»‹ç»çš„melonçš„å†…å­˜é¢„ç®—é€‚åº”è®¾è®¡ã€‚æˆ‘ä»¬å…³æ³¨å†…å­˜é¢„ç®—å‡å°‘çš„æƒ…å†µï¼Œå› ä¸ºå®ƒåœ¨å®è·µä¸­æ›´å…·æŒ‘æˆ˜æ€§ã€‚å®éªŒä½¿ç”¨ä¸‰æ˜ŸNote 10ä¸Šçš„2ä¸ªå‹å·(MobileNetV2å’ŒSqueezeNet)ã€‚æˆ‘ä»¬é€‰æ‹©äº†2ä¸ªä¸åŒçš„é€‚åº”åœºæ™¯:æ‰¹å¤§å°ä¸º128æ—¶ä»6GBåˆ‡æ¢åˆ°5GBï¼Œæ‰¹å¤§å°ä¸º64æ—¶ä»4GBåˆ‡æ¢åˆ°3GBã€‚æ³¨æ„ï¼Œåœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä¸è¿›è¡Œå†…å­˜ä¼˜åŒ–ï¼Œå†…å­˜é¢„ç®—éƒ½ä¸è¶³ä»¥è®­ç»ƒæ‰¹å¤„ç†å¤§å°ã€‚æˆ‘ä»¬è¿˜é€‰æ‹©äº†3ä¸ªè‡ªé€‚åº”ç‚¹ï¼Œå³å½“æ‰§è¡Œè¿›åº¦è¾¾åˆ°25%ï¼Œ50% å’Œ 75%ã€‚æœ¬å®éªŒæ¯”è¾ƒçš„åŸºçº¿æ˜¯åœæ­¢é‡å¯ï¼Œå¦‚ç¬¬ 4.4 èŠ‚æ‰€è¿°ã€‚</p><p>ç»“æœå¦‚å›¾ 10 æ‰€ç¤ºã€‚é€‚åº”å¼€é”€æ˜¯æ–°è®¡åˆ’åœ¨é€‚åº”å‘ç”Ÿæ—¶è¾¾åˆ°ä¸æ—§è®¡åˆ’ç›¸åŒçš„è¿ç®—ç¬¦çš„æ—¶é—´æˆæœ¬ï¼Œå½’ä¸€åŒ–ä¸ºåœ¨é€‚åº”æ—¶ç®€å•åœ°ä¸¢å¼ƒæ‰€æœ‰å¼ é‡çš„åœæ­¢é‡å¯æ–¹æ³•ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒMoon äº§ç”Ÿçš„é€‚åº”å¼€é”€è¦å°‘å¾—å¤šï¼Œå³ 4.27%-54.50%ã€‚Meon çš„å¼€é”€åœ¨åéªŒæ‰§è¡Œç‚¹å¢åŠ ï¼Œä¸»è¦æ˜¯å› ä¸ºè¦é‡æ–°è®¡ç®—çš„å¼ é‡æ•°ä»¥æ¢å¤æ–°æ‰§è¡Œè®¡åˆ’çš„å†…å­˜å¸ƒå±€ä¼šå¢åŠ ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222173253220.png" alt="image-20221222173253220"></p><p>ä¸ºäº†è¿›ä¸€æ­¥äº†è§£è‡ªé€‚åº”æ€§èƒ½ï¼Œæˆ‘ä»¬è¿˜å°†å¼€é”€åˆ†è§£ä¸ºä¸¤å¤§ç±»ï¼šå†…å­˜ä¸­çš„å¼ é‡é‡æ–°æ’åˆ—å’Œæ ¹æ®æ–°çš„æ‰§è¡Œè®¡åˆ’é‡æ–°è®¡ç®—ä¸¢å¤±çš„å¼ é‡ã€‚å›¾10æ˜¾ç¤ºï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé‡æ–°è®¡ç®—å¼€é”€å æ€»è°ƒæ•´å¼€é”€çš„ä¸»å¯¼åœ°ä½ï¼Œå°¤å…¶æ˜¯åœ¨åæ‰§è¡Œç‚¹ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå†…å­˜ç§»åŠ¨é€Ÿåº¦æ¯”è®¡ç®—é€Ÿåº¦å¿«å¾—å¤šã€‚</p><h4 id="6-4-Energy-Consumption"><a href="#6-4-Energy-Consumption" class="headerlink" title="6.4 Energy Consumption"></a>6.4 Energy Consumption</h4><p>ç”±äºç§»åŠ¨è®¾å¤‡çš„ç”µæ± å®¹é‡æœ‰é™ï¼Œèƒ½è€—æ˜¯å¦ä¸€ä¸ªéœ€è¦ä¼˜åŒ–çš„å…³é”®æŒ‡æ ‡ã€‚å°½ç®¡Melonä¸»è¦é’ˆå¯¹é«˜è®­ç»ƒååé‡è€Œä¸æ˜¯é™ä½èƒ½è€—è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä½†æˆ‘ä»¬ä»ç„¶åœ¨è¿™æ–¹é¢ä¸å…¶ä»–åŸºçº¿ä¸€èµ·å¯¹å…¶è¿›è¡Œäº†è¯„ä¼°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨é­…æ—16tè®¾å¤‡ä¸Šæµ‹è¯•äº†ä¸¤ç§å‹å·ï¼ˆMobileNetV2å’Œå¸¦æœ‰BNå±‚çš„SqueezeNetï¼‰ã€‚ç»“æœå¦‚å›¾13æ‰€ç¤ºï¼Œæ•°å­—æ ‡å‡†åŒ–ä¸ºIdealbaselineã€‚</p><p>è¿™è¡¨æ˜ Mlon æ˜¾ç€é™ä½äº†ä¸åŸºçº¿ç›¸æ¯”çš„èƒ½é‡æ¶ˆè€—ï¼Œå³ 22.00%-49.43%ã€‚ä¸äº¤æ˜“åŸºçº¿ç›¸æ¯”ï¼ŒMoon çš„èƒ½é‡æ¶ˆè€—å¹³å‡ä»…ä¸º 11.4%ï¼Œè€Œæœ€ä½³æƒ…å†µä¸‹ä»…ä½ 2.1%ã€‚Moon çš„æ”¹è¿›ä¸»è¦æ¥è‡ªè®­ç»ƒæ—¶é—´çš„å‡å°‘ã€‚ä¸è®­ç»ƒååé‡ç›¸æ¯”ï¼ŒvDNN çš„æ€§èƒ½å¾—åˆ°äº†æ˜¾ç€æé«˜ï¼Œå› ä¸ºè¯»å–&#x2F;å†™å…¥æ“ä½œçš„èƒ½é‡æ¯”è®¡ç®—å°‘ï¼ˆçº¦ 2.5 å€çš„å·®è·ï¼‰ã€‚ç„¶è€Œï¼Œç”±äºè®­ç»ƒæ—¶é—´å˜é•¿ï¼Œå®ƒä»ç„¶æ¶ˆè€—æ¯” Melon æ›´å¤šçš„èƒ½é‡ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222173543993.png" alt="image-20221222173543993"></p><h4 id="6-5-Ablation-Study"><a href="#6-5-Ablation-Study" class="headerlink" title="6.5 Ablation Study"></a>6.5 Ablation Study</h4><p>æˆ‘ä»¬è¿›ä¸€æ­¥å¯¹æ¯ç§æŠ€æœ¯å¸¦æ¥çš„å¥½å¤„è¿›è¡Œäº†ç»†åˆ†åˆ†æï¼Œå³åˆ†åˆ«å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å†…å­˜æ± æˆ–å†…å­˜æ ¡å‡†çš„æ¸è¿›å¼é‡æ–°è®¡ç®—ã€‚æˆ‘ä»¬è¯„ä¼°äº†æ¯ç§æ–¹æ³•å¯ä»¥é€šè¿‡ä¸åŒååé‡å®ç°çš„æœ€å¤§æ‰¹é‡å¤§å°ã€‚æˆ‘ä»¬åœ¨ä¸‰æ˜Ÿ Note10 ä¸Šä½¿ç”¨ Copy2 å’Œ SqueezeNet è¿›è¡Œå®éªŒã€‚ç»“æœå¦‚å›¾ 14 æ‰€ç¤ºã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222173619623.png" alt="image-20221222173619623"></p><p>æˆ‘ä»¬è§‚å¯Ÿåˆ°è¿™ä¸¤ç§æŠ€æœ¯å¯¹æ”¹è¿›éƒ½æœ‰ä¸å°çš„è´¡çŒ®ã€‚ä¾‹å¦‚ï¼Œå½“MobileNetV2çš„ååé‡ä¸º3.07fpsæ—¶ï¼Œæˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥å†…å­˜æ± å’Œé‡æ–°è®¡ç®—æŠ€æœ¯å¯ä»¥è¾¾åˆ°çš„æœ€å¤§æ‰¹å¤„ç†å¤§å°åˆ†åˆ«ä¸º40å’Œ80ã€‚ç»“åˆå®ƒä»¬ï¼Œæ‰¹å¤§å°å¯ä»¥å¢åŠ åˆ°112ï¼Œè¿™å‡ ä¹æ˜¯çº¿æ€§æˆæ¯”ä¾‹çš„ã€‚ç”±äºå†…å­˜è®¿é—®æ¨¡å¼å¯¹äºä¸€ä¸ªæ¨¡å‹å’Œä¸€ä¸ªæ‰¹å¤„ç†å¤§å°ä¿æŒç›¸åŒï¼Œå› æ­¤æ± å¸¦æ¥çš„æ”¹è¿›åœ¨ä¸åŒçš„ååé‡ä¸Šä¿æŒç›¸åŒã€‚æˆ‘ä»¬è¿˜å‘ç°ï¼Œå¯¹äºååé‡è¾ƒä½çš„ä¸¤ä¸ªæ¨¡å‹ï¼ŒMelonå¸¦æ¥çš„æ”¹è¿›å¤§äºpoolå’Œrecomputationå¸¦æ¥çš„æ”¹è¿›ä¹‹å’Œã€‚åŸå› æ˜¯éšç€æ‰¹å¤§å°çš„å¢åŠ ï¼Œç”Ÿå‘½å‘¨æœŸé•¿çš„å¼ é‡è¶Šæ¥è¶Šå°‘ï¼Œè¿™å¯ä»¥å¼•å…¥æ›´å¤šçš„æœºä¼šæ¥æ‰§è¡Œç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥åˆ†é…ï¼Œå¦‚å›¾6æ‰€ç¤ºã€‚</p><h4 id="6-6-Complexity-Analysis"><a href="#6-6-Complexity-Analysis" class="headerlink" title="6.6 Complexity Analysis"></a>6.6 Complexity Analysis</h4><p>æˆ‘ä»¬è¡¡é‡ç®—æ³•çš„æˆæœ¬ï¼Œå³ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ã€‚é¦–å…ˆï¼Œåˆ†æçš„æ—¶é—´ç­‰äºè®­ç»ƒä¸€æ‰¹çš„æ—¶é—´ï¼Œä¸å›¾9æ‰€ç¤ºçš„æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ç›¸æ¯”ï¼Œè¿™å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚æ³¨æ„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬é‡å äº†æ‰€æœ‰å¼ é‡ï¼Œå³æ‰€æœ‰å¼ é‡å…±äº«åŒä¸€å—å†…å­˜ï¼Œå› ä¸ºç»Ÿè®¡å€¼å¯¹åˆ†ææ²¡æœ‰å½±å“ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸‰æ˜ŸNote10å¯¹æ‰¹å¤§å°ä¸º32çš„MobileNetV2è¿›è¡Œåˆ†æè®­ç»ƒï¼Œè€—æ—¶çº¦10.3sï¼Œè€—æ—¶çº¦147MBã€‚è®°å½•æ¯ä¸ªæ“ä½œå‘˜å»¶è¿Ÿçš„é¢å¤–æ—¶é—´ä¹Ÿå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚</p><p>Melonçº¿ä¸‹æ—¶é—´çš„ä¸»è¦æ¥æºæ˜¯æ‰§è¡Œè®¡åˆ’çš„ç”Ÿæˆã€‚æˆ‘ä»¬ä»¥åœ¨ä¸‰æ˜ŸNote10ä¸Šè®­ç»ƒSqueezeNetä¸ºä¾‹ï¼Œæµ‹é‡äº†è¿™ä¸ªå¼€é”€æ¥åˆ†æç®—æ³•çš„å¤æ‚æ€§ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ‰¹å¤§å°ä»64åˆ°172ï¼Œæ­¥éª¤ä¸º16ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œç”Ÿæˆä¸€ä¸ªè®¡åˆ’å¹³å‡éœ€è¦10.9sã€‚ç”±äºç”Ÿæˆçš„è®¡åˆ’å¯ä»¥æ°¸ä¹…å­˜å‚¨ï¼Œæ‰€ä»¥è¿™ç§å»¶è¿Ÿåªä¼šå¼•èµ·ä¸€æ¬¡å°„å‡»ï¼Œå› æ­¤åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬çš„ç®—æ³•çš„æˆæœ¬ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„</p><h4 id="6-7-GPU-support"><a href="#6-7-GPU-support" class="headerlink" title="6.7 GPU support"></a>6.7 GPU support</h4><p>æˆ‘ä»¬è¿›è¡Œäº†ä¸€ä¸ªå®éªŒæ¥æ¢ç´¢Melonåœ¨ç§»åŠ¨GPUä¸Šçš„æ€§èƒ½ã€‚æˆ‘ä»¬æµ‹é‡æ”¯æŒçš„æœ€å¤§æ‰¹å¤§å°ã€‚è®¾ç½®ä¸Â§6.2ç›¸åŒã€‚ç»“æœå¦‚å›¾15æ‰€ç¤ºã€‚è¿™è¡¨æ˜Melonåœ¨ä¸åŒçš„ååé‡ä¸‹ä¹Ÿå¯ä»¥è¾¾åˆ°æœ€å¤§çš„æ‰¹é‡å¤§å°ã€‚ä½†æ˜¯ï¼Œç»“æœä¸å¦‚åœ¨CPUä¸Šé‚£ä¹ˆä»¤äººå°è±¡æ·±åˆ»ï¼Œå› ä¸ºMelonä¸»è¦é’ˆå¯¹CPUè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221222174919246.png" alt="image-20221222174919246"></p>]]></content>
    
    
    <categories>
      
      <category>è®ºæ–‡ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MobiSys22</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>picgo å›¾åºŠæ­å»º</title>
    <link href="/2022/12/20/picgo-%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/"/>
    <url>/2022/12/20/picgo-%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="typora-picgoé…ç½®-é˜¿é‡Œäº‘-OSS"><a href="#typora-picgoé…ç½®-é˜¿é‡Œäº‘-OSS" class="headerlink" title="typora picgoé…ç½®(é˜¿é‡Œäº‘ OSS)"></a>typora picgoé…ç½®(é˜¿é‡Œäº‘ OSS)</h2><p>[toc]</p><h4 id="1-typora-é…ç½®"><a href="#1-typora-é…ç½®" class="headerlink" title="1. typora é…ç½®"></a>1. typora é…ç½®</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/8b1ad795b6b116b1857b66a567f64918.png" alt="image-20221220154039516"></p><h4 id="2-picgo-é…ç½®"><a href="#2-picgo-é…ç½®" class="headerlink" title="2. picgo é…ç½®"></a>2. picgo é…ç½®</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/c7561d3e3e2fd571d5233fc9b2a4b350.png" alt="image-20221220154130710"></p><p>KeyID å’Œ KeySecretç‚¹å‡»å¤´åƒå¤„çš„AccessKeyç®¡ç†è·å–</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/1f601a1d16044099f0563199717293a9.png" alt="image-20221220154222795"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/fc48b3425cc7707894c8762cefa2b3df.png" alt="image-20221220154629831"></p><p>è¿›å…¥ä½ çš„bucketï¼Œç‚¹å‡»æ¦‚è§ˆ</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/f62383f1c0f05dde8b9ed204a45b4e60.png" alt="image-20221220154749368"></p><p>è®¾ç½®å®Œæˆåç‚¹å‡»ç¡®è®¤ã€‚</p><h4 id="3-éªŒè¯"><a href="#3-éªŒè¯" class="headerlink" title="3. éªŒè¯"></a>3. éªŒè¯</h4><p>é‡å¯typoraï¼Œé…ç½®è‡ªåŠ¨ä¸Šä¼ ï¼Œç‚¹å‡» éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/0ae026b137da7e4a2106d76a09e0f853.png" alt="image-20221220155001090"></p><p>ç»“æœï¼šä¸Šä¼ æˆåŠŸã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/e0e3c3aed2a0ab2e83577b174924809e.png" alt="image-20221220155120565"></p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯åšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>picgo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vsomeip å¿«é€Ÿå…¥é—¨</title>
    <link href="/2022/12/20/vsomeip-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
    <url>/2022/12/20/vsomeip-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="vsomeip-å¿«é€Ÿå…¥é—¨"><a href="#vsomeip-å¿«é€Ÿå…¥é—¨" class="headerlink" title="vsomeip å¿«é€Ÿå…¥é—¨"></a>vsomeip å¿«é€Ÿå…¥é—¨</h2><h4 id="1-ä¸‹è½½ä»“åº“"><a href="#1-ä¸‹è½½ä»“åº“" class="headerlink" title="1. ä¸‹è½½ä»“åº“"></a>1. ä¸‹è½½ä»“åº“</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/COVESA/</span>vsomeip.git<br></code></pre></td></tr></table></figure><h4 id="2-ç¼–è¯‘"><a href="#2-ç¼–è¯‘" class="headerlink" title="2. ç¼–è¯‘"></a>2. ç¼–è¯‘</h4><h5 id="2-1-å®‰è£…ç›¸å…³ä¾èµ–"><a href="#2-1-å®‰è£…ç›¸å…³ä¾èµ–" class="headerlink" title="2.1 å®‰è£…ç›¸å…³ä¾èµ–"></a>2.1 å®‰è£…ç›¸å…³ä¾èµ–</h5><p>æˆ‘çš„ubuntu ç‰ˆæœ¬æ˜¯20.04ï¼Œæ‰€ä»¥ä»¥ubuntu 20.04ä¸ºä¾‹ã€‚</p><p>vsomeipä¾èµ– Boostï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆå®‰è£… Boost(ç‰ˆæœ¬åœ¨1.55-1.74ä¹‹é—´)ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šå¯¹åº”çš„booståŒ…ç‰ˆæœ¬è¿‡ä½ã€‚</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">sudo apt-<span class="hljs-built_in">get</span> install gcc g++ <span class="hljs-keyword">make</span><br>sudo apt install cmake<br>sudo apt-<span class="hljs-built_in">get</span> install libboost-<span class="hljs-built_in">system</span>-dev libboost-thread-dev libboost-<span class="hljs-built_in">log</span>-dev<br>sudo apt-<span class="hljs-built_in">get</span> install asciidoc <span class="hljs-keyword">source</span>-<span class="hljs-keyword">highlight</span> doxygen graphviz<br></code></pre></td></tr></table></figure><h5 id="2-2-ç¼–è¯‘vsomeip"><a href="#2-2-ç¼–è¯‘vsomeip" class="headerlink" title="2.2 ç¼–è¯‘vsomeip"></a>2.2 ç¼–è¯‘vsomeip</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> vsomeip<br><span class="hljs-built_in">mkdir</span> build<br><span class="hljs-keyword">cd</span> build<br>cmake ..<br><span class="hljs-keyword">make</span><br>sudo <span class="hljs-keyword">make</span> install<br></code></pre></td></tr></table></figure><p>è¿è¡Œä¸Šè¿°å‘½ä»¤è¿›è¡Œç¼–è¯‘vsomeipåº“ï¼Œå…¶ä¸­è¿è¡Œmakeä¹‹åçš„ç¼–è¯‘å¾ˆæ…¢ï¼Œå¤§çº¦éœ€è¦å››äº”åˆ†é’Ÿï¼Œè€å¿ƒç­‰å¾…å°±å¥½ã€‚</p><h5 id="2-3-ç¼–è¯‘hello-world-example"><a href="#2-3-ç¼–è¯‘hello-world-example" class="headerlink" title="2.3 ç¼–è¯‘hello_world example"></a>2.3 ç¼–è¯‘hello_world example</h5><p>clone ä¸‹è½½çš„vsomeipä¸­è‡ªå¸¦ä¸€ä¸ªdemo hello_worldï¼Œæˆ‘ä»¬å…ˆç¼–è¯‘å¯¹åº”çš„helloworldç¨‹åº</p><p>Helloworldç¨‹åºçš„ç¼–è¯‘æ–¹æ³•ä¹Ÿå¯ä»¥æŸ¥çœ‹è‡ªå¸¦çš„readme vsomeip&#x2F;examples&#x2F;hello_world&#x2F;readme</p><p>å›åˆ°buildç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">cmake <span class="hljs-params">--build</span> . <span class="hljs-params">--target</span> hello_world<br><span class="hljs-keyword">cd</span> <span class="hljs-string">./examples/hello_world/</span><br>make<br>sudo make install <br>sudo ldconfig<br></code></pre></td></tr></table></figure><p>è¿è¡Œåç¼–è¯‘å°±å®Œæˆã€‚</p><h4 id="3-è¿è¡Œ"><a href="#3-è¿è¡Œ" class="headerlink" title="3. è¿è¡Œ"></a>3. è¿è¡Œ</h4><p>ç¼–è¯‘å®Œæˆä¹‹åï¼Œä¼šåœ¨å¯¹åº”çš„ç¼–è¯‘ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”helloworldçš„äºŒè¿›åˆ¶ç¨‹åºï¼šhello_world_clientå’Œhello_world_service</p><p>æ­¤æ—¶ä¸èƒ½å®‰è£…readmeé‡Œé¢å†™çš„æ‰§è¡Œ</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Running Hello World Example<br>---------------------------<br><br>The Hello World Example should be <span class="hljs-built_in">run</span> on the same host.<br>The<span class="hljs-built_in"> network </span>addresses within the configuration files need <span class="hljs-keyword">to</span> be adapted <span class="hljs-keyword">to</span> match<br>the devices addresses.<br><br><span class="hljs-keyword">To</span> start the hello world<span class="hljs-built_in"> client </span><span class="hljs-keyword">and</span><span class="hljs-built_in"> service </span><span class="hljs-keyword">from</span> their build-directory <span class="hljs-keyword">do</span>:<br><br>HOST1:<br><span class="hljs-attribute">VSOMEIP_CONFIGURATION</span>=../helloworld-local.json \<br><span class="hljs-attribute">VSOMEIP_APPLICATION_NAME</span>=hello_world_service \<br>./hello_world_service<br><br>HOST1:<br><span class="hljs-attribute">VSOMEIP_CONFIGURATION</span>=../helloworld-local.json \<br><span class="hljs-attribute">VSOMEIP_APPLICATION_NAME</span>=hello_world_client \<br>./hello_world_client<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ â€¦&#x2F; ç›®å½•ä¸‹å¹¶ä¸èƒ½æ‰¾åˆ° helloworld-local.jsonè¿™ä¸ªæ–‡ä»¶ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† vsomeip&#x2F;examples&#x2F;hello_world&#x2F;helloworld-local.json æ–‡ä»¶å¤åˆ¶åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ç”Ÿæˆçš„ç›®å½•ä¸‹æ‰èƒ½æ‰§è¡Œã€‚</p><p>å¤åˆ¶åï¼Œvsomeip&#x2F;buuld&#x2F;examples&#x2F;hello_worldçš„ç›®å½•ç»“æ„ä¸º</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/09af136ba396ba4f6a66d9df4eac231a.png" alt="hello_worldç›®å½•ç»“æ„å›¾"></p><p>ä¸‹é¢è¿è¡Œ</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">HOST1è¿è¡Œservice:<br>env <span class="hljs-attribute">VSOMEIP_CONFIGURATION</span>=./helloworld-local.json \<br><span class="hljs-attribute">VSOMEIP_APPLICATION_NAME</span>=hello_world_service \<br>./hello_world_service<br><br>HOST1è¿è¡Œclientï¼š<br>env <span class="hljs-attribute">VSOMEIP_CONFIGURATION</span>=./helloworld-local.json \<br><span class="hljs-attribute">VSOMEIP_APPLICATION_NAME</span>=hello_world_client \<br>./hello_world_client<br></code></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/ca74a1ab17f48773acf382349fec05bf.png" alt="serviceç«¯è¿è¡Œç»“æœ"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/e05dcd7914bd016575fbdbf09053f1b9.png" alt="cilentç«¯è¿è¡Œç»“æœ"></p><p>æ­¤æ—¶ï¼Œä¸€ä¸ªç®€å•çš„vsomeip cilentç«¯å’Œserviceç«¯çš„é€šä¿¡å°±æ­å»ºå®Œæˆäº†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯åšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è”šæ¥å®ä¹ </tag>
      
      <tag>vsomeip</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo åšå®¢æ–°å»ºæ–‡ç« </title>
    <link href="/2022/12/20/hexo-%E5%8D%9A%E5%AE%A2%E6%96%B0%E5%BB%BA%E6%96%87%E7%AB%A0/"/>
    <url>/2022/12/20/hexo-%E5%8D%9A%E5%AE%A2%E6%96%B0%E5%BB%BA%E6%96%87%E7%AB%A0/</url>
    
    <content type="html"><![CDATA[<h2 id="hexo-åšå®¢æ–°å»ºæ–‡ç« "><a href="#hexo-åšå®¢æ–°å»ºæ–‡ç« " class="headerlink" title="hexo åšå®¢æ–°å»ºæ–‡ç« "></a>hexo åšå®¢æ–°å»ºæ–‡ç« </h2><h4 id="åˆ›å»ºæ–‡ç« "><a href="#åˆ›å»ºæ–‡ç« " class="headerlink" title="åˆ›å»ºæ–‡ç« "></a>åˆ›å»ºæ–‡ç« </h4><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gauss">hexo <span class="hljs-keyword">new</span> [layout] &lt;<span class="hljs-built_in">title</span>&gt;<br><span class="hljs-meta"># layout é»˜è®¤ä¸ºpost</span><br></code></pre></td></tr></table></figure><h4 id="Front-matter-è®¾ç½®"><a href="#Front-matter-è®¾ç½®" class="headerlink" title="Front-matter è®¾ç½®"></a>Front-matter è®¾ç½®</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/20200916181236318.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">title:</span> <span class="hljs-string">å¦‚ä½•åœ¨hexoä¸Šåˆ›å»ºä¸€ç¯‡æ–‡ç« </span><br><span class="hljs-attr">date:</span> <span class="hljs-number">2020-09-16 19:33:46</span><br><span class="hljs-attr">categories:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">åšå®¢</span><br><span class="hljs-attr">tags:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">åˆ›å»ºæ–‡ç« </span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><h4 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo g</span><br><span class="hljs-attribute">hexo d</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æŠ€æœ¯åšå®¢</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mobisys22 CoDL ç¬”è®°</title>
    <link href="/2022/11/27/Mobisys22-CoDL-%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/11/27/Mobisys22-CoDL-%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="Mobisys22-CoDL-ç¬”è®°"><a href="#Mobisys22-CoDL-ç¬”è®°" class="headerlink" title="Mobisys22-CoDL ç¬”è®°"></a>Mobisys22-CoDL ç¬”è®°</h2><p>è®ºæ–‡æ ‡é¢˜ï¼šâ€œCoDL: Efficient CPU-GPU Co-execution for Deep Learning Inference on Mobile Devicesâ€</p><p>ä¸»è®²äººï¼šPeter Wan ä¸‡ æ™”</p><p>ä¸»è®²æ—¶é—´ï¼š2022-11-22 19ï¼š00</p><p>PPTåœ°å€ï¼š<a href="https://liumengyang.xyz/ReadingGroup/slides/CoDL.pdf">https://liumengyang.xyz/ReadingGroup/slides/CoDL.pdf</a></p><h3 id="ABSTRACT"><a href="#ABSTRACT" class="headerlink" title="ABSTRACT"></a>ABSTRACT</h3><p>â€‹å¼‚æ„å¤„ç†å™¨ä¸Šçš„å¹¶å‘æ¨ç†æ‰§è¡Œå¯¹äºæé«˜æ—¥ç›Šç¹é‡çš„æ·±åº¦å­¦ä¹  (DL) æ¨¡å‹çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚ä½†æ˜¯ç›®å‰çš„æ¨ç†æ¡†æ¶åªèƒ½ä¸€æ¬¡ä½¿ç”¨ä¸€ä¸ªå¤„ç†å™¨ã€‚è¿™ä¸»è¦æ˜¯å› ä¸ºæœ‰ä¸¤å¤§æŒ‘æˆ˜ã€‚</p><ol><li>éœ€è¦å‡å°æ•°æ®å¼€é”€</li><li>éœ€è¦åœ¨å¤„ç†å™¨ä¹‹é—´å¾ˆå¥½åœ°åˆ’åˆ†æ¯ä¸€ä¸ªç®—å­</li></ol><p>â€‹æœ¬æ–‡æå‡ºäº†CoDLï¼Œä¸€ç§ç”¨äºç§»åŠ¨è®¾å¤‡ä¸ŠCPUä¸GPUå¹¶å‘çš„æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶ã€‚å®ƒå¯ä»¥å……åˆ†åˆ©ç”¨å¼‚æ„å¤„ç†å™¨å¯¹æ¨¡å‹çš„æ¯ä¸ªç®—å­è¿›è¡ŒåŠ é€Ÿã€‚å®ƒé›†æˆäº†ä¸¤ç§æ–°æŠ€æœ¯</p><ol><li><em>hybrid-type-friendly data sharing</em>ï¼šå…è®¸æ¯ä¸ªå¤„ç†å™¨ä½¿ç”¨å…¶æœ‰æ•ˆçš„æ•°æ®ç±»å‹è¿›è¡Œæ¨ç†ã€‚ä¸ºäº†å‡å°å¼€é”€ï¼Œæˆ‘ä»¬è¿˜æå‡ºäº†ï¼ˆhybrid-dimension partitioningï¼‰æ··åˆç»´åº¦åˆ†åŒºå’Œï¼ˆoperator chainï¼‰ç®—å­é“¾æ–¹æ³•ã€‚</li><li><em>non-linearity- and concurrency-aware latency prediction</em>ï¼šé€šè¿‡ä¸ºä¸åŒçš„å¤„ç†å™¨æ„å»ºä¸€ä¸ªéå¸¸è½»é‡è€Œä¸”å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨æ¥æŒ‡å¯¼åˆé€‚çš„ç®—å­åˆ†åŒºã€‚</li></ol><p>â€‹åœ¨ä¸åŒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ä¸Šå¯¹CoDLè¿›è¡Œè¯„ä¼°ï¼Œæœ€ç»ˆè·å¾—4.93$\times$çš„é€Ÿåº¦æé«˜ï¼Œå’Œ62.3%çš„æ€§èƒ½èŠ‚çº¦ã€‚</p><h3 id="1-INTRODUCTION"><a href="#1-INTRODUCTION" class="headerlink" title="1 INTRODUCTION"></a>1 INTRODUCTION</h3><p>èƒŒæ™¯ï¼šæ·±åº¦å­¦ä¹  (DL) ç°åœ¨æ˜¯å„ç§ç§»åŠ¨åº”ç”¨ç¨‹åºçš„æ”¯æŸ±ã€‚ç”±äºåœ¨éšç§ä¿æŠ¤ã€äº’è”ç½‘å¼¹æ€§å’Œä½äº‘æ“ä½œå¼€é”€æ–¹é¢çš„ä¼˜åŠ¿ï¼Œä¸äº‘ç«¯ï¼ˆon-cloudï¼‰æ¨ç†ç›¸æ¯”ï¼Œè®¾å¤‡æ¨ç†(on-device)æ­£åœ¨è·å¾—åŠ¨åŠ›ã€‚ç„¶è€Œï¼Œç›®å‰çš„è®¾å¤‡ç«¯æ¨ç†åªèƒ½å¯¹ä¸€äº›ç®€å•æ¨¡å‹å®ç°å¯æ¥å—çš„å“åº”èƒ½åŠ›ï¼Œè€Œå¯¹äºå…¶ä»–æ¨¡å‹åˆ™ä¸è¡Œã€‚ä¾‹å¦‚ï¼Œç”¨äºå¯¹è±¡æ£€æµ‹çš„ YOLO éœ€è¦è¶…è¿‡ 200 æ¯«ç§’æ‰èƒ½åœ¨ä¸»è¦çš„ç§»åŠ¨å¤„ç†å™¨ï¼ˆå³ç§»åŠ¨ CPU æˆ– GPUï¼‰ä¸Šè¿è¡Œã€‚ä¸ºäº†æé«˜å“åº”èƒ½åŠ›ï¼Œä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•æ˜¯åœ¨ç§»åŠ¨è®¾å¤‡ä¸ŠåŒæ—¶åˆ©ç”¨å¼‚æ„å¤„ç†å™¨æ˜¯å¦ä¼šæœ‰æ•ˆã€‚</p><p>â€‹æ‰‹æœºSOCçš„ç‰¹å®šè®¾è®¡æä¾›äº†è¿™ç§å¯èƒ½ï¼ŒåŸå› æœ‰ä¸¤ä¸ª</p><ol><li>ç›¸å½“çš„CPUä¸GPUæ€§èƒ½ã€‚ä¸PCç«¯ç›¸å·®å‡ ä¸ªæ•°é‡çº§ä¸åŒï¼Œç§»åŠ¨ç«¯çš„CPUä¸GPUåœ¨æ·±åº¦å­¦ä¹ æ¨ç†æ–¹é¢å…·æœ‰ç›¸ä¼¼çš„æ€§èƒ½ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥å¹¶æ’ä½¿ç”¨ã€‚</li><li>ç»Ÿä¸€çš„å†…å­˜ã€‚ä¸åŒäºæœåŠ¡å™¨æœºå™¨é€šå¸¸æœ‰å•ç‹¬çš„CPUå’ŒGPUå†…å­˜ï¼Œç§»åŠ¨CPUå’ŒGPUä½¿ç”¨ç»Ÿä¸€çš„å†…å­˜ã€‚å®ƒå¯ä»¥é¿å…ä¸åŒå†…å­˜ä¹‹é—´çš„æ•°æ®å¤åˆ¶ã€‚</li></ol><p>â€‹ä½†æ˜¯ï¼Œç›®å‰çš„æ¨ç†æ¡†æ¶åªèƒ½ç”¨ä¸€æ¬¡ä½¿ç”¨ä¸€ä¸ªå¤„ç†å™¨ï¼Œå¹¶ä¸”å­˜åœ¨å¹¶å‘æ‰§è¡Œçš„ä¸¤å¤§æŒ‘æˆ˜</p><ol><li><p><em>how to reduce data sharing overhead</em>ï¼šå¦‚ä½•å‡å°‘æ•°æ®å…±äº«å¼€é”€ã€‚å°½ç®¡ä½¿ç”¨ç»Ÿä¸€å†…å­˜ï¼Œä½†ä»ç„¶éœ€è¦ç›¸å½“å¤§çš„å¼€é”€æ¥ç¡®ä¿å…±äº«æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼Œè¦åœ¨ CPU å’Œ GPU ä¸ŠåŒæ—¶è¿è¡Œæ¨¡å‹çš„ç®—å­ï¼Œæœ€åä¸€ä¸ªç®—å­çš„è¾“å‡ºéœ€è¦åœ¨ä¸¤ä¸ªå¤„ç†å™¨ä¹‹é—´å…±äº«ã€‚</p><p>å¦‚æœä¸åŒçš„å¤„ç†å™¨ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™ä¼šå¯¼è‡´å¤„ç†å™¨åŒæ­¥ã€æ•°æ®æ˜ å°„ä»¥åŠæ½œåœ¨çš„æ•°æ®è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰é€‚å½“çš„ç­–ç•¥ï¼Œæ•°æ®å…±äº«å¼€é”€å¾ˆå®¹æ˜“è¶…è¿‡å¹¶å‘å¸¦æ¥çš„æ”¶ç›Šã€‚</p></li><li><p><em>how to fairly partition each operator of a model between processors</em>ï¼šå¦‚ä½•åœ¨å¤„ç†å™¨ä¹‹é—´å…¬å¹³åˆ’åˆ†æ¨¡å‹çš„æ¯ä¸ªç®—å­ã€‚ä¸åŒåˆ†åŒºcandidatesçš„online measurementsæ˜¯ä¸å¯è¡Œçš„ã€‚</p><p>éœ€è¦ä¸€ä¸ªè½»é‡çº§å’Œå‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œéœ€è¦äº†è§£å¼•å…¥å¹¶å‘åå¸¦æ¥çš„æ‰€æœ‰å¯èƒ½å¼€é”€ã€‚</p></li></ol><p>â€‹ç°åœ¨çš„ç ”ç©¶å·¥ä½œè¿˜ä¸èƒ½å¾ˆå¥½åœ°è§£å†³ä¸Šè¿°æŒ‘æˆ˜ã€‚Î¼layerå’ŒOPTICå¯ä»¥è®©CPUå’ŒGPUåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¹¶è¡Œä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå¯¹äºæŒ‘æˆ˜1ï¼Œå®ƒä»¬ä½¿ç”¨äº†ç›¸åŒçš„æ•°æ®ç±»å‹ï¼ˆå³buffer typeï¼‰æ¥ç®€åŒ–æ•°æ®å…±äº«ã€‚è¿™ç§è®¾è®¡æ˜¯çš„CPU+GPUçš„ååŒæ‰§è¡Œç”šè‡³æ¯”GPUå•ç‹¬æ‰§è¡Œæ›´æ…¢ï¼Œå› ä¸ºGPUä½¿ç”¨äº†ä½æ•ˆçš„æ•°æ®ç±»å‹ã€‚å¯¹äºæŒ‘æˆ˜2ï¼Œä¸ºäº†è¿›è¡Œç®—å­åˆ†åŒºï¼Œå®ƒä»¬é€šè¿‡å¯¹è®¡ç®—é‡ï¼ˆFLOPsï¼‰è¿›è¡Œçº¿æ€§å›å½’æ¥å¯¹ç®—å­çš„æ—¶å»¶è¿›è¡Œå»ºæ¨¡ã€‚å°½ç®¡è¿™ä¸ªæ¨¡å‹æ˜¯è½»é‡çº§çš„ï¼Œä½†é¢„æµ‹ç²¾åº¦å¾ˆå·®ï¼ˆ&lt;10%ï¼‰ã€‚åŸå› æ˜¯åŸºäº FLOPs çš„é¢„æµ‹å™¨æ— æ³•æ•è·çœŸå®çš„å»¶è¿Ÿè¡Œä¸ºã€‚è¿˜æœ‰ä¸€äº›å»¶è¿Ÿé¢„æµ‹å™¨ï¼Œå®ƒä»¬ä½¿ç”¨å¤æ‚çš„é»‘ç›’æœºå™¨å­¦ä¹ æ¨¡å‹æ¥æ•è·å»¶è¿Ÿè¡Œä¸ºå¹¶å®ç°è¾ƒé«˜çš„å‡†ç¡®åº¦ã€‚ç„¶è€Œï¼Œè¿™äº›æ¨¡å‹çš„è¿è¡Œå¼€é”€å¾ˆå¤§ã€‚ä¾‹å¦‚ï¼Œnn-Meterå¯¹äºä¸€ä¸ªå·ç§¯ç®—å­çš„æ¨¡å‹å¤§å°è¶…è¿‡800MBï¼Œå¤ªåºå¤§è€Œæ— æ³•åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œä»¥è¿›è¡Œå®æ—¶é¢„æµ‹ã€‚æ­¤å¤–ï¼Œè¿™äº›é¢„æµ‹å™¨éƒ½æ²¡æœ‰è€ƒè™‘ä¸å¹¶å‘ç›¸å…³çš„å¼€é”€ã€‚</p><p>â€‹ä¸ºäº†è§£å†³è¿™ä¸¤ç§æŒ‘æˆ˜ï¼Œæœ¬æ–‡æå‡ºäº†CoDLã€‚CoDLçš„è®¾è®¡æºäºä¸¤ä¸ªå…³é”®å‘ç°ã€‚</p><ol><li>ä¸åŒçš„å¤„ç†å™¨åå¥½ä¸åŒçš„æ•°æ®ç±»å‹ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°å¯¹äºå·ç§¯è€Œè¨€ï¼Œä¸ç¼“å†²åŒºç±»å‹ï¼ˆbuffer typeï¼‰ç›¸æ¯”ï¼Œåœ¨ Adreno GPU ä¸Šä½¿ç”¨å›¾åƒç±»å‹ï¼ˆimage typeï¼‰å¯ä»¥å®ç° 3.5 å€çš„åŠ é€Ÿã€‚æ‰€ä»¥éœ€è¦å¯¹æ¯ä¸ªå¤„ç†å™¨ä½¿ç”¨é«˜æ•ˆç±»å‹è¿›è¡ŒååŒæ‰§è¡Œã€‚</li><li>ä¸ºäº†ä½¿å»¶è¿Ÿé¢„æµ‹å™¨æ—¢å‡†ç¡®åˆè½»é‡çº§ï¼Œå¿…é¡»å°†å¹³å°ç‰¹å¾ï¼ˆplatform featuresï¼‰æ•´åˆåˆ°æ¨¡å‹ä¸­ï¼Œè€Œä¸æ˜¯çº¯ç²¹çš„é»‘ç›’å­¦ä¹ ã€‚</li></ol><p>â€‹åŸºäºè¿™ä¸¤ä¸ªå…³é”®å‘ç°ï¼ŒCoDLæå‡ºäº†ä¸¤ç§æŠ€æœ¯ã€‚</p><ol><li><p><em>Hybrid-type-friendly data sharing</em>ï¼šå®ƒå…è®¸å¼‚æ„å¤„ç†å™¨ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹è¿›è¡Œæ¨ç†ã€‚ç„¶åï¼Œä¸ºäº†å‡å°‘æ•°æ®å…±äº«å¼€é”€ï¼Œæˆ‘ä»¬æå‡ºäº†æ··åˆç»´åº¦åˆ†åŒºï¼ˆhybrid-dimension partitioningï¼‰å’Œç®—å­é“¾ï¼ˆoperator chainï¼‰æ–¹æ³•ã€‚</p><p>æ··åˆç»´åº¦åˆ†åŒºå¯ä»¥ä¸ºæ¯ä¸ªç®—å­shapeé€‰æ‹©æœ€ä½³çš„åˆ†åŒºç»´åº¦ï¼Œä»¥å®ç°æ•°æ®å…±äº«å¼€é”€å’Œå¤„ç†å™¨åˆ©ç”¨ç‡ä¹‹é—´çš„æƒè¡¡ã€‚</p><p>ç®—å­é“¾ç¡®ä¿é“¾ä¸Šçš„ç®—å­åªéœ€è¦æœ¬åœ°æ•°æ®æ¥æ‰§è¡Œï¼Œè€Œä¸æ˜¯æ¥è‡ªå…¶ä»–å¤„ç†å™¨çš„å…±äº«æ•°æ®ï¼Œä»¥é¿å…æ•°æ®å…±äº«å¼€é”€ã€‚</p></li><li><p>*Non-linearity-and concurrency-aware latency prediction.*ï¼šCoDLå¯ä»¥é€šè¿‡æ„å»ºè½»é‡çº§ä½†å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨æ¥å…¬å¹³å¹¶onlineåœ°åˆ’åˆ†ç®—å­ã€‚æˆ‘ä»¬çš„è§è§£æ˜¯ï¼Œå…¶ä»–å­¦ä¹ å»¶è¿Ÿé¢„æµ‹å™¨çš„é«˜å¤æ‚æ€§æ˜¯æ•è·ç”±ä¸åŒç®—æ³•å’Œæ‰§è¡Œå—ï¼ˆdifferent algorithms and execution blocksï¼‰å¼•èµ·çš„éçº¿æ€§å»¶è¿Ÿå“åº”ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å…¬å¼åŒ–æ¥è®¡ç®—æ¯ä¸ªç®—æ³•å—ä»¥æå–éçº¿æ€§ã€‚åªæœ‰çº¿æ€§éƒ¨åˆ†è¢«ä¸€ä¸ªæè½»é‡çš„æ¨¡å‹å­¦ä¹ ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„é¢„æµ‹å™¨æ˜¯ç¬¬ä¸€ä¸ªè€ƒè™‘æ‰€æœ‰ä¸å¹¶å‘ç›¸å…³çš„å¼€é”€çš„äººã€‚</p></li></ol><p>â€‹å¯¹äºç»™å®šçš„æ¨¡å‹ï¼Œå¯ä»¥æ ¹æ®é¢„æµ‹å™¨å¾—å‡ºæ¯ä¸ªç®—å­çš„æœ€ä½³æ•°æ®åˆ†åŒºå’Œå…±äº«è®¡åˆ’ï¼ˆthe best data partitioning and sharing planï¼‰ã€‚ CoDL ç„¶ååè°ƒå¤„ç†å™¨æ¥æ‰§è¡Œè®¡åˆ’ã€‚æˆ‘ä»¬åŸºäºæœ€å…ˆè¿›çš„ (SOTA) ç§»åŠ¨æ¨ç†æ¡†æ¶ MACEå®ç°CoDLã€‚åœ¨åŒ…æ‹¬ Snapdragon 855ã€865 å’Œ 888 ä»¥åŠ Kirin 990 åœ¨å†…çš„å•†ç”¨ç°è´§ (COTS) ç§»åŠ¨è®¾å¤‡ä¸Šçš„å®éªŒè¡¨æ˜ï¼Œä¸ SOTA ååŒæ‰§è¡Œç³»ç»Ÿç›¸æ¯”ï¼ŒCoDL å¯ä»¥å®ç°å¹³å‡ 3.43 å€çš„åŠ é€Ÿå’Œ 62.3% çš„èŠ‚èƒ½ã€‚é€šè¿‡è€ƒè™‘éçº¿æ€§ç‰¹å¾ï¼Œæˆ‘ä»¬çš„é¢„æµ‹å™¨åœ¨é¢„æµ‹ CPU å’Œ GPU ä¸Šç®—å­çš„è¿è¡Œæ—¶å»¶è¿Ÿæ–¹é¢åˆ†åˆ«è¾¾åˆ°äº† 86.21% å’Œ 82.69% çš„å‡†ç¡®ç‡ï¼Œå¹¶ä¸”æ¨ç†å¼€é”€ä½ï¼ˆæ¯ä¸ªç®—å­ &lt; 1 msï¼‰ã€‚æ­¤å¤–ï¼Œä½¿ç”¨ä¸€æ¬¡æ€§æ”¶é›†çš„æ•°æ®æ ·æœ¬ï¼ˆè¿è¡Œæ—¶é—´å°äº 1.5 å°æ—¶çš„ 6000 ä¸ªæ ·æœ¬ï¼‰ï¼Œé¢„æµ‹å™¨å¯ä»¥ä»¥è®¾å¤‡ä¸Šçš„æ–¹å¼è¿›è¡Œè®­ç»ƒï¼ˆbe trained in an on-device mannerï¼‰ï¼Œå»¶è¿ŸèŒƒå›´ä¸º 1 åˆ° 2 ç§’ã€‚</p><p>â€‹ä¸»è¦çš„è´¡çŒ®å¦‚ä¸‹ï¼š</p><ol><li>æ·±å…¥åˆ†æCPU+GPUå¹¶å‘æ‰§è¡Œçš„æ€§èƒ½ç“¶é¢ˆ</li><li>æå‡ºåœ¨ CPU å’Œ GPU ä¹‹é—´è¿›è¡Œæ··åˆç±»å‹å‹å¥½çš„æ•°æ®å…±äº«ï¼Œåˆ©ç”¨æ··åˆç»´åº¦åˆ†åŒºå’Œç®—å­é“¾æ¥å‡å°‘å…±äº«å¼€é”€</li><li>æå‡ºæè½»é‡ä½†å‡†ç¡®çš„éçº¿æ€§å’Œå¹¶å‘æ„ŸçŸ¥å»¶è¿Ÿé¢„æµ‹</li><li>å®æ–½ç«¯åˆ°ç«¯ CoDL æ¡†æ¶å¹¶è¯æ˜å…¶æ€§èƒ½ä¼˜äºæœ€å…ˆè¿›çš„è§£å†³æ–¹æ¡ˆ</li></ol><h3 id="2-MOTIVATION-AND-ANALYSIS"><a href="#2-MOTIVATION-AND-ANALYSIS" class="headerlink" title="2 MOTIVATION AND ANALYSIS"></a>2 MOTIVATION AND ANALYSIS</h3><p>â€‹åœ¨è®¾è®¡CoDLä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡åˆ†æSOTAï¼ˆSOTA model)ï¼šstate-of-the-art modelï¼Œå¹¶ä¸æ˜¯ç‰¹æŒ‡æŸä¸ªå…·ä½“çš„æ¨¡å‹ï¼Œè€Œæ˜¯æŒ‡åœ¨è¯¥é¡¹ç ”ç©¶ä»»åŠ¡ä¸­ï¼Œç›®å‰æœ€å¥½&#x2F;æœ€å…ˆè¿›çš„æ¨¡å‹ã€‚SOTA resultï¼šstate-of-the-art resultï¼ŒæŒ‡çš„æ˜¯åœ¨è¯¥é¡¹ç ”ç©¶ä»»åŠ¡ä¸­ï¼Œç›®å‰æœ€å¥½çš„æ¨¡å‹çš„ç»“æœ&#x2F;æ€§èƒ½&#x2F;è¡¨ç°ã€‚ï¼‰æ¨ç†ç³»ç»Ÿæ¥æ¢ç´¢ååŒæ‰§è¡Œçš„æ€§èƒ½ç“¶é¢ˆã€‚</p><p>â€‹æˆ‘ä»¬æŒ‰ç…§Î¼playerï¼ˆæœ€ä½³ååŒå¤„ç†æ¨¡å‹ï¼‰ä¸MACEï¼ˆæœ€ä½³å•å¤„ç†å™¨æ‰§è¡Œç³»ç»Ÿï¼‰ï¼Œåˆ†åˆ«è¿›è¡Œäº†æµ‹è¯•ã€‚åœ¨éªé¾™855å¹³å°ä¸Šï¼ŒCPUä¸GPUååŒè¿ç®—çš„Î¼Layerè¦æ¯”ä½†å•CPUæˆ–GPUçš„MACEæ‰§è¡Œåœ°æ…¢ã€‚æ·±å…¥åˆ†æç³»ç»Ÿï¼Œå½“å‰å¹¶è¡Œç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜åœ¨äºï¼š</p><ol><li>ä¸åŒçš„å¤„ç†å™¨ä½¿ç”¨äº†ç»Ÿä¸€çš„æ•°æ®ç±»å‹</li><li>å¿½è§†äº†æ•°æ®å…±äº«çš„å¼€é”€</li><li>å·¥ä½œè´Ÿè½½åˆ’åˆ†ä¸åˆç†</li></ol><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116210803204.png" alt="image-20221116210803204"></p><p>â€‹ç»Ÿä¸€çš„æ•°æ®ç±»å‹å¯¹äºå¼‚æ„å¤„ç†å™¨ååŒæ‰§è¡Œæ¥è¯´æ•ˆç‡ä¸é«˜ã€‚ä¸ºäº†ç®€åŒ–æ•°æ®å…±äº«ï¼Œå½“å‰çš„ååŒæ‰§è¡Œç³»ç»Ÿä¸ºä¸åŒçš„å¤„ç†å™¨ä½¿ç”¨é€šç”¨æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œbuffer typeè¢«CPUå’ŒGPUéƒ½æ”¯æŒï¼Œå› æ­¤å¯ä»¥è¢«Î¼Layerè°ƒç”¨ã€‚ç¼“å†²åŒºç±»å‹å°†æ•°æ®ç»„ç»‡æˆè¿ç»­çš„å’ŒæŒ‡é’ˆå¯è®¿é—®çš„å—ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å‘ç°å›¾åƒç±»å‹ï¼ˆimage typeï¼‰åœ¨ Adreno GPU ä¸Šæ¯”ç¼“å†²åŒºæ›´æœ‰æ•ˆã€‚å›¾åƒç±»å‹å°†æ•°æ®ç»„ç»‡æˆå¤šç»´å—ä»¥æ–¹ä¾¿æ¸²æŸ“,å®ƒåˆ©ç”¨ GPU ä¸Šçš„å¿«é€Ÿ L1 Cache ç¼“å­˜æ¥åŠ é€Ÿæ•°æ®è®¿é—®</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116210915345.png" alt="image-20221116210915345"></p><p>â€‹å›¾è¯´æ˜äº†ä½¿ç”¨å›¾åƒå’Œç¼“å†²åŒºç±»å‹è¿›è¡Œå…·æœ‰ä¸åŒè¾“å…¥å½¢çŠ¶çš„ 3Ã—3 å·ç§¯çš„æ€§èƒ½å·®å¼‚ã€‚</p><p>â€‹å› æ­¤ï¼Œè¦å……åˆ†åˆ©ç”¨æ¯ä¸ªå¼‚æ„å¤„ç†å™¨ï¼Œå°±åº”è¯¥ä½¿ç”¨ç›¸åº”çš„é«˜æ•ˆæ•°æ®ç±»å‹</p><p>â€‹å¹¶è¡Œçš„æ•°æ®å…±äº«å¼€é”€ä¸å¯å¿½ç•¥ï¼Œå°¤å…¶æ˜¯å¯¹å°ç®—å­è€Œè¨€ã€‚ååŒè®¡ç®—å¸¦æ¥äº†æ•°æ®å…±äº«å¼€é”€ï¼Œä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚å½“å‰çš„ååŒç³»ç»Ÿå¿½è§†äº†è¿™ç§å¼€é”€ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116211339790.png" alt="image-20221116211339790"></p><p>â€‹ä¸Šå›¾å±•ç¤ºäº†ç®—å­åœ¨CPUå’ŒGPUååŒæ‰§è¡Œè¿‡ç¨‹ä¸­çš„å»¶è¿Ÿç»„ä»¶ã€‚å‡è®¾ç®—å­è¾“å…¥ç”± GPU ä¸Šçš„æœ€åä¸€ä¸ªç®—å­ç”Ÿæˆï¼Œç°åœ¨åœ¨ CPU å’Œ GPU ä¹‹é—´å…±äº«ä»¥å…±åŒæ‰§è¡Œã€‚åœ¨ç®—å­çš„è®¡ç®—å¼€é”€ä¹‹å¤–ï¼Œé¢å¤–çš„å¼€é”€æ¥è‡ªäºï¼š</p><ol><li>æ•°æ®è½¬æ¢ï¼šå¦‚æœä½¿ç”¨äº†ä¸åŒçš„æ•°æ®ç±»å‹</li><li>æ•°æ®æ˜ å°„ï¼Œå°†è¾“å…¥æ˜ å°„åˆ°CPUåœ°å€ç©ºé—´</li><li>åŒæ­¥ï¼Œé€šçŸ¥å…¶ä»–å¤„ç†å™¨å®Œæˆæ˜ å°„ï¼ˆé¢„åŒæ­¥ï¼‰è·è®¡ç®—ï¼ˆååŒæ­¥ï¼‰</li><li>æ•°æ®å–æ¶ˆæ˜ å°„ï¼Œå–æ¶ˆæ˜ å°„CPUåœ°å€ç©ºé—´çš„è¾“å‡º</li></ol><p>â€‹è¿™äº›å¼€é”€éƒ½æ˜¯ä¸å¯å¿½ç•¥çš„ã€‚ç‰¹åˆ«æ˜¯å¯¹äºå°å‹ç®—å­ï¼Œå®ƒå¾ˆå®¹æ˜“æˆä¸ºä¸»è¦å¼€é”€å¹¶æŠµæ¶ˆ CPU-GPU ååŒæ‰§è¡Œå¸¦æ¥çš„å¢ç›Šã€‚å›¾ 4 æ¼”ç¤ºäº†ä¸€ä¸ªä¾‹å­</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116212011290.png" alt="image-20221116212011290"></p><p>â€‹å°½ç®¡ååŒæ‰§è¡Œå°†æ‰§è¡Œå»¶è¿Ÿä» 1126Î¼s å‡å°‘åˆ° 599Î¼sï¼Œæ•°æ®å…±äº«å¼€é”€è´¡çŒ®äº† 1074Î¼sï¼Œå¯¼è‡´ 1.5 å€çš„å‡é€Ÿã€‚</p><p>â€‹å› æ­¤ï¼ŒååŒæ‰§è¡Œç³»ç»Ÿåº”è¯¥ä»¥å‡å°‘å¼€é”€ä¸ºç›®æ ‡ï¼Œåªæœ‰å½“æ”¶ç›Šè¶…è¿‡å¼€é”€æ—¶æ‰å¹¶å‘æ‰§è¡Œè¿ç®—ç¬¦ã€‚</p><p>â€‹ç”¨äºååŒæ‰§è¡Œçš„å¹³è¡¡å·¥ä½œè´Ÿè½½åˆ†åŒºéœ€è¦è½»é‡çº§ä¸”å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨ã€‚å½“å‰çš„ååŒæ‰§è¡Œç³»ç»Ÿé€šå¸¸ä½¿ç”¨è½»é‡çº§æ¨¡å‹çš„é¢„æµ‹å»¶è¿Ÿæ¥æŒ‡å¯¼å¤„ç†å™¨ä¹‹é—´çš„å·¥ä½œè´Ÿè½½åˆ†é…ã€‚ä¾‹å¦‚ï¼ŒÎ¼layerä½¿ç”¨åŸºäº FLOPs çš„çº¿æ€§æ¨¡å‹æ¥é¢„æµ‹å»¶è¿Ÿã€‚è½»é‡çº§å»¶è¿Ÿæ¨¡å‹é€‚ç”¨äºåœ¨çº¿é¢„æµ‹ã€‚ç„¶è€Œï¼Œå®ƒå¤ªä¸å‡†ç¡®äº†ï¼ˆ&lt;10%ï¼‰ã€‚ç”±äºå·¥ä½œè´Ÿè½½ä¸å¹³è¡¡ï¼Œä¸å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹åè¿‡æ¥ä¼šå¯¼è‡´æ¨ç†æ€§èƒ½ä¸ä½³ã€‚ä¸Šå›¾ä¸­ï¼Œé‰´äºæœ€ä½³åˆ†åŒºç‡ä¸º 90%ï¼ŒåŸºäº FLOPs çš„é¢„æµ‹å™¨é€šè¿‡åœ¨ GPU ä¸Šåˆ†é… 60% çš„è¿ç®—ç¬¦å¯¼è‡´ 4 å€çš„å‡é€Ÿã€‚</p><p>â€‹é¢„æµ‹ä¸å‡†ç¡®çš„åŸå› æ˜¯å»¶è¿Ÿä¸FLOPsä¸æ˜¯ç®€å•çš„çº¿æ€§å…³ç³»ï¼Œè€Œæ˜¯å—ç®—æ³•å®ç°ã€æ•°æ®å—å¤§å°ç­‰å¹³å°ç‰¹æ€§ï¼ˆplatform featuresï¼‰å½±å“å¾ˆå¤§ã€‚å¦‚å›¾ 6 æ‰€ç¤ºï¼Œéšç€ GPU å’Œ CPU çš„ FLOPs å¢åŠ ï¼Œå»¶è¿Ÿæ˜¾ç¤ºå‡ºéçº¿æ€§å“åº”</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116212820722.png" alt="image-20221116212820722"></p><p>â€‹è¿˜æœ‰ä¸€äº›å·¥ä½œåªåœ¨å‡†ç¡®é¢„æµ‹å»¶è¿Ÿï¼Œå¦‚nn-meterï¼Œå®ƒä½¿ç”¨é»‘ç›’æœºå™¨å­¦ä¹ æ–¹æ³•æ¥å­¦ä¹ åŸºäºå¤šä¸ªç®—å­è¶…å‚æ•°çš„å»¶è¿Ÿå“åº”ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹å¯¹åº•å±‚å¹³å°ç‰¹å¾çš„äº†è§£ï¼Œé»‘ç›’æ–¹æ³•ä»¥æ¨¡å‹å°ºå¯¸å¤§ä¸ºä»£ä»·è·å¾—äº†ä»¤äººæ»¡æ„çš„ç²¾åº¦ï¼ˆä¾‹å¦‚ï¼Œè¶…è¿‡ 800 MB ç”¨äº nn-Meter çš„å·ç§¯ï¼‰å’Œä¸å¯è¡Œçš„æ‰§è¡Œæ—¶é—´ï¼ˆä¾‹å¦‚ï¼Œnn-Meter åœ¨ PC ä¸Šè¶…è¿‡ 80 æ¯«ç§’ï¼‰ã€‚éƒ¨ç½²åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯ä¸åˆ‡å®é™…çš„ã€‚å› æ­¤ï¼ŒååŒæ‰§è¡Œç³»ç»Ÿéœ€è¦ä¸€ä¸ªå¯ä»¥ç»“åˆå¹³å°ç‰¹æ€§çš„å»¶è¿Ÿé¢„æµ‹å™¨ï¼Œä»è€Œæ—¢è½»ä¾¿åˆå‡†ç¡®ã€‚</p><h3 id="3-CODL-OVERVIEW"><a href="#3-CODL-OVERVIEW" class="headerlink" title="3 CODL OVERVIEW"></a>3 CODL OVERVIEW</h3><p>â€‹ä¸ºäº†åœ¨å¼‚æ„å¤„ç†å™¨ä¸Šå®ç°ååŒæ‰§è¡Œçš„æœ€ä½³æ€§èƒ½ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸‰ä¸ªè®¾è®¡åŸåˆ™</p><ol><li>å……åˆ†åˆ©ç”¨æ¯ä¸ªå¤„ç†å™¨çš„è®¡ç®—èƒ½åŠ›</li><li>æœ€å°åŒ–ç”±æ•°æ®å…±äº«å¼•èµ·çš„é¢å¤–å¼€é”€ï¼Œå³æ•°æ®è½¬æ¢ã€æ˜ å°„å’ŒåŒæ­¥</li><li>æœ€ä½³åˆ†åŒºå’Œå¹³è¡¡å¼‚æ„å¤„ç†å™¨ä¹‹é—´çš„å·¥ä½œè´Ÿè½½ã€‚</li></ol><p>â€‹åœ¨è¿™äº›åŸåˆ™çš„æŒ‡å¯¼ä¸‹ï¼Œæˆ‘ä»¬è®¾è®¡äº† CoDLã€‚å®ƒåˆ†ä¸¤ä¸ªé˜¶æ®µè¿è¡Œï¼Œå³ç¦»çº¿é˜¶æ®µå’Œåœ¨çº¿é˜¶æ®µï¼Œå¦‚å›¾ 7 æ‰€ç¤ºã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116213426444.png" alt="image-20221116213426444"></p><p>â€‹åœ¨ç¦»çº¿é˜¶æ®µï¼ŒCoDL è®¾è®¡äº†ä¸€ä¸ªè½»é‡çº§ä½†æœ‰æ•ˆçš„å»¶è¿Ÿé¢„æµ‹å™¨æ¥æŒ‡å¯¼åœ¨çº¿é˜¶æ®µçš„ç®—å­åˆ’åˆ†ã€‚é¢„æµ‹å™¨å¯ä»¥åšåˆ°è½»é‡å’Œæœ‰æ•ˆï¼ŒåŸå› åœ¨äºï¼š</p><ol><li>å®ƒè€ƒè™‘äº†æ‰€æœ‰æ•°æ®å…±äº«å¼€é”€ï¼ŒåŒ…æ‹¬æ•°æ®è½¬æ¢ã€æ˜ å°„å’ŒåŒæ­¥</li><li>å®ƒè§£æåœ°åˆ¶å®šäº†ç”±å¹³å°ç‰¹æ€§å¼•èµ·çš„éçº¿æ€§å»¶è¿Ÿå“åº”ï¼Œå¹¶ä¸”åªéœ€è¦é€šè¿‡æè½»é‡çº§çš„çº¿æ€§å›å½’æ¨¡å‹ä¸ºæ¯ä¸ªå®ç°çš„å†…æ ¸å­¦ä¹ åŸºæœ¬æ‰§è¡Œå•å…ƒçš„å»¶è¿Ÿ</li></ol><p>åœ¨çº¿é˜¶æ®µç”±ä¸¤ä¸ªæ¨¡å—ç»„æˆï¼Œthe operator partitioner and the operator co-executor.ã€‚operator partitioner çš„ä½œç”¨æ˜¯ä¸ºè¾“å…¥çš„ DL æ¨¡å‹åˆ¶å®šæœ€ä¼˜çš„ operator åˆ†åŒºæ–¹æ¡ˆã€‚åŸºäºlatency predictorï¼Œå®ƒé‡‡ç”¨ä¸¤ç§æŠ€æœ¯ï¼Œå³æ··åˆç»´åº¦åˆ†åŒºå’Œè¿ç®—ç¬¦é“¾ï¼Œæ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚åˆ†åŒºå™¨é¦–å…ˆé€šè¿‡æ··åˆç»´åº¦åˆ†åŒºæŠ€æœ¯ä¸ºæ¯ä¸ªç®—å­æ‰¾åˆ°æœ€ä½³åˆ†åŒºç»´åº¦ï¼ˆé«˜åº¦æˆ–è¾“å‡ºé€šé“ï¼‰å’Œæ¯”ç‡ï¼ˆä¾‹å¦‚ï¼Œ0.1ã€0.2ï¼Œâ€¦ï¼‰ä½œä¸ºbase planã€‚æ ¹æ®base planè§„åˆ’ï¼Œé€šè¿‡ç®—å­é“¾æŠ€æœ¯å¯»æ‰¾ç®—å­ä¸Šé“¾ï¼Œé“¾ä¸Šç®—å­æ— éœ€å…±äº«æ•°æ®ã€‚æ¥è‡ªåˆ†åŒºå™¨çš„æœ€ç»ˆåˆ†åŒºè®¡åˆ’æ˜¯æ‰¾åˆ°ä¸€ç»„é“¾çš„é›†åˆï¼Œæ¯ä¸ªéƒ½æœ‰é“¾æ¥çš„ç®—å­å’Œé“¾ä¸Šçš„ä¸€äº›è®¾ç½®ï¼Œå³partitioning ratio and dimensionã€‚é€šè¿‡è¯¥è®¡åˆ’ï¼Œé¢„å…ˆä¸º GPU å’Œ CPU å®‰æ’äº†æ¨¡å‹æƒé‡ï¼Œä»¥é¿å…æ¯æ¬¡æ¨ç†è°ƒç”¨çš„é‡æ–°è½¬æ¢ã€‚</p><p>â€‹operator co-executoræ ¹æ®åˆ†åŒºè®¡åˆ’åè°ƒoperatorsçš„åŒæ­¥æ‰§è¡Œï¼Œé’ˆå¯¹ä¸åŒçš„å¤„ç†å™¨ä½¿ç”¨å…¶å‹å¥½çš„æ•°æ®ç±»å‹ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116214804551.png" alt="image-20221116214804551"></p><p>â€‹å¦‚å›¾ 8 æ‰€ç¤ºï¼Œåœ¨é“¾çš„å¼€å¤´ï¼ŒCoDL é¦–å…ˆåœ¨ CPU å’Œ GPU ä¹‹é—´å…±äº«æ•°æ®ã€‚å‡è®¾ GPU å‹å¥½ç±»å‹ä¸ºé»˜è®¤æ•°æ®ç±»å‹ï¼ŒCoDL å°†åˆ†åŒºè¾“å…¥ç‰¹å¾å›¾ä» GPU å‹å¥½ç±»å‹ï¼ˆä¾‹å¦‚ï¼ŒAdreno GPU ä¸Šçš„å›¾åƒç±»å‹ï¼‰è½¬æ¢ä¸º CPU å‹å¥½ç±»å‹ã€‚ç„¶åï¼ŒCPU å’Œ GPU åŒæ—¶æ‰§è¡Œä¸€æ¡é“¾ä¸­çš„æ‰€æœ‰ç®—å­ã€‚åœ¨ä¸€æ¡é“¾çš„æœ«ç«¯ï¼ŒGPU å°† CPU ä¸Šç”Ÿæˆçš„æ•°æ®è½¬æ¢å› GPU å‹å¥½ç±»å‹ï¼Œå¹¶ä¸ GPU è¾“å‡ºç»“åˆåœ¨ä¸€èµ·ä½œä¸ºä¸‹ä¸€æ¡é“¾çš„è¾“å…¥ã€‚</p><h3 id="4-HYBRID-TYPE-FRIENDLY-DATA-SHARING"><a href="#4-HYBRID-TYPE-FRIENDLY-DATA-SHARING" class="headerlink" title="4 HYBRID-TYPE FRIENDLY DATA SHARING"></a>4 HYBRID-TYPE FRIENDLY DATA SHARING</h3><p>â€‹CoDL æ”¯æŒä¸ºæ¯ä¸ªå¤„ç†å™¨ä½¿ç”¨é«˜æ•ˆçš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯è¿™ä¹Ÿè¿›ä¸€æ­¥å¢åŠ çš„æ•°æ®å¼€é”€ã€‚æœ¬èŠ‚ä»‹ç»CoDLçš„ä¸¤ç§æ•°æ®å…±äº«ä¼˜åŒ–æŠ€æœ¯ï¼Œå³æ··åˆç»´åº¦åˆ’åˆ†å’Œç®—å­é“¾ã€‚å®ƒä»¬é€šè¿‡å®ç°æ•°æ®å…±äº«å’Œè®¡ç®—å¼€é”€ä¹‹é—´çš„æƒè¡¡æ¥åŠ é€Ÿç®—å­çš„å…±åŒæ‰§è¡Œ</p><h4 id="4-1-Hybrid-dimension-partitioning"><a href="#4-1-Hybrid-dimension-partitioning" class="headerlink" title="4.1 Hybrid-dimension partitioning"></a>4.1 Hybrid-dimension partitioning</h4><ul><li><strong>Performance impact analysis</strong></li></ul><p>ä¸ºäº†è¿›è¡ŒååŒè¿ç®—å¯ä»¥æ²¿ä¸åŒç»´åº¦åˆ’åˆ†ç®—å­çš„å¼ é‡ï¼ŒåŒ…æ‹¬OC,H,Wã€‚åŒçš„ç»´åº¦å¯¼è‡´ä¸åŒçš„æ€§èƒ½å½±å“ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116215951730.png" alt="image-20221116215951730"></p><p>â€‹é¦–å…ˆï¼Œåˆ†åŒºç»´åº¦å½±å“æ•°æ®å…±äº«å¼€é”€ã€‚ç¡®ä¿å¤„ç†å™¨ä¹‹é—´å…±äº«æ•°æ®çš„ä¸€è‡´æ€§éœ€è¦ç›¸å½“å¤§çš„å¼€é”€ã€‚å› æ­¤ï¼Œå‡å°‘å…±äº«æ•°æ®é‡å¾ˆé‡è¦ã€‚æ¨¡å‹æƒé‡åœ¨æ¨ç†è¿‡ç¨‹ä¸­æ˜¯ä¸€è‡´çš„ã€‚å®ƒä»¬å¯ä»¥é¢„å…ˆåˆ†é…åœ¨æ¯ä¸ªå¤„ç†å™¨ä¸Šï¼Œä¸éœ€è¦åŠ¨æ€å…±äº«ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªç®—å­çš„è¾“å…¥ç‰¹å¾å›¾éœ€è¦åŠ¨æ€å…±äº«ï¼Œå› ä¸ºå®ƒæ˜¯ç”±æœ€åä¸€ä¸ªç®—å­åœ¨æ¨ç†è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ã€‚</p><p>â€‹å› æ­¤ï¼Œè€ƒè™‘åˆ°æ•°æ®å…±äº«å¼€é”€ï¼Œåœ¨ç»´åº¦Hä¸Šè¿›è¡Œåˆ†åŒºæ¯”åœ¨ç»´åº¦OCä¸Šè¿›è¡Œåˆ†åŒºæ›´å¯å–ã€‚å¯¹äºOCåˆ†åŒºï¼Œæ•´ä¸ªè¾“å…¥ç‰¹å¾å›¾åœ¨ CPU å’Œ GPU ä¹‹é—´å…±äº«ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåªæœ‰éƒ¨åˆ†ç‰¹å¾å›¾ï¼ˆä»¥åŠç”¨äºè¿‡æ»¤å¤„ç†çš„å¡«å……æ•°æ®ï¼‰è¢«å…±äº«ç”¨äºHåˆ†åŒºã€‚</p><p>â€‹å…¶æ¬¡ï¼Œåˆ†åŒºç»´åº¦å½±å“å¤„ç†å™¨åˆ©ç”¨ç‡ã€‚å°½ç®¡åœ¨Hä¸Šè¿›è¡Œåˆ†åŒºå…·æœ‰è¾ƒå°‘çš„æ•°æ®å…±äº«å¼€é”€ï¼Œä½†æˆ‘ä»¬å‘ç°å®ƒå¹¶ä¸æ€»æ˜¯æ„å‘³ç€è¾ƒå°‘çš„è¿è¡Œæ—¶é—´ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116220640456.png" alt="image-20221116220640456"></p><p>â€‹åŸå› åœ¨äºï¼Œä¸OCç›¸æ¯”ï¼ŒHåˆ†åŒºå¯èƒ½ä¼šé™ä½å¤„ç†å™¨åˆ©ç”¨ç‡ï¼Œè¿™å…·ä½“å–å†³äºè¿ç®—ç¬¦å½¢çŠ¶</p><p>â€‹ä¸ºäº†åˆ©ç”¨å¤„ç†å™¨çš„å†…æ ¸é—´å’Œå†…æ ¸å†…å¹¶è¡Œæ€§ï¼Œéœ€è¦å°†ç®—å­çš„å¼ é‡åˆ†æˆå—å¹¶è°ƒåº¦åˆ°ä¸åŒçš„å†…æ ¸ä¸Šè¿è¡Œã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116220930984.png" alt="image-20221116220930984"></p><p>â€‹ä¸€ä¸ªåä¸ºå·¥ä½œç»„ï¼ˆwork groupï¼‰çš„å—è¢«å®‰æ’åœ¨ GPU æ ¸å¿ƒä¸Šè¿è¡Œã€‚ä¸ºäº†æœ‰æ•ˆåœ°åˆ©ç”¨å†…æ ¸ä¸­çš„è®¸å¤š ALUï¼Œç§°ä¸º warp çš„åŸºæœ¬æ‰§è¡Œå•å…ƒåŒæ—¶ä¸ºå¤šä¸ªçº¿ç¨‹ï¼ˆä¾‹å¦‚ 64 æˆ– 128ï¼‰æ‰§è¡Œç›¸åŒçš„æŒ‡ä»¤ã€‚å› æ­¤ï¼Œå·¥ä½œç»„åº”è¯¥æä¾›è¶³å¤Ÿçš„çº¿ç¨‹æ¥å¡«å…… warpã€‚æˆ–è€…ä¼šæœ‰ç©ºé—²çš„ ALUã€‚</p><p>â€‹<strong>Håˆ†åŒºé€Ÿåº¦æ…¢çš„åŸå› </strong>ï¼šOCä¸Šçš„ç»´åº¦å¾ˆå°ï¼ˆä¸ºäº†é¿å…è®¸å¤šè¿‡æ»¤å™¨å¯¹ç¼“å­˜é€ æˆçš„å‹åŠ›ï¼Œå½“Hå’ŒWæ¯”è¾ƒå°çš„æ—¶å€™ï¼ˆ13 Ã— 13ï¼‰ï¼Œå°±æ²¡æœ‰è¶³å¤Ÿçš„çº¿ç¨‹æ¥å¡«å……warpï¼‰ï¼Œå¯¼è‡´GPUåˆ©ç”¨ç‡å’Œæ€§èƒ½é™ä½</p><p>â€‹ç¬¬ä¸‰ï¼Œåˆ†åŒºç»´åº¦å½±å“æ•°æ®è®¿é—®å¼€é”€ã€‚ä¸ºäº†æ›´å¿«çš„æ•°æ®è®¿é—®ï¼Œåˆ†åŒºç»´åº¦åº”è¯¥ä¸å¼ é‡å¸ƒå±€ä¸€è‡´ï¼Œå¹¶ç¡®ä¿å…±äº«æ•°æ®è¿ç»­å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚æŒ‰Håˆ†åŒºæ˜¯è¿ç»­çš„ï¼ŒæŒ‰Wåˆ†åŒºæ˜¯ä¸è¿ç»­çš„ã€‚</p><ul><li><strong>Determining the partitioning dimension.</strong></li></ul><p>â€‹åº”æ ¹æ®æ¯ä¸ªç®—å­shapeå¯¹æ•°æ®å…±äº«å¼€é”€å’Œå¤„ç†å™¨åˆ©ç”¨ç‡çš„å½±å“æ¥ç¡®å®šåˆ†åŒºç»´åº¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æå‡ºäº† CoDL çš„æ··åˆç»´åº¦åˆ’åˆ†ã€‚å®ƒå°†å½±å“å› ç´ æ•´åˆåˆ°å»¶è¿Ÿé¢„æµ‹å™¨ä¸­ã€‚CoDLå¿«é€Ÿè¯„ä¼°ä¸åŒçš„åˆ†åŒºè®¡åˆ’ï¼Œä¸ºæ¯ä¸ªç®—å­æ‰¾åˆ°æœ€ä½³çš„åˆ†åŒºç»´åº¦å’Œæ¯”ç‡ã€‚é€‰æ‹©æœ€å°çš„å»¶è¿Ÿæœ€ä¸ºæœ€åçš„åˆ†åŒºç»´åº¦ã€‚</p><h4 id="4-2-Operator-chain"><a href="#4-2-Operator-chain" class="headerlink" title="4.2 Operator chain"></a>4.2 Operator chain</h4><p>â€‹æˆ‘ä»¬æå‡ºäº†è¿ç®—ç¬¦é“¾æŠ€æœ¯æ¥å‡å°‘éœ€è¦å…±äº«æ•°æ®çš„è¿ç®—ç¬¦æ•°é‡ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªè¿ç®—ç¬¦ä¹‹åå…±äº«æ•°æ®ã€‚æ•°æ®åªéœ€è¦åœ¨é“¾çš„å¼€å§‹å’Œç»“æŸæ—¶å…±äº«ï¼Œé“¾ä¸­çš„å…¶ä»–ç®—å­ä½¿ç”¨æœ¬åœ°ç”Ÿæˆçš„æ•°æ®ï¼Œä½†ä¸ä½¿ç”¨æ¥è‡ªå…¶ä»–å¤„ç†å™¨çš„æ•°æ®ã€‚</p><ul><li><strong>Performance impact analysis</strong></li></ul><p>æŒ‘æˆ˜ï¼šå¦‚ä½•å¿«é€Ÿå†³å®šåœ¨ DL æ¨¡å‹ä¸­é“¾æ¥å“ªäº›ç®—å­ã€‚ä¸æ­£ç¡®çš„é“¾æ¥è¿ç®—ç¬¦ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p><p>é¦–å…ˆï¼Œä¸€ä¸ªé“¾çš„åˆ†åŒºæ¯”ä¾‹å¯¹äºå®ƒçš„æ¯ä¸ªç®—å­çš„æ€§èƒ½æ¥è¯´å¯èƒ½å¹¶ä¸ç†æƒ³ã€‚è¯¥æ¯”ç‡æ˜¯é“¾ä¸­æ‰€æœ‰ç®—å­çš„æŠ˜è¡·ã€‚å…¶æ¬¡ï¼Œé“¾è¶Šé•¿ï¼Œå¡«å……è¶Šå¤šï¼Œå› æ­¤æœ‰æ›´å¤šçš„é¢å¤–è®¡ç®—ã€‚å·ç§¯éœ€è¦åœ¨ç‰¹å¾å›¾çš„è¾¹ç•Œä¸Šå¡«å……ä»¥è¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚paddingçš„å…¬å¼å¦‚ä¸‹</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116222215715.png" alt="image-20221116222215715"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116222251134.png" alt="image-20221116222251134"></p><p>â€‹è¦åœ¨é“¾ä¸­å†æ·»åŠ ä¸€ä¸ªç®—å­ï¼Œå¡«å……å°†æ²¿ç€é“¾ä¼ æ’­åˆ°ç¬¬ä¸€ä¸ªç®—å­ã€‚è¿™ç»™æ¯ä¸ªç®—å­å¢åŠ äº†è¶Šæ¥è¶Šå¤šçš„å†—ä½™è®¡ç®—ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221119163805604.png" alt="image-20221119163805604"></p><p>â€‹ä¸æ— é“¾ï¼ˆå³åœ¨æ¯ä¸ªç®—å­ä¹‹åå…±äº«æ•°æ®ï¼‰ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„é“¾æ–¹æ³•æ˜¾ç€å‡å°‘äº†æ•°æ®å…±äº«å¼€é”€ã€‚é“¾é•¿ä¸º9æ—¶ï¼Œæ•°æ®å…±äº«å¼€é”€ä»…ä¸ºæ— é“¾çš„9%ã€‚ç„¶è€Œï¼Œç”±äºå¡«å……ï¼Œè®¡ç®—å»¶è¿Ÿå¢åŠ äº† 61%ï¼Œå¯¼è‡´ä¸æ— é“¾ç›¸æ¯”æ›´å¤šçš„å»¶è¿Ÿã€‚æ­¤ç¤ºä¾‹ä¸­çš„æœ€ä½³é•¿åº¦åº”ä¸º 8ï¼Œä¸æ— é“¾ç›¸æ¯”ï¼Œæ€§èƒ½æé«˜äº† 42%ã€‚</p><ul><li><strong>Chain searching algorithm</strong></li></ul><p>â€‹ä¸ºäº†æ‰¾åˆ°åœ¨ DL æ¨¡å‹çš„æ•°æ®å…±äº«å’Œè®¡ç®—å¼€é”€ä¹‹é—´å–å¾—æœ€ä½³æƒè¡¡çš„é“¾ï¼Œæˆ‘ä»¬è®¾è®¡äº†å¦‚ç®—æ³• 1 æ‰€ç¤ºçš„é“¾æœç´¢ç®—æ³•</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116223353017.png" alt="image-20221116223353017"></p><p>â€‹å¯¹äºè¿™ä¸ª NP é—®é¢˜ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ä¼¼è´ªå¿ƒçš„ç®—æ³•ï¼Œå®ƒæœç´¢åˆ°å½“å‰ç®—å­ä¸ºæ­¢å»¶è¿Ÿæœ€å°‘çš„é“¾ã€‚</p><p>â€‹è¾“å…¥ï¼šè¾“å…¥æ˜¯æ— é“¾çš„æœ€ä½³åˆ†åŒºæ–¹æ¡ˆ</p><p>â€‹è¾“å‡ºï¼šè¾“å‡ºæ˜¯ä¸€ç»„æœ‰æœ€å°æ€»å»¶è¿Ÿçš„ç®—å­é“¾ï¼ˆæ¯ä¸ªé“¾éƒ½æœ‰åˆ†åŒºç»´åº¦dim,ratio,chained operatorsè¿™äº›è®¾ç½®ï¼‰</p><p>â€‹ç®—æ³•æ€è·¯<br>â‘  ä»ä¸€ä¸ªä¸åœ¨ä»»ä½•é“¾ä¸Šçš„ç®—å­å¼€å§‹ï¼Œå¯¹æ¯ä¸€ä¸ªå¯èƒ½çš„Ïï¼Œè¯¥ç®—æ³•ä¸æ–­é“¾æ¥æ›´å¤šçš„ç®—å­æ¥è®¡ç®—ä¸æ— é“¾çŠ¶å†µä¸‹çš„å¢ç›Šã€‚<br>â‘¡ å½“å†æ·»åŠ ä¸€ä¸ªç®—å­æ²¡æœ‰ä»»ä½•æ”¶ç›Šæ—¶åœæ­¢<br>â‘¢ æ­¤è¿‡ç¨‹ä¸­ï¼ŒÏ ä¸ æ­¤é“¾ç›¸å…³çš„æœ€å¤§é“¾æ”¶ç›Šéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œéå†å®Œæ‰€æœ‰å¯èƒ½çš„Ïä¹‹åï¼Œæœ€ç»ˆè®°å½•åˆ°é“¾çš„å‚æ•°ä¸­ã€‚<br>â‘£ ç„¶åç®—æ³•å¼€å§‹è¿›è¡Œæ‰¾ä¸‹ä¸€ä¸ªé“¾</p><p>Ïçš„å¤§å°åœ¨ç¬¬ä¸€ä¸ªç®—å­çš„Ïçš„é™„è¿‘ã€‚<br>è¦å°†ä¸‹ä¸€ä¸ªç®—å­æ·»åŠ åˆ°é“¾ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†é“¾ä¸Šçš„æ¯ä¸ªå‰é¢çš„ç®—å­è°ƒæ•´ä¸ºæ–°çš„å¡«å……å¤§å°ï¼Œå¹¶ä½¿ç”¨å»¶è¿Ÿé¢„æµ‹å™¨é‡æ–°è®¡ç®—æ€»å»¶è¿Ÿã€‚é‰´äºè¯¥ç®—æ³•æ£€æŸ¥æ¯ä¸ªè¿ç®—ç¬¦çš„æ¬¡æ•°ç­‰äºæ¯”ç‡èŒƒå›´çš„å¤§å°ï¼Œæœç´¢ç©ºé—´ä¸º<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116224053725.png" alt="image-20221116224053725"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116224125346.png" alt="image-20221116224125346"></p><h3 id="5-NON-LINEARITY-AND-CONCURRENCY-AWARE-LATENCY-PREDICTION"><a href="#5-NON-LINEARITY-AND-CONCURRENCY-AWARE-LATENCY-PREDICTION" class="headerlink" title="5 NON-LINEARITY- AND CONCURRENCY-AWARE LATENCY PREDICTION"></a>5 NON-LINEARITY- AND CONCURRENCY-AWARE LATENCY PREDICTION</h3><p>â€‹CoDL çš„åˆ†åŒºå’Œç®—å­é“¾æŠ€æœ¯ä¾èµ–äºç®—å­ååŒæ‰§è¡Œçš„å»¶è¿Ÿé¢„æµ‹ã€‚ç„¶è€Œï¼ŒæŒ‘æˆ˜åœ¨äºå¦‚ä½•åŒæ—¶å®ç°ç²¾ç¡®å’Œè½»é‡åŒ–ã€‚å½“å‰å¯ç”¨çš„å»¶è¿Ÿé¢„æµ‹å™¨ä¸­ï¼Œç”±äºä¸¤ä¸ªåŸå› ä¸èƒ½å¾ˆå¥½åœ°è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š</p><ol><li>è¿™äº›é¢„æµ‹å™¨éƒ½æ²¡æœ‰è€ƒè™‘æ•°æ®å…±äº«å¼€é”€</li><li>ç”±äºç¼ºä¹åº•å±‚å¹³å°çš„çŸ¥è¯†ï¼Œé¢„æµ‹å™¨ä¸èƒ½åŒæ—¶å‡†ç¡®å’Œè½»é‡çº§</li></ol><p>â€‹æœ¬èŠ‚ä»‹ç»æˆ‘ä»¬çš„é¢„æµ‹å™¨è®¾è®¡ã€‚å®ƒå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ç²¾ç¡®å’Œè½»é‡åŒ–ï¼š</p><ol><li>åŒ…æ‹¬å…±åŒæ‰§è¡Œçš„æ‰€æœ‰æ•°æ®å…±äº«å¼€é”€</li><li>å…¬å¼åŒ–åœ°åˆ¶å®šç”±å¹³å°ç‰¹å¾å¼•èµ·çš„éçº¿æ€§å»¶è¿Ÿå“åº”ï¼Œä»è€Œé™ä½å­¦ä¹ éš¾åº¦ã€‚</li></ol><p>è¾“å…¥ï¼šç®—å­çš„è¶…å‚æ•°ï¼Œåˆ†åŒºç»´åº¦ï¼Œæ¯”ä¾‹ï¼Œæ˜¯å¦ä¸ºé“¾çš„æ ‡è®°</p><p>è¾“å‡ºï¼šç»™å®šå¹³å°ä¸Šè¿ç®—ç¬¦å…±åŒæ‰§è¡Œçš„é¢„æµ‹å»¶è¿Ÿ</p><h4 id="5-1-Latency-composition-of-concurrency"><a href="#5-1-Latency-composition-of-concurrency" class="headerlink" title="5.1 Latency composition of concurrency"></a>5.1 Latency composition of concurrency</h4><p>â€‹ç®—å­å…±åŒæ‰§è¡Œçš„å®Œæ•´æ­¥éª¤åŒ…æ‹¬ï¼šæ•°æ®è½¬æ¢ã€æ˜ å°„ã€é¢„åŒæ­¥ã€è®¡ç®—ã€ååŒæ­¥å’Œå–æ¶ˆæ˜ å°„ã€‚æœ¬å°èŠ‚è®¨è®ºå¦‚ä½•å¯¹ä¸æ•°æ®å…±äº«ç›¸å…³çš„å»¶è¿Ÿè¿›è¡Œå»ºæ¨¡</p><p>â€‹æˆ‘ä»¬é¦–å…ˆæµ‹é‡ä¸€ç³»åˆ—ç‰¹å¾å›¾é…ç½®çš„å»¶è¿Ÿï¼Œä»¥äº†è§£æ•°æ®å…±äº«çš„å»¶è¿Ÿã€‚è½¬æ¢ã€æ˜ å°„å’Œå–æ¶ˆæ˜ å°„æ­¥éª¤çš„æµ‹é‡æ—¶é—´æ˜¯ç›¸åº”çš„ GPU å†…æ ¸&#x2F;å‘½ä»¤è¿è¡Œæ—¶é—´ã€‚é¢„åŒæ­¥çš„æµ‹é‡æ—¶é—´æ˜¯GPUæ˜ å°„å®Œæˆå’ŒCPUç¡®è®¤å®Œæˆçš„æ—¶é—´å·®ã€‚åŒç†ï¼Œpost-syncçš„æµ‹é‡æ—¶é—´æ˜¯CPUè®¡ç®—å®Œæˆå’ŒGPUç¡®è®¤å®Œæˆçš„æ—¶é—´å·®ã€‚</p><p>â€‹æˆ‘ä»¬çš„æµ‹é‡è¡¨æ˜ï¼Œæ˜ å°„ã€åŒæ­¥å’Œæ•°æ®è½¬æ¢ä¼šåœ¨ CPU å’Œ GPU ä¸Šçš„ç®—å­ååŒæ‰§è¡Œä¸­äº§ç”Ÿæ˜æ˜¾çš„å¼€é”€ã€‚åœ¨é¢„æµ‹å™¨ä¸­ä¸èƒ½å¿½ç•¥å®ƒä»¬ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œunmapping å’Œ postsync çš„å¼€é”€å¾ˆå°ï¼ˆ~50 Î¼sï¼‰ï¼Œè¿™åœ¨æˆ‘ä»¬çš„é¢„æµ‹å™¨ä¸­è¢«æ’é™¤åœ¨å¤–ã€‚</p><p>â€‹å› æ­¤ï¼Œç®—å­å…±åŒæ‰§è¡Œçš„æ€»é¢„æµ‹å»¶è¿Ÿ</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116230930275.png" alt="image-20221116230930275"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116230943360.png" alt="image-20221116230943360"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116231104135.png" alt="image-20221116231104135"></p><p>â€‹ğ‘‡ğ‘¡ğ‘Ÿğ‘ğ‘›ğ‘  and ğ‘‡ğ‘šğ‘ğ‘ä¸æ•°æ®å¤§å°æœ‰æ˜ç¡®çš„çº¿æ€§å…³ç³»ï¼Œå› ä¸ºå®ƒä»¬å¤§å¤šæ˜¯å†…å­˜æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥æ•°æ®å¤§å°ä¸ºç‰¹å¾çš„çº¿æ€§å›å½’æ¥å­¦ä¹ å»¶è¿Ÿã€‚å¯¹äºé¢„åŒæ­¥å¼€é”€ ğ‘‡ğ‘ğ‘ ğ‘¦ğ‘›ğ‘ï¼Œæ ¹æ®æˆ‘ä»¬çš„æµ‹é‡ï¼Œå®ƒæ²¡æœ‰æ˜æ˜¾çš„ç‰¹å¾ã€‚ğ‘‡ğ‘ğ‘ ğ‘¦ğ‘›ğ‘ ä¸»è¦å–å†³äºä¾›åº”å•†çš„é©±åŠ¨ç¨‹åºå®ç°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æµ‹é‡çš„ä¸Šé™1ms ä½œä¸º ğ‘‡ğ‘ğ‘ ğ‘¦ğ‘›ğ‘ã€‚</p><h4 id="5-2-Non-linearity-extracted-computing-latency-prediction"><a href="#5-2-Non-linearity-extracted-computing-latency-prediction" class="headerlink" title="5.2 Non-linearity-extracted computing latency prediction"></a>5.2 Non-linearity-extracted computing latency prediction</h4><p>â€‹å½“å‰ç²¾ç¡®å»¶è¿Ÿé¢„æµ‹å™¨çš„é«˜å¤æ‚åº¦æ˜¯æ•æ‰å¯¹ç®—å­è¶…å‚æ•°çš„éçº¿æ€§å»¶è¿Ÿå“åº”ã€‚ä¸ºäº†é™ä½å¤æ‚æ€§ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ†æéçº¿æ€§çš„åŸå› å¹¶ç›´æ¥åœ¨é¢„æµ‹å™¨ä¸­å¯¹å…¶å…¬å¼åŒ–ã€‚éçº¿æ€§å»¶è¿Ÿå“åº”ä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ol><li>é¦–å…ˆï¼Œä¸åŒçš„ç®—æ³•å¯¹è¶…å‚æ•°çš„è§„æ¨¡æœ‰ä¸åŒçš„å»¶è¿Ÿå“åº”ã€‚å·ç§¯ç®—å­æ ¹æ®è¶…å‚æ•°é‡‡ç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¾‹å¦‚ç”¨äº 3Ã—3 çš„ Winograd å’Œç”¨äº 5Ã—5 å·ç§¯çš„ç›´æ¥å·ç§¯ã€‚</li><li>å…¶æ¬¡ï¼Œä¸åŒçº§åˆ«çš„æ•°æ®å—å¯¼è‡´é˜¶æ¢¯å¼å»¶è¿Ÿå“åº”ï¼ŒGPU å†…æ ¸æ‰§è¡Œæœ‰ä¸¤ä¸ªçº§åˆ«çš„å—ï¼Œå³åˆ†åˆ«ç”¨äºå†…æ ¸é—´å’Œå†…æ ¸å†…å¹¶è¡Œçš„work groupå’Œ warpã€‚å¦‚æœå¼ é‡å¤§å°ä¸èƒ½å®Œå…¨é™¤ä»¥å—å¤§å°ï¼Œå°±ä¼šæœ‰ç©ºé—²çš„ ALU æˆ–å†…æ ¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå·¥ä½œç»„çš„å¤§å°ä¸º (2,5,10)ï¼Œå³ 100 ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸” warp å¤§å°ä¸º 64ï¼Œåˆ™å·¥ä½œç»„å¿…é¡»åœ¨ä¸¤ä¸ª warp ä¸­æ‰§è¡Œã€‚å› æ­¤ï¼Œè¿™å—ä¼šå¯¼è‡´é˜¶æ¢¯å¼å»¶è¿Ÿå“åº”ã€‚åŒæ ·ï¼Œå¯¹äº CPUï¼Œå¼ é‡ä¹Ÿå¿…é¡»è¢«åˆ†æˆå—å¹¶åˆ†é…åˆ°æ¯ä¸ª CPU å†…æ ¸ä¸Šè¿è¡Œã€‚ç„¶åï¼Œä¸ºäº†åˆ©ç”¨SIMDï¼ˆå•æŒ‡ä»¤å¤šæ•°æ®ï¼‰å•å…ƒï¼Œå†…æ ¸ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåŸºæœ¬çš„æ‰§è¡Œå•å…ƒï¼Œä¾‹å¦‚TFLiteæ¡†æ¶ä¸­å®ç°çš„8Ã—8</li></ol><p><strong>Formulating non-linearity.</strong></p><p>â€‹åŸºäºä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å°†ä¸åŒç®—æ³•å’Œå—å¼•èµ·çš„éçº¿æ€§è¿›è¡Œäº†å…¬å¼åŒ–ï¼Œå¹¶å°†å†…æ ¸å»¶è¿Ÿé¢„æµ‹æŠ½è±¡ä¸ºå…¬å¼3ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116232202836.png" alt="image-20221116232202836"></p><p>ğ‘†ğ‘–ğ‘§ğ‘’ğ‘œğ‘¢ğ‘¡ğ‘ğ‘¢ğ‘¡ï¼šåˆ†åŒºè¾“å‡ºå¤§å°ï¼Œé€šè¿‡é¢„æµ‹å™¨è¾“å…¥ï¼ˆç®—å­è¶…å‚æ•°ï¼Œdimï¼ŒÏï¼‰æ¥è®¡ç®—ç»™æ¯ä¸ªå¤„ç†å™¨ç”¨ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116232632014.png" alt="image-20221116232632014"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116232716883.png" alt="image-20221116232716883"></p><p>â€‹ç­‰å¼ä¸­å”¯ä¸€çš„éœ€è¦å­¦ä¹ çš„å˜é‡æ˜¯<em>tğ‘ğ‘ğ‘ ğ‘–ğ‘ğ‘ˆğ‘›ğ‘–ğ‘¡</em>ï¼Œåœ¨ç»™å®šå¤„ç†å™¨ä¸Šæ‰§è¡Œä¸€ä¸ªåŸºæœ¬å•å…ƒçš„æ—¶é—´ã€‚å®ƒä¾èµ–äºè¿ç®—ç¬¦è¶…å‚æ•°ã€å†…æ ¸å®ç°ã€ç¡¬ä»¶èµ„æºå’Œè°ƒåº¦ï¼Œéš¾ä»¥è§£æå»ºæ¨¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»çœŸæ­£çš„å¤„ç†å™¨åˆ†æä¸­äº†è§£æ¯ä¸ªå†…æ ¸å®ç°çš„ç‰¹æ€§ã€‚æ—¢ç„¶å·²ç»æå–äº†éçº¿æ€§ï¼Œä¸€ä¸ªæè½»çº¿æ€§å›å½’æ¨¡å‹å¯ä»¥ç”¨æ¥å­¦ä¹ tğ‘ğ‘ğ‘ ğ‘–ğ‘ğ‘ˆğ‘›ğ‘–ğ‘¡å¹¶è¾¾åˆ°è¾ƒé«˜çš„ç²¾åº¦ã€‚è¿™ä¸ªæ¨¡å‹çš„Featuresæ˜¯ï¼ˆğ» , ğ‘Š , ğ¼ğ¶, ğ‘‚ğ¶ï¼‰ã€‚å› ä¸ºå®ƒå¾ˆè½»é‡ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨æ‰‹æœºè®¾å¤‡ä¸Šè¢«è®­ç»ƒé€šè¿‡æ¢¯åº¦ä¸‹é™ã€‚æ ¹æ®ç®—æ³•çš„ä¸åŒï¼Œä¸€ä¸ªç®—å­å¯ä»¥åœ¨å¤šä¸ªå†…æ ¸ä¸­è¿›è¡Œè¿ç®—ã€‚å¤„ç†å™¨çš„è®¡ç®—æ—¶é—´å°±æ˜¯æ‰€æœ‰å†…æ ¸è®¡ç®—æ—¶é—´çš„æ€»å’Œã€‚</p><h3 id="6-IMPLEMENTATION"><a href="#6-IMPLEMENTATION" class="headerlink" title="6 IMPLEMENTATION"></a>6 IMPLEMENTATION</h3><p>â€‹æˆ‘ä»¬åŸºäºMACEå®ç°CoDL, MACE[19]æ˜¯ç§»åŠ¨è®¾å¤‡ä¸Šå¹¿æ³›ä½¿ç”¨çš„DLæ¨ç†æ¡†æ¶ï¼Œåœ¨æˆ‘ä»¬çš„è¯„ä¼°ä¸­ä¹Ÿå…·æœ‰SOTAæ€§èƒ½ã€‚æˆ‘ä»¬å°†CoDLçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå³æ··åˆç±»å‹å‹å¥½å‹æ•°æ®å…±äº«å’Œè½»é‡çº§å»¶è¿Ÿé¢„æµ‹å™¨é›†æˆåˆ°Maceä¸­ã€‚æˆ‘ä»¬é€šè¿‡é¢„ç¼–è¯‘çš„å…±äº«åº“æ¥äº¤ä»˜è¿™äº›åŠŸèƒ½ã€‚å› æ­¤ï¼ŒCoDLä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°é€‚åº”åˆ°å…¶ä»–æ¨ç†æ¡†æ¶ä¸­ã€‚CoDLæ”¯æŒDLæ¨¡å‹ä¸­å¸¸ç”¨ç®—å­çš„ååŒæ‰§è¡Œï¼ŒåŒ…æ‹¬å·ç§¯ã€å®Œå…¨è¿æ¥å’Œæ± åŒ–ã€‚</p><p>â€‹ä¸ºäº†åœ¨CPUå’ŒGPUä¸Šå®ç°æ··åˆç±»å‹å‹å¥½çš„æ•°æ®å…±äº«ï¼Œæˆ‘ä»¬æ„å»ºäº†åŸºäºOpenCL apiçš„å…±äº«åº“ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨Bufferå’ŒImage2Dåˆ†åˆ«åˆ›å»ºç¼“å†²åŒºå’Œå›¾åƒç±»å‹æ•°æ®ã€‚æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªOpenCLå†…æ ¸æ¥åœ¨ç¼“å†²åŒºå’Œå›¾åƒç±»å‹ä¹‹é—´è½¬æ¢æ•°æ®ã€‚ä¸€æ—¦æ•°æ®è¢«è½¬æ¢ï¼Œæˆ‘ä»¬ä½¿ç”¨enqueueMapBufferæ¥æ˜ å°„æ•°æ®ï¼Œä½¿ç”¨enqueueUnmapMemO- objectæ¥å–æ¶ˆæ˜ å°„ã€‚</p><p>â€‹ä¸ºäº†å®ç°è½»é‡çº§å»¶è¿Ÿé¢„æµ‹å™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¤šç‰¹å¾çº¿æ€§å›å½’æ¨¡å‹ã€‚ä¸ºäº†è®­ç»ƒé¢„æµ‹å™¨ï¼Œæˆ‘ä»¬æ”¶é›†äº†æ•°æ®è½¬æ¢ã€æ˜ å°„å’Œè®¡ç®—çš„æ ·æœ¬ã€‚å¯¹äºæ•°æ®è½¬æ¢å’Œæ˜ å°„ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°æ®å¤§å°ä½œä¸ºç‰¹å¾ã€‚å¯¹äºè®¡ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨(ğ»,ğ‘Š , ğ¼ğ¶, ğ‘‚ğ¶)ä½œä¸ºç‰¹å¾ã€‚</p><p>â€‹æ€»ä¹‹ï¼Œæˆ‘ä»¬åœ¨ç¬¬7èŠ‚ä¸­æ€»å…±ä»5ä¸ªDLæ¨¡å‹ä¸­æ”¶é›†äº†å¤§çº¦6000ä¸ªæ ·æœ¬ã€‚æˆ‘ä»¬åœ¨é‡‡æ ·æœŸé—´å°†CPUå’ŒGPUé¢‘ç‡å›ºå®šä¸ºæœ€å¤§å€¼ã€‚æˆ‘ä»¬è¿è¡Œç®—å­ä»Håˆ°OCï¼ŒÏä»0.1åˆ°1ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221116233836196.png" alt="image-20221116233836196">æˆ‘ä»¬ä½¿ç”¨70%çš„æ ·æœ¬ä½œä¸ºè®­ç»ƒé›†ï¼Œå‰©ä¸‹çš„ç”¨äºæµ‹è¯•ã€‚æˆ‘ä»¬å°†å­¦ä¹ ç‡è®¾ç½®ä¸º0.1ï¼Œå¹¶å¯¹é¢„æµ‹å™¨è¿›è¡Œå¤§çº¦1000ä¸ªå‘¨æœŸçš„è®­ç»ƒã€‚</p><h3 id="7-EVALUATION"><a href="#7-EVALUATION" class="headerlink" title="7 EVALUATION"></a>7 EVALUATION</h3><h4 id="7-1-Experiment-setup"><a href="#7-1-Experiment-setup" class="headerlink" title="7.1 Experiment setup"></a>7.1 Experiment setup</h4><p><strong>Platforms</strong></p><p>Snapdragon 855, 865, 888 and Kirin 990.</p><p><strong>Models</strong></p><p>RetinaFace (RF), YOLOv2 (YOLO) , VGG-16 (VGG) , PoseNet (PN)  and Fast Style Transfer (FST) </p><p>å®ƒä»¬ç”±ä¸åŒæ•°é‡çš„ç®—å­ç»„æˆï¼Œä»14åˆ°61ä¸ç­‰ã€‚æˆ‘ä»¬åœ¨float32ä¸­æ‰§è¡Œè¿™äº›æ¨¡å‹ã€‚æ¯ä¸ªå®éªŒè¿›è¡Œ50æ¬¡ï¼Œå¾—åˆ°å¹³å‡ç»“æœã€‚</p><p><strong>Baselines</strong></p><ul><li>ğœ‡Layer-like :é€šè¿‡FLOPSè¿›è¡Œå»¶è¿Ÿé¢„æµ‹ï¼Œåœ¨CPUä¸FPUä¸Šè¿›è¡Œå¹¶è¡Œè¿ç®—ï¼Œä½†æ˜¯ä½¿ç”¨çš„éƒ½æ˜¯buffer-type</li><li>MACEï¼šå•å¤„ç†å™¨æœºè¿›è¡Œæ¨ç†ï¼Œä½†ä½¿ç”¨çš„æ˜¯å‹å¥½å‹çš„æ•°æ®ç»“æ„</li><li>è®¡ç®—å¹¶è¡Œæ‰§è¡Œç³»ç»Ÿçš„ç†è®ºæ€§èƒ½ä¸Šé™ï¼šæ’é™¤æ•°æ®å…±äº«å¼€é”€ï¼Œå¯¹æ¯ä¸ªç®—å­æ€»æ˜¯é‡‡å–æœ€ä½³åˆ†åŒºæ¯”ä¾‹</li></ul><h4 id="7-2-Overall-performance"><a href="#7-2-Overall-performance" class="headerlink" title="7.2 Overall performance"></a>7.2 Overall performance</h4><p>é™¤éå¦æœ‰è¯´æ˜ï¼ŒCoDLåœ¨Snapdragonå¹³å°ä¸Šä½¿ç”¨å›¾åƒç±»å‹ã€‚ç»“æœå¦‚å›¾15æ‰€ç¤ºã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117220353949.png" alt="image-20221117220353949"></p><p>â€‹æå‡åŸå› ï¼š</p><ol><li>CoDL åœ¨ CPU å’Œ GPU ä¸Šåˆ©ç”¨ç¡¬ä»¶å‹å¥½çš„æ•°æ®ç±»å‹æ¥å……åˆ†åˆ©ç”¨å¤„ç†å™¨</li><li>CoDL åˆ©ç”¨æ··åˆç»´åº¦å’Œç®—å­é“¾æ¥å‡å°‘æ•°æ®å…±äº«å¼€é”€</li><li>CoDL ä½¿ç”¨å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨æ¥å¹³è¡¡å·¥ä½œè´Ÿè½½åˆ†åŒº</li></ol><p>â€‹æ›´é‡è¦çš„æ˜¯ï¼ŒCoDLæ¥è¿‘ç†è®ºæ€§èƒ½ä¸Šé™ï¼Œå› ä¸ºCoDLæˆåŠŸåœ°å‡å°‘äº†æ•°æ®å…±äº«å¼€é”€ï¼Œå¹¶é€šè¿‡ç²¾ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨åº”ç”¨äº†æœ€ä½³çš„åˆ†åŒºæ¯”ä¾‹ã€‚</p><p>â€‹åœ¨éº’éºŸ990å¤„ç†å™¨ä¸Šï¼ŒMali GPUå…·æœ‰L1ç¼“å­˜ï¼Œä½¿å…¶æ›´æœ‰æ•ˆåœ°è®¿é—®ç¼“å†²åŒºç±»å‹çš„æ•°æ®ã€‚å› æ­¤ï¼ŒCoDLåœ¨éº’éºŸå¹³å°çš„CPUå’ŒGPUä¸Šéƒ½ä½¿ç”¨äº†ç¼“å†²åŒºç±»å‹</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117220632515.png" alt="image-20221117220632515"></p><h4 id="7-3-Performance-of-the-hybrid-dimension-partitioning"><a href="#7-3-Performance-of-the-hybrid-dimension-partitioning" class="headerlink" title="7.3 Performance of the hybrid-dimension partitioning"></a>7.3 Performance of the hybrid-dimension partitioning</h4><p>â€‹æˆ‘ä»¬ä½¿ç”¨éªé¾™855ä½œä¸ºå¹³å°ã€‚æˆ‘ä»¬ä¸åº”ç”¨è¿ç®—ç¬¦é“¾ã€‚æˆ‘ä»¬é¦–å…ˆå±•ç¤ºäº†ç”±CoDLå†³å®šçš„åˆ’åˆ†ç»´åº¦åœ¨æ‰€é€‰æ¨¡å‹ä¸Šçš„åˆ†å¸ƒã€‚</p><p>â€‹<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117220823061.png" alt="image-20221117220823061"></p><p>â€‹å¦‚å›¾17æ‰€ç¤ºï¼ŒCoDLé€šè¿‡è€ƒè™‘å†—ä½™å¹¶å‘å’Œè®¡ç®—å¼€é”€æ¥é€‰æ‹©åˆ†åŒºç»´åº¦ã€‚77%çš„Håˆ†åŒºå’Œ23%çš„OCåˆ†åŒºã€‚åŒæ—¶ï¼ŒHç»´åº¦æ›´æœ‰å¯èƒ½ç”¨äºä¸Šé¢çš„å±‚ï¼Œè€Œå¯¹äºä¸‹é¢çš„å±‚ï¼Œæ›´å€¾å‘äºä½¿ç”¨OCã€‚è¿™æ˜¯å› ä¸ºå¸¸è§çš„æ¨¡å‹é€šå¸¸åœ¨ä¸Šå±‚å…·æœ‰è¾ƒå¤§çš„ç‰¹å¾å›¾ï¼Œå…¶ä¸­Håˆ†åŒºæ›´æœ‰æ•ˆï¼Œä»¥é¿å… CPU å’Œ GPU ä¹‹é—´çš„å†—ä½™æ•°æ®å…±äº«ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117221119922.png" alt="image-20221117221119922"></p><p>â€‹å›¾18å±•ç¤ºäº†åœ¨Snapdragon 855ä¸Šä½¿ç”¨å’Œä¸ä½¿ç”¨æ‰€æå‡ºçš„æ··åˆç»´åˆ’åˆ†çš„æ¨ç†å»¶è¿Ÿã€‚</p><h4 id="7-4-Performance-of-the-operator-chain"><a href="#7-4-Performance-of-the-operator-chain" class="headerlink" title="7.4 Performance of the operator chain"></a>7.4 Performance of the operator chain</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117221250107.png" alt="image-20221117221250107"></p><p>â€‹åœ¨é€‰å®šçš„æ¨¡å‹ä¸Šï¼Œå¹³å‡è¶…è¿‡72%çš„æ“ä½œç¬¦å¯ä»¥é“¾æ¥åœ¨ä¸€èµ·ï¼Œè¿™å¤§å¤§é™ä½äº†æ•°æ®å…±äº«å¼€é”€ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117221330378.png" alt="image-20221117221330378"></p><p>â€‹å›¾20è¯´æ˜äº†æœ‰å’Œæ²¡æœ‰æ“ä½œé“¾çš„æ•°æ®å…±äº«å¼€é”€ã€‚ç”±äºå‡å°‘äº†å†—ä½™æ•°æ®è½¬æ¢å’Œæ•°æ®å…±äº«æ—¶é—´ï¼Œå¯¹äºæ‰€é€‰æ¨¡å‹ï¼Œå¸¦æœ‰æ“ä½œé“¾çš„CoDLå¹³å‡å‡å°‘äº†55%çš„å¼€é”€ã€‚</p><h4 id="7-5-Performance-of-the-latency-predictor"><a href="#7-5-Performance-of-the-latency-predictor" class="headerlink" title="7.5 Performance of the latency predictor"></a>7.5 Performance of the latency predictor</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117221539494.png" alt="image-20221117221539494"></p><p>â€‹æˆ‘ä»¬å°†åŸºäºflopsçš„é¢„æµ‹å™¨ä½œä¸ºåŸºå‡†ï¼Œåœ¨SOTAæ¨ç†ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚åŸºäºflopsçš„é¢„æµ‹å™¨è€ƒè™‘æ¨¡å‹çš„flopsä¸ªæ•°ï¼Œå»ºç«‹ä¸€ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹æ¥é¢„æµ‹å»¶è¿Ÿã€‚å¦‚å›¾æ‰€ç¤ºï¼ŒåŸºäºflopsçš„é¢„æµ‹å™¨åœ¨æµ‹è¯•å¹³å°ä¸Šçš„å¹³å‡å‡†ç¡®ç‡ä»…ä¸º8.95%ã€‚è€ƒè™‘åˆ°éçº¿æ€§ç‰¹æ€§å’Œå¹¶å‘å¼€é”€ï¼Œæˆ‘ä»¬çš„å»¶è¿Ÿé¢„æµ‹å™¨åœ¨æµ‹è¯•å¹³å°ä¸Šçš„å¹³å‡å‡†ç¡®ç‡åˆ†åˆ«ä¸º84.03%ã€85.17%å’Œ82.96%ã€‚å‡†ç¡®çš„å»¶è¿Ÿé¢„æµ‹å¯¼è‡´CPUå’ŒGPUä¹‹é—´å¹³è¡¡çš„å·¥ä½œè´Ÿè½½åˆ†åŒºï¼Œè¿™åè¿‡æ¥åŠ å¿«äº†æ¨æ–­ã€‚</p><p>â€‹æ›´é‡è¦çš„æ˜¯ï¼Œæ‰€å®ç°çš„ç²¾åº¦ç”šè‡³å¯ä»¥ä¸é»‘ç›’å»¶è¿Ÿé¢„æµ‹æ¨¡å‹ç›¸åª²ç¾ï¼Œä¾‹å¦‚nn-meterã€‚åœ¨äº†è§£ç¡¬ä»¶ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œè®¾è®¡äº†é’ˆå¯¹ç§»åŠ¨socçš„å°è€Œæœ‰æ•ˆçš„é¢„æµ‹å™¨ã€‚æˆ‘ä»¬çš„é¢„æµ‹å™¨çš„æ¨¡å‹å¤§å°åªæœ‰500å­—èŠ‚å·¦å³ï¼Œè€Œnn-meterçš„å¤§å°æ¥è¿‘800 MBï¼Œä¸é€‚åˆåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿›è¡Œåœ¨çº¿é¢„æµ‹</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117221833026.png" alt="image-20221117221833026"></p><p>â€‹æ­¤å¤–ï¼Œæ‰€æå‡ºçš„é¢„æµ‹å™¨æ˜¯éå¸¸è½»é‡çº§çš„ã€‚æ¯æ¬¡é¢„æµ‹åªéœ€è¦0.2-0.5msã€‚å¯¹äºé¢„æµ‹å™¨ï¼Œæˆ‘ä»¬æ”¶é›†äº†å¤§çº¦6000ä¸ªæ ·æœ¬ã€‚è¿™ç§ä¸€æ¬¡æ€§å·¥ä½œåœ¨ç›®æ ‡è®¾å¤‡ä¸ŠèŠ±è´¹å¤§çº¦1.5å°æ—¶ã€‚æ ¹æ®æˆ‘ä»¬çš„è¯„ä¼°ï¼Œè®­ç»ƒè¿‡ç¨‹å¤§çº¦éœ€è¦1-2ç§’ã€‚</p><h4 id="7-6-System-overhead"><a href="#7-6-System-overhead" class="headerlink" title="7.6 System overhead"></a>7.6 System overhead</h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»åŠŸç‡ã€èƒ½é‡æ¶ˆè€—å’Œå†…å­˜ä½¿ç”¨æ–¹é¢è¯„ä¼°CoDLçš„ç³»ç»Ÿå¼€é”€</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117222350506.png" alt="image-20221117222350506"></p><p>â€‹ä¸MACEä¸Šçš„CPUå’ŒGPUç›¸æ¯”ï¼ŒCoDLçš„å¹³å‡åŠŸè€—åˆ†åˆ«æé«˜äº†28.9%å’Œ129.5%ã€‚</p><p>â€‹CoDLåˆ©ç”¨äº†å¯¹CPUå’ŒGPUå‹å¥½çš„æ•°æ®ç±»å‹ï¼Œå¯¼è‡´äº†æ›´é«˜çš„ç¡¬ä»¶åˆ©ç”¨ç‡ï¼ŒåŠŸè€—å¢åŠ äº†22.2%ï¼Œç›¸æ¯”äºä½¿ç”¨ç»Ÿä¸€æ•°æ®ç±»å‹çš„Î¼playerã€‚</p><p>â€‹å›¾21bæ˜¾ç¤ºäº†CoDLæ¯æ¬¡æ¨ç†çš„å¹³å‡èƒ½è€—ä»¥åŠæ‰€é€‰æ¨¡å‹çš„åŸºçº¿ã€‚</p><p>â€‹ä¸MACEä¸Šçš„CPUæ¨æ–­ç›¸æ¯”ï¼Œæˆ‘ä»¬é™ä½äº†å°†è¿‘38.7%çš„èƒ½è€—ã€‚CoDLè¿˜å¯ä»¥æ¯”Î¼playerå¹³å‡èŠ‚çœ62.3%çš„èƒ½æºæˆæœ¬ã€‚ä½†ä¸MACEä¸Šçš„GPUç›¸æ¯”ï¼ŒCoDLçš„èƒ½è€—å¢åŠ äº†52.0%ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/image-20221117222746827.png" alt="image-20221117222746827"></p><p>â€‹ä¸ºäº†æ”¯æŒååŒæ‰§è¡Œï¼ŒCoDLåˆ†é…é¢å¤–çš„å†…å­˜ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨æ‰€é€‰æ¨¡å‹ä¸Šï¼ŒCoDLæ¯”MACEå¤šæ¶ˆè€—å¤§çº¦25.97%çš„å†…å­˜ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡ŒVGGæ—¶ï¼ŒCoDLæ€»å…±ä½¿ç”¨å¤§çº¦909.02 MBå†…å­˜ï¼Œè€ŒMACEå¤§çº¦å ç”¨645.55 MBå†…å­˜ã€‚</p><h4 id="8-DISCUSSION"><a href="#8-DISCUSSION" class="headerlink" title="8 DISCUSSION"></a>8 DISCUSSION</h4><p><strong>Generality of CoDL</strong></p><p>â€‹CoDL æ˜¯ä¸€ç§è½¯ä»¶ä¼˜åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³ç”±äºä¸äº†è§£å¹³å°ç‰¹æ€§å’Œæ•°æ®å…±äº«å¼€é”€è€Œå¯¼è‡´çš„æ•ˆç‡é—®é¢˜ï¼Œä»è€Œå®ç°è®¾å¤‡ä¸Š CPU å’Œ GPU çš„é«˜æ•ˆå¹¶å‘è¿è¡Œã€‚</p><p>â€‹è™½ç„¶æˆ‘ä»¬åœ¨MACEä¸Šå®ç°äº†CoDLï¼Œä½†å¹¶å‘æ„ŸçŸ¥å»¶è¿Ÿé¢„æµ‹å’ŒCPUå’ŒGPUä¹‹é—´çš„æ··åˆæ•°æ®å…±äº«çš„æ€æƒ³å¯ä»¥å¾ˆå®¹æ˜“åœ°åº”ç”¨åˆ°å…¶ä»–ç§»åŠ¨æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œå¦‚TensorFlow Liteå’ŒMNNã€‚é€šè¿‡åˆ†æå¸¸ç”¨çš„è¿ç®—ç¬¦ï¼ŒCoDLå¯ä»¥è‡ªé€‚åº”åœ°ä¸ºå„ç§gpué€‰æ‹©å¤„ç†å™¨å‹å¥½çš„æ•°æ®ç±»å‹ã€‚</p><p>â€‹ç„¶è€Œï¼Œå¦‚æœæ–°æ¨¡å‹ä¸­æœ‰ä¸€äº›ä¸å—æ”¯æŒçš„ç®—å­ï¼ŒCoDLå°±éœ€è¦å¤§é‡çš„å»¶è¿Ÿåˆ†æå’Œå»ºæ¨¡ï¼Œè¿™å°†èŠ±è´¹æ›´å¤šçš„æ—¶é—´</p><p><strong>Limitation and future work</strong></p><p>â€‹ä¸¤å¤§å±€é™ï¼š</p><ol><li>é¦–å…ˆï¼Œç”±äº CPU å’Œ GPU çš„å¹¶å‘è¿è¡Œï¼ŒCoDL æ¯”å•å¤„ç†å™¨è§£å†³æ–¹æ¡ˆæ¶ˆè€—æ›´å¤šçš„åŠŸç‡ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨DNNæ¨¡å‹æ¨ç†çš„åŸºç¡€ä¸Šæ‰©å±•é¢„æµ‹å™¨æ¥å¯¹CPUå’ŒGPUçš„åŠŸè€—è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ï¼Œè¿™æ ·CoDLå°±å¯ä»¥åœ¨èƒ½é‡æ¶ˆè€—å’Œå»¶è¿Ÿä¹‹é—´å–å¾—å¹³è¡¡ã€‚</li><li>å…¶æ¬¡ï¼ŒCoDL å¾ˆéš¾å®ç° MobileNetç­‰è½»é‡çº§ DL æ¨¡å‹çš„åŠ é€Ÿï¼Œå› ä¸ºåˆ†åŒºå¯¼è‡´çš„æ•°æ®å…±äº«å¼€é”€å¾ˆå®¹æ˜“æ”¯é…å°å‹ç®—å­ CPU å’Œ GPU å¹¶å‘è¿è¡Œå¸¦æ¥çš„å¢ç›Šã€‚</li></ol><p>â€‹åœ¨æœªæ¥çš„å·¥ä½œä¸­ï¼Œä¸ºäº†é€‚åº”æ›´åŠ¨æ€çš„å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬è®¡åˆ’æ‰©å±•é¢„æµ‹å™¨ï¼Œæ ¹æ®CPUå’ŒGPUåˆ©ç”¨ç‡æ¥è°ƒæ•´é¢„æµ‹çš„å»¶è¿Ÿã€‚è¿™æ ·ï¼Œåˆ†åŒºè§„åˆ’å¯ä»¥æ›´çµæ´»ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œå› ä¸ºåå°å­˜åœ¨å¤æ‚çš„èµ„æºè°ƒåº¦å’Œç«äº‰ã€‚</p><p>â€‹å¯¹äºåˆ©ç”¨æ—©æœŸç»ˆæ­¢çš„æ¨¡å‹ç­‰å®æ—¶å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•æ¨¡å‹ä¸­æ¯ä¸ªç»ˆæ­¢ç‚¹çš„ç»ˆæ­¢æ¦‚ç‡ã€‚åœ¨å¤šæ¬¡æ‰§è¡Œæ¨¡å‹åï¼Œæ¯ä¸ªç‚¹çš„ç»ˆæ­¢æ¦‚ç‡æ”¶æ•›ã€‚ç„¶åï¼ŒCoDLå¯ä»¥æ ¹æ®æ¯ä¸ªç‚¹çš„ç»ˆæ­¢æ¦‚ç‡æ¥åˆ¶å®šåˆ†åŒºè®¡åˆ’ï¼Œè¿™æ ·åˆ†åŒºæ‰§è¡Œå¹³å‡æ¥è¯´æ›´æœ‰æ•ˆã€‚</p><p><strong>Extended discussion.</strong></p><p>â€‹è¿™é¡¹å·¥ä½œè¡¨æ˜ï¼Œç§»åŠ¨SoCçš„å…·ä½“è®¾è®¡ï¼Œå³CPUå’ŒGPUå…±äº«å†…å­˜ï¼Œæ˜¯CPUå’ŒGPUå¹¶è¡Œè¿è¡Œèƒ½å¤ŸåŠ é€ŸDLæ¨¡å‹æ¨ç†çš„æ ¹æœ¬åŸå› ã€‚ä½†æ˜¯ï¼Œå®ƒæ¶‰åŠæ•°æ®å…±äº«å¼€é”€ï¼ŒåŒ…æ‹¬æ•°æ®è½¬æ¢å’ŒåŒæ­¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªä¸“ç”¨çš„åŸºäºç¡¬ä»¶çš„æ•°æ®è½¬æ¢å™¨å¯¹äºå‡å°‘æ•°æ®è½¬æ¢å¼€é”€éå¸¸æœ‰å¸®åŠ©ã€‚æ­¤å¤–ï¼ŒOpenCLçš„æ›´å¥½å®ç°å¯ä»¥å‡å°‘åŒæ­¥å¼€é”€ã€‚</p><h4 id="9-RELATED-WORK"><a href="#9-RELATED-WORK" class="headerlink" title="9 RELATED WORK"></a>9 RELATED WORK</h4><p><strong>Co-execution of heterogeneous processors.</strong></p><p>â€‹ä¸€äº›ç°æœ‰çš„å·¥ä½œæ¢ç´¢äº†åŒæ—¶åˆ©ç”¨è®¾å¤‡ä¸Šçš„CPUå’ŒGPUæ¥ä¼˜åŒ–ç§»åŠ¨è®¾å¤‡ä¸Šçš„DLæ€§èƒ½ã€‚</p><p>â€‹OPTIC è°ƒä¼˜CPUå’ŒGPUçš„å·¥ä½œè´Ÿè½½åˆ†åŒºå’Œæ ¸å¿ƒé¢‘ç‡ï¼Œä½¿å…¶ä¿æŒåœ¨çƒ­çº¦æŸèŒƒå›´å†…ã€‚</p><p>â€‹Î¼player åŒæ—¶ä½¿ç”¨CPUå’ŒGPUï¼Œé€šè¿‡æ•°æ®é‡åŒ–å’Œå·¥ä½œè´Ÿè½½åˆ†åŒºæ¥åŠ é€ŸDLæ¨ç†ã€‚ä½†æ˜¯ä¸CoDLç›¸æ¯”ï¼Œå®ƒå¿½ç•¥äº†ååŒæ‰§è¡Œä¸­çœŸæ­£çš„æ€§èƒ½é—®é¢˜ï¼Œå¦‚æ•°æ®å…±äº«å¼€é”€å’Œç”±ç¡¬ä»¶ç‰¹æ€§å¼•èµ·çš„éçº¿æ€§å“åº”å»¶è¿Ÿã€‚é€šè¿‡è€ƒè™‘è¿™äº›å› ç´ ï¼ŒCoDLæˆåŠŸåœ°å‡å°‘äº†æ•°æ®å…±äº«å¼€é”€ï¼Œå¹¶æœ€ä½³åœ°å¹³è¡¡äº†å·¥ä½œè´Ÿè½½åˆ†åŒº</p><p>â€‹ æ­¤å¤–ï¼ŒCoDLæœ‰åŠ©äºå‡å°‘æ¯ä¸ªDLæ¨¡å‹æ¨ç†çš„å»¶è¿Ÿï¼Œè€Œè¿™ä¸èƒ½é€šè¿‡æµæ°´çº¿å¹¶è¡Œæ¥å®ç°</p><p><strong>Performance prediction for DL inference.</strong></p><p>â€‹å·²æœ‰çš„ç ”ç©¶é€šè¿‡è®¾è®¡å»¶è¿Ÿé¢„æµ‹æ¨¡å‹æ¥å¯»æ‰¾é«˜æ•ˆçš„æ¨¡å‹ä½“ç³»ç»“æ„ã€‚cai æå‡ºäº†ä¸€ä¸ªä»¥æ¨¡å‹é…ç½®å‚æ•°ä¸ºç‰¹å¾çš„å¤šé¡¹å¼å›å½’æ¨¡å‹ï¼Œä½†è¯¥æ¨¡å‹æ— æ³•æ•æ‰åˆ°åº•å±‚å¹³å°ç‰¹å¾çš„å½±å“ï¼Œè€Œå®ƒåœ¨å®è·µä¸­å¯èƒ½å ä¸»å¯¼åœ°ä½ã€‚nn-Meteråœ¨è¿è¡Œæ—¶è€ƒè™‘äº†å¤šä¸ªç®—å­çš„èåˆï¼Œä½¿ç”¨é»‘ç›’éšæœºæ£®æ—æ¨¡å‹é¢„æµ‹æ—¶å»¶ã€‚ä¸ç°æœ‰å·¥ä½œä¸åŒçš„æ˜¯ï¼ŒCoDLä¸­çš„é¢„æµ‹å™¨è€ƒè™‘äº†å¤„ç†å™¨ç‰¹æ€§å¼•èµ·çš„å»¶è¿Ÿæ¨¡å¼å’Œå¹¶å‘ç‰¹å®šçš„å¼€é”€ï¼Œä½¿å¾—é¢„æµ‹å™¨æ˜æ˜¾æ›´åŠ è½»ä¾¿å’Œå‡†ç¡®ã€‚</p><p><strong>Acceleration of DL inference on mobile devices.</strong></p><p>â€‹è®¸å¤šå·¥ä½œéƒ½åœ¨åŠªåŠ›æ›´å¥½åœ°åˆ©ç”¨è®¾å¤‡ä¸Šçš„å¤„ç†å™¨æ¥åŠ é€ŸDLæ¨ç†</p><h3 id="10-CONCLUSION"><a href="#10-CONCLUSION" class="headerlink" title="10 CONCLUSION"></a>10 CONCLUSION</h3><p>â€‹åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ç”¨äºé«˜æ•ˆDLæ¨æ–­çš„CPU-GPUååŒæ‰§è¡Œæ¡†æ¶CoDLã€‚CoDLæ™ºèƒ½åœ°å¹³è¡¡äº†æ•°æ®å…±äº«å’Œè®¡ç®—çš„å¼€é”€ï¼Œæ–¹æ³•æ˜¯ä»æ··åˆç»´åº¦å¯¹æ“ä½œç¬¦è¿›è¡Œè‡ªé€‚åº”åˆ’åˆ†ï¼Œå¹¶å°†æ“ä½œç¬¦é“¾æ¥èµ·æ¥ä»¥å‡å°‘æ•°æ®å…±äº«æ—¶é—´ã€‚æ­¤å¤–ï¼Œé€šè¿‡è®¾è®¡ä¸€ä¸ªè½»é‡çº§ä½†ç²¾ç¡®çš„å»¶è¿Ÿé¢„æµ‹å™¨ï¼ŒCoDLå…¬å¹³åœ°å°†å·¥ä½œè´Ÿè½½åˆ†é…åˆ°å¼‚æ„å¤„ç†å™¨ä¸Šï¼Œè¯¥é¢„æµ‹å™¨è€ƒè™‘äº†è”åˆæ‰§è¡Œçš„å¼€é”€å’Œéçº¿æ€§å¹³å°ç‰¹æ€§ã€‚æˆ‘ä»¬åœ¨ä¸»æµç¡¬ä»¶å¹³å°ä¸Šå¯¹CoDLè¿›è¡Œäº†è¯„ä¼°ï¼Œç»“æœè¡¨æ˜ï¼Œä¸SOTAååŒæ‰§è¡Œç³»ç»Ÿç›¸æ¯”ï¼ŒCoDLçš„å¹³å‡é€Ÿåº¦æé«˜äº†3.43Ã—ï¼ŒèŠ‚èƒ½62.3%ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è®ºæ–‡ç¬”è®°</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MobiSys</tag>
      
      <tag>notes</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œç¬¬ç¬¬ä¸€ç«  æ¦‚è¿°</title>
    <link href="/2022/11/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    <url>/2022/11/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ç« -æ¦‚è¿°"><a href="#è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ç« -æ¦‚è¿°" class="headerlink" title="è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ç«  æ¦‚è¿°"></a>è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ç«  æ¦‚è¿°</h2><h3 id="1-1-äº’è”ç½‘æ¦‚è¿°åŠç»„æˆ"><a href="#1-1-äº’è”ç½‘æ¦‚è¿°åŠç»„æˆ" class="headerlink" title="1.1 äº’è”ç½‘æ¦‚è¿°åŠç»„æˆ"></a>1.1 äº’è”ç½‘æ¦‚è¿°åŠç»„æˆ</h3><h4 id="äº’è”ç½‘çš„ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹"><a href="#äº’è”ç½‘çš„ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹" class="headerlink" title="äº’è”ç½‘çš„ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹"></a>äº’è”ç½‘çš„ä¸¤ä¸ªé‡è¦åŸºæœ¬ç‰¹ç‚¹</h4><ul><li>è¿é€šæ€§ï¼šä½¿ä¸Šç½‘ç”¨æˆ·ä¹‹é—´éƒ½å¯ä»¥äº¤æ¢ä¿¡æ¯(æ•°æ®ï¼Œä»¥åŠå„ç§éŸ³é¢‘è§†é¢‘) ï¼Œå¥½åƒè¿™äº›ç”¨æˆ·çš„è®¡ç®—æœºéƒ½å¯ä»¥å½¼æ­¤ç›´æ¥è¿é€šä¸€æ ·ã€‚</li><li>å…±äº«ï¼šå³èµ„æºå…±äº«</li></ul><p>â€‹&#x3D;&#x3D;äº’è¿ç½‘&#x3D;&#x3D;æ˜¯ç½‘ç»œçš„ç½‘ç»œï¼Œç½‘ç»œæŠŠè®¸å¤šè®¡ç®—æœºè¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œäº’è¿ç½‘åˆ™æŠŠè®¸å¤šç½‘ç»œé€šè¿‡è·¯ç”±å™¨è¿æ¥åœ¨ä¸€èµ·ã€‚ä¸ç½‘ç»œç›¸è¿çš„è®¡ç®—æœºå¸¸ç§°ä¸ºä¸»æœºï¼ˆhostï¼‰ã€‚</p><hr><h4 id="äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"><a href="#äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ"></a>äº’è”ç½‘åŸºç¡€ç»“æ„å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ</h4><p>â€‹ä¸€ã€å•ä¸ªç½‘ç»œARPANETå‘äº’è¿ç½‘å‘å±•çš„è¿‡ç¨‹</p><p>â€‹<em>æ³¨æ„åŒºåˆ†internetå’ŒInternetï¼Œä»¥å°å†™å­—æ¯iå¼€å¤´çš„internetï¼ˆäº’è¿ç½‘ï¼‰æ˜¯ä¸€ä¸ªé€šç”¨åè¯ï¼Œå®ƒæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿è€Œæˆçš„è®¡ç®—æœºç½‘ç»œï¼›ä»¥å¤§å†™å­—æ¯Iå¼€å¤´çš„Internetï¼ˆäº’è”ç½‘&#x2F;å› ç‰¹ç½‘ï¼‰åˆ™æ˜¯ä¸€ä¸ªä¸“ç”¨åè¯ï¼Œå®ƒæŒ‡å½“å‰å…¨çƒæœ€å¤§çš„ã€å¼€æ”¾çš„ã€ç”±ä¼—å¤šç½‘ç»œç›¸äº’è¿æ¥è€Œæˆçš„ç‰¹å®šäº’è¿ç½‘ï¼Œå®ƒé‡‡ç”¨TCP&#x2F;IPåè®®æ—ä½œä¸ºé€šä¿¡çš„è§„åˆ™</em></p><p>â€‹äºŒã€å»ºæˆäº†ä¸‰çº§ç»“æ„çš„äº’è”ç½‘</p><p>â€‹ä¸‰ã€é€æ¸å½¢æˆäº†å¤šå±‚æ¬¡ISPç»“æ„çš„äº’è”ç½‘ï¼ŒåŒæ—¶å‡ºç°äº†æ–°çš„åè¯æ¦‚å¿µï¼šäº’è”ç½‘æœåŠ¡æä¾›è€…ISPï¼ˆInternet Service Providerï¼‰ã€‚</p><hr><h4 id="äº’è”ç½‘çš„ç»„æˆ"><a href="#äº’è”ç½‘çš„ç»„æˆ" class="headerlink" title="äº’è”ç½‘çš„ç»„æˆ"></a>äº’è”ç½‘çš„ç»„æˆ</h4><p>â€‹ä»äº’è”ç½‘çš„å·¥ä½œæ–¹å¼ä¸Šæ¥çœ‹ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸¤å¤§å—ï¼š</p><h5 id="ï¼ˆ1ï¼‰è¾¹ç¼˜éƒ¨åˆ†"><a href="#ï¼ˆ1ï¼‰è¾¹ç¼˜éƒ¨åˆ†" class="headerlink" title="ï¼ˆ1ï¼‰è¾¹ç¼˜éƒ¨åˆ†"></a>ï¼ˆ1ï¼‰è¾¹ç¼˜éƒ¨åˆ†</h5><p>â€‹ç”±æ‰€æœ‰è¿æ¥åœ¨äº’è”ç½‘ä¸Šçš„ä¸»æœºç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨çš„ï¼Œç”¨æ¥è¿›è¡Œé€šä¿¡ï¼ˆä¼ é€æ•°æ®ã€éŸ³é¢‘æˆ–è§†é¢‘ï¼‰å’Œèµ„æºå…±äº«ã€‚</p><p>â€‹åœ¨ç½‘ç»œè¾¹ç¼˜çš„ç«¯ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡æ–¹å¼é€šå¸¸å¯ä»¥åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šå®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ï¼ˆC&#x2F;Sæ–¹å¼ï¼‰å’Œå¯¹ç­‰æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰ã€‚</p><ul><li>å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼<br>å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ã€‚</li><li>å¯¹ç­‰è¿æ¥æ–¹å¼</li></ul><h5 id="ï¼ˆ2ï¼‰æ ¸å¿ƒéƒ¨åˆ†"><a href="#ï¼ˆ2ï¼‰æ ¸å¿ƒéƒ¨åˆ†" class="headerlink" title="ï¼ˆ2ï¼‰æ ¸å¿ƒéƒ¨åˆ†"></a>ï¼ˆ2ï¼‰æ ¸å¿ƒéƒ¨åˆ†</h5><p>â€‹ç”±å¤§é‡ç½‘ç»œå’Œè¿æ¥è¿™äº›ç½‘ç»œçš„è·¯ç”±å™¨ç»„æˆã€‚è¿™éƒ¨åˆ†æ˜¯ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡çš„ï¼ˆæä¾›è¿é€šæ€§å’Œäº¤æ¢ï¼‰ã€‚</p><hr><h4 id="ç«¯åˆ°ç«¯åŸåˆ™æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"><a href="#ç«¯åˆ°ç«¯åŸåˆ™æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ" class="headerlink" title="ç«¯åˆ°ç«¯åŸåˆ™æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ"></a><strong>ç«¯åˆ°ç«¯åŸåˆ™æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿ</strong></h4><ul><li>è¾¹ç¼˜æ™ºèƒ½ï¼Œæ ¸å¿ƒç®€å•ï¼šç«¯ç³»ç»Ÿå¤„ç†èƒ½åŠ›æ—¥ç›Šå¢å¼ºï¼Œç”¨è½¯ä»¶æ¥å¢å¼ºç½‘ç»œåè®®çš„å¤„ç†èƒ½åŠ›ï¼Œæ€§ä»·æ¯”ä¸æ–­æé«˜ï¼Œé™ä½ç½‘ç»œçš„å¤æ‚æ€§ï¼Œç­‰ä»·äºæå‡ç½‘ç»œçš„ä¼ è¾“é€Ÿç‡ï¼Œä¹Ÿç­‰ä»·äºå¢å¼ºç½‘ç»œé€‚åº”æ–°å…´åº”ç”¨çš„çµæ´»æ€§ï¼Œé™ä½ç½‘ç»œçš„è´Ÿæ‹…ï¼Œä½¿ç½‘ç»œå¤„ç†èƒ½åŠ›éƒ½ç”¨äºäº¤æ¢åˆ†ç»„ã€‚</li></ul><hr><h4 id="è·¯ç”±å™¨ä¹‹é—´é‡‡ç”¨åˆ†ç»„äº¤æ¢çš„æ¨¡å¼ã€‚"><a href="#è·¯ç”±å™¨ä¹‹é—´é‡‡ç”¨åˆ†ç»„äº¤æ¢çš„æ¨¡å¼ã€‚" class="headerlink" title="è·¯ç”±å™¨ä¹‹é—´é‡‡ç”¨åˆ†ç»„äº¤æ¢çš„æ¨¡å¼ã€‚"></a>è·¯ç”±å™¨ä¹‹é—´é‡‡ç”¨åˆ†ç»„äº¤æ¢çš„æ¨¡å¼ã€‚</h4><p><strong>åˆ†ç»„äº¤æ¢å·¥ä½œè¦ç‚¹ï¼šå•ä¸ªåˆ†ç»„ï¼ˆæ•´ä¸ªæŠ¥æ–‡ä¸€éƒ¨åˆ†ï¼‰ä¼ é€åˆ°ç›¸é‚»ç»“ç‚¹ï¼Œå­˜å‚¨ä¸‹æ¥åæŸ¥æ‰¾è½¬å‘è¡¨ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ç»“ç‚¹ã€‚</strong></p><ul><li><p>1ã€åœ¨å‘é€ç«¯ï¼Œå…ˆæŠŠè¾ƒé•¿æŠ¥æ–‡åˆ’åˆ†æˆè¾ƒçŸ­çš„ã€å›ºå®šé•¿åº¦çš„æ•°æ®æ®µï¼›</p></li><li><p>2ã€æ¯ä¸ªæ•°æ®æ®µå‰é¢æ·»åŠ é¦–éƒ¨æ„æˆåˆ†ç»„ï¼›</p></li><li><p>3ã€ä»¥â€œåˆ†ç»„â€ä½œä¸ºä¼ é€çš„æ•°æ®å•å…ƒï¼Œä¾æ¬¡æŠŠå„åˆ†ç»„å‘é€åˆ°æ¥æ”¶ç«¯ï¼›</p></li><li><p>4ã€æ¥æ”¶ç«¯æŠŠæ”¶åˆ°çš„æ•°æ®æ¢å¤æˆåŸæ¥çš„æŠ¥æ–‡ã€‚</p></li><li><p>åˆ†ç»„äº¤æ¢çš„ä¼˜ç‚¹ï¼šé«˜æ•ˆã€çµæ´»ã€è¿…é€Ÿã€å¯é </p></li></ul><table><thead><tr><th>ä¼˜ç‚¹</th><th>æ‰€é‡‡ç”¨çš„æ‰‹æ®µ</th></tr></thead><tbody><tr><td>é«˜æ•ˆ</td><td>åœ¨åˆ†ç»„ä¼ è¾“çš„è¿‡ç¨‹ä¸­<strong>åŠ¨æ€åˆ†é…ä¼ è¾“å¸¦å®½</strong>ï¼Œå¯¹é€šä¿¡é“¾è·¯<strong>é€æ®µå ç”¨</strong></td></tr><tr><td>çµæ´»</td><td>ä¸ºæ¯ä¸€ä¸ªåˆ†ç»„<strong>ç‹¬ç«‹åœ°é€‰æ‹©æœ€åˆé€‚çš„è½¬å‘è·¯ç”±</strong></td></tr><tr><td>è¿…é€Ÿ</td><td>ä»¥åˆ†ç»„ä½œä¸ºä¼ é€å•ä½ï¼Œä¸å…ˆå»ºç«‹è¿æ¥å°±èƒ½å‘å…¶ä»–ä¸»æœºå‘é€åˆ†ç»„</td></tr><tr><td>å¯é </td><td>ä¿è¯å¯é æ€§çš„ç½‘ç»œåè®®ï¼›åˆ†å¸ƒå¼å¤šè·¯ç”±çš„åˆ†ç»„äº¤æ¢ç½‘ï¼Œä½¿ç½‘ç»œæœ‰å¾ˆå¥½çš„ç”Ÿå­˜æ€§</td></tr></tbody></table><hr><h4 id="ç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢çš„ç‰¹ç‚¹ã€æ–¹å¼ã€æ•ˆç‡ã€å¯¹æ¯”"><a href="#ç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢çš„ç‰¹ç‚¹ã€æ–¹å¼ã€æ•ˆç‡ã€å¯¹æ¯”" class="headerlink" title="ç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢çš„ç‰¹ç‚¹ã€æ–¹å¼ã€æ•ˆç‡ã€å¯¹æ¯”"></a>ç”µè·¯äº¤æ¢ã€åˆ†ç»„äº¤æ¢ã€æŠ¥æ–‡äº¤æ¢çš„ç‰¹ç‚¹ã€æ–¹å¼ã€æ•ˆç‡ã€å¯¹æ¯”</h4><table><thead><tr><th align="left">äº¤æ¢ç±»å‹</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td align="left">ç”µè·¯äº¤æ¢</td><td>æ•´ä¸ªæŠ¥æ–‡çš„æ¯”ç‰¹æµè¿ç»­åœ°ä»æºç‚¹ç›´è¾¾ç»ˆç‚¹ï¼Œå¥½åƒåœ¨ä¸€ä¸ªç®¡é“ä¸­ä¼ é€</td></tr><tr><td align="left">æŠ¥æ–‡äº¤æ¢</td><td><strong>æ•´ä¸ªæŠ¥æ–‡</strong>å…ˆä¼ é€åˆ°ç›¸é‚»èŠ‚ç‚¹ï¼Œå…¨éƒ¨å­˜å‚¨ä¸‹æ¥åæŸ¥æ‰¾è½¬å‘è¡¨ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</td></tr><tr><td align="left">åˆ†ç»„äº¤æ¢</td><td>å•ä¸ªåˆ†ç»„ï¼ˆè¿™åªæ˜¯<strong>æ•´ä¸ªæŠ¥æ–‡çš„ä¸€éƒ¨åˆ†</strong>ï¼‰ä¼ é€åˆ°ç›¸é‚»èŠ‚ç‚¹ï¼Œå­˜å‚¨ä¸‹æ¥ä»¥åæŸ¥æ‰¾è½¬å‘è¡¨ï¼Œè½¬å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</td></tr></tbody></table><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/ff3fef0895864ca7bf51aae55fec685e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/3a6c213aa821400ca79aa9b61a3abfe7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/3abd2be003d048068a1c268fb521325d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/b98cc3ae3e934d6089453ea388aa154a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ€»ç»“</strong></p><ul><li>è‹¥è¦è¿ç»­å‘é€å¤§é‡æ•°æ®ï¼Œä¸”å…¶ä¼ é€æ—¶é—´è¿œå¤§äºè¿æ¥å»ºç«‹æ—¶é—´ï¼Œåˆ™ç”µè·¯äº¤æ¢çš„ä¼ è¾“é€Ÿç‡è¾ƒå¿«ã€‚</li><li>æŠ¥æ–‡äº¤æ¢å’Œåˆ†ç»„äº¤æ¢ä¸éœ€è¦é¢„å…ˆåˆ†é…ä¼ è¾“å¸¦å®½ï¼Œåœ¨ä¼ é€çªå‘æ•°æ®æ—¶å¯æé«˜æ•´ä¸ªç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡ã€‚</li><li>ç”±äºä¸€ä¸ªåˆ†ç»„çš„é•¿åº¦å¾€å¾€è¿œå°äºæ•´ä¸ªæŠ¥æ–‡çš„é•¿åº¦ï¼Œå› æ­¤åˆ†ç»„äº¤æ¢æ¯”æŠ¥æ–‡äº¤æ¢çš„æ—¶å»¶å°ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰æ›´å¥½çš„çµæ´»æ€§ã€‚</li><li>åœ¨è¿‡å»å¾ˆé•¿çš„æ—¶æœŸï¼Œäººä»¬éƒ½æœ‰è¿™æ ·çš„æ¦‚å¿µï¼šç”µè·¯äº¤æ¢é€‚åˆäºè¯éŸ³é€šä¿¡ï¼Œè€Œåˆ†ç»„äº¤æ¢åˆ™é€‚åˆäºæ•°æ®é€šä¿¡ã€‚ç„¶è€Œéšç€èœ‚çªç§»åŠ¨é€šä¿¡çš„å‘å±•ï¼Œè¿™ç§æ¦‚å¿µå·²ç»å‘ç”Ÿäº†æ ¹æœ¬çš„å˜åŒ–ã€‚ä»ç¬¬å››ä»£èœ‚çªç§»åŠ¨é€šä¿¡ç½‘å¼€å§‹ï¼Œæ— è®ºæ˜¯è¯éŸ³é€šä¿¡è¿˜æ˜¯æ•°æ®é€šä¿¡ï¼Œéƒ½è¦é‡‡ç”¨åˆ†ç»„äº¤æ¢ã€‚</li></ul><hr><h3 id="1-2-è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«ã€æ€§èƒ½æŒ‡æ ‡"><a href="#1-2-è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«ã€æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="1.2 è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«ã€æ€§èƒ½æŒ‡æ ‡"></a>1.2 è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«ã€æ€§èƒ½æŒ‡æ ‡</h3><h4 id="è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"><a href="#è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«"></a>è®¡ç®—æœºç½‘ç»œçš„ç±»åˆ«</h4><ul><li><strong>æŒ‰ç…§ç½‘ç»œä½œç”¨èŒƒå›´åˆ†ç±»</strong><ul><li>å¹¿åŸŸç½‘</li><li>åŸåŸŸç½‘</li><li>å±€åŸŸç½‘</li><li>ä¸ªäººåŒºåŸŸç½‘</li></ul></li><li><strong>æŒ‰ç…§æ‹“æ‰‘ç»“æ„</strong><ul><li><strong>æ€»çº¿å‹ç»“æ„</strong> ä¼˜ç‚¹ï¼šç»“æ„ç®€å• ï¼Œç¼ºç‚¹ï¼šå•ç‚¹æ•…éšœå¯èƒ½ä¼šå½±å“å…¨ç½‘<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/e80492ca511e436baedf47b33494b0d3.png" alt="img" style="zoom:50%;" /></li><li><strong>æ˜Ÿå‹ç»“æ„</strong> ä¼˜ç‚¹ï¼šæ‰©å±•æ–¹ä¾¿ ï¼Œç¼ºç‚¹ï¼šå¯¹ä¸­å¿ƒèŠ‚ç‚¹çš„ä¾èµ–è¾ƒå¤§<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/1e1ae4975a444967b9971ba21c107462.png" alt="img" style="zoom:50%;" /></li><li><strong>æ ‘å‹ç»“æ„</strong>  ä¼˜ç‚¹ï¼šæ‰©å±•æ–¹ä¾¿ï¼Œ ç¼ºç‚¹ï¼šå¯¹éå¶å­èŠ‚ç‚¹çš„ä¾èµ–å¤§<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/6bb26f8fc2f644aeaf12a2ff7634c108.png" alt="img" style="zoom:50%;" /></li><li><strong>ç¯å‹ç»“æ„</strong> ä¼˜ç‚¹ï¼šç»“æ„ç®€å•ï¼Œæ‰©å±•æ–¹ä¾¿ï¼Œç¼ºç‚¹ï¼šå•ç‚¹æ•…éšœå¯èƒ½ä¼šå½±å“å…¨ç½‘<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/8ba52fcbfd204e61b899b7af24e22998.png" style="zoom:50%;" /></li><li><strong>ç½‘çŠ¶ç»“æ„</strong> ä¼˜ç‚¹ï¼šæ‰©å±•æ–¹ä¾¿ ï¼Œ ç¼ºç‚¹ï¼šå†—ä½™å¤ªå¤š<img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/8eb53ab535fc4258b96bdce6e2d5b6d5.png" alt="img" style="zoom:50%;" /></li></ul></li></ul><h4 id="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"><a href="#è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡" class="headerlink" title="è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡"></a>è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡</h4><ol><li><p><strong>é€Ÿç‡</strong></p><p>ä¹Ÿç§°æ•°æ®ç‡æˆ–æ¯”ç‰¹ç‡ï¼Œå…¶ä¸­$4 \times 10^{10} bit&#x2F;s$çš„æ•°æ®ç‡å°±è®°ä¸º$40 Gbit&#x2F;s$ã€‚</p></li><li><p><strong>å¸¦å®½</strong></p><p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œå¸¦å®½ç”¨æ¥è¡¨ç¤ºæŸé€šé“åœ¨ç½‘ç»œä¸­ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯â€œæœ€é«˜æ•°æ®ç‡â€ã€‚å¸¦å®½çš„å•ä½ä¹Ÿå°±æ˜¯æ•°æ®ç‡ä½å•ä½$bit&#x2F;s$</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/9c547cba9e1d4fe398aad7b7e97815ba.png" alt="img"></p></li><li><p><strong>ååé‡</strong></p><p>è¡¨ç¤ºåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„å®é™…çš„æ•°æ®é‡ã€‚ï¼ˆååé‡â‰¤å¸¦å®½ï¼ˆç½‘ç»œé¢å®šé€Ÿåº¦ï¼‰ï¼‰</p></li><li><p><strong>æ—¶å»¶</strong></p><p>ç½‘ç»œä¸­çš„æ—¶å»¶ç”±ä»¥ä¸‹å‡ ä¸ªä¸åŒçš„éƒ¨åˆ†ç»„æˆï¼š</p><p>ï¼ˆ1ï¼‰å‘é€æ—¶å»¶ï¼ˆ<del>ä¼ è¾“æ—¶å»¶</del>ï¼‰ $å‘é€æ—¶å»¶ &#x3D; \frac{æ•°æ®å¸§é•¿åº¦(bit)}{å‘é€é€Ÿç‡(bit&#x2F;s)}$</p><p>ï¼ˆ2ï¼‰ä¼ æ’­æ—¶å»¶ $ä¼ æ’­æ—¶å»¶ &#x3D; \frac{ä¿¡é“é•¿åº¦(m)}{ç”µç£æ³¢åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡(m&#x2F;s)}$</p><p>ï¼ˆ3ï¼‰å¤„ç†æ—¶å»¶ ä¸»æœºæˆ–è·¯ç”±å™¨åœ¨æ”¶åˆ°åˆ†ç»„åè¦è¯è´¹ä¸€å®šçš„æ—¶é—´è¿›è¡Œå¤„ç†</p><p>ï¼ˆ4ï¼‰æ’é˜Ÿæ—¶å»¶ åˆ†ç»„è¿›å…¥è·¯ç”±å™¨åè¦å…ˆåœ¨è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…å¤„ç†</p><p>ç½‘é€Ÿé«˜æŒ‡çš„æ˜¯å‘é€é€Ÿç‡é«˜è€Œä¸æ˜¯æŒ‡ä¼ æ’­é€Ÿç‡é«˜</p></li><li><p><strong>æ—¶å»¶å¸¦å®½ç§¯</strong></p><p>åˆç§°ä¸ºä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ï¼Œ$æ—¶å»¶å¸¦å®½ç§¯ &#x3D; ä¼ æ’­æ—¶å»¶ \times å¸¦å®½$</p></li><li><p><strong>å¾€è¿”æ—¶é—´RTT</strong></p><p>å³åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€çš„æ—¶é—´</p></li><li><p><strong>åˆ©ç”¨ç‡</strong></p><p>åˆ†ä¸ºä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ã€‚ä¿¡é“åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ã€‚å½“ç½‘ç»œçš„åˆ©ç”¨ç‡æ¥è¿‘æœ€å¤§å€¼1æ—¶ï¼Œç½‘ç»œçš„æ—¶å»¶å°±è¶‹äºæ— ç©·å¤§ã€‚</p><hr><p><strong>â€œåœ¨é«˜é€Ÿé“¾è·¯ï¼ˆæˆ–é«˜å¸¦å®½é“¾è·¯ï¼‰ä¸Šï¼Œæ¯”ç‰¹ä¼šä¼ é€å¾—æ›´å¿«äº›â€ï¼ˆÃ—ï¼‰</strong></p></li></ol><p>â€‹å¯¹äºé«˜é€Ÿç½‘ç»œé“¾è·¯ï¼Œæˆ‘ä»¬æé«˜çš„ä»…ä»…æ˜¯æ•°æ®çš„å‘é€é€Ÿç‡è€Œä¸æ˜¯æ¯”ç‰¹åœ¨é“¾è·¯ä¸Šçš„ä¼ æ’­é€Ÿç‡ã€‚æé«˜é“¾è·¯å¸¦å®½å‡å°äº†æ•°æ®çš„å‘é€æ—¶å»¶ã€‚ å®½å¸¦é“¾è·¯å’Œçª„å¸¦é“¾è·¯ä¸Šæ¯”ç‰¹çš„ä¼ æ’­é€Ÿç‡æ˜¯ä¸€æ ·çš„ã€‚</p><hr><h3 id="1-3-è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„"><a href="#1-3-è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„" class="headerlink" title="1.3 è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„"></a>1.3 è®¡ç®—æœºç½‘ç»œçš„ä½“ç³»ç»“æ„</h3><h4 id="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"><a href="#è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„" class="headerlink" title="è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„"></a>è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„</h4><p>â€‹å¼€æ”¾ç³»ç»Ÿäº’è¿åŸºæœ¬å‚è€ƒæ¨¡å‹OSI&#x2F;RM</p><hr><h4 id="ç½‘ç»œåè®®ä¸‰è¦ç´ "><a href="#ç½‘ç»œåè®®ä¸‰è¦ç´ " class="headerlink" title="ç½‘ç»œåè®®ä¸‰è¦ç´ "></a><strong>ç½‘ç»œåè®®ä¸‰è¦ç´ </strong></h4><ul><li>è¯­æ³•ï¼šæ•°æ®ä¸æ§åˆ¶ä¿¡æ¯çš„ç»“æ„æˆ–æ ¼å¼ ã€‚</li><li>è¯­ä¹‰ï¼šéœ€è¦å‘å‡ºä½•ç§æ§åˆ¶ä¿¡æ¯ï¼Œå®Œæˆä½•ç§åŠ¨ä½œä»¥åŠåšå‡ºä½•ç§å“åº”ã€‚ </li><li>åŒæ­¥ï¼šäº‹ä»¶å®ç°é¡ºåºçš„è¯¦ç»†è¯´æ˜ã€‚</li></ul><hr><h4 id="ç½‘ç»œä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ"><a href="#ç½‘ç»œä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ" class="headerlink" title="ç½‘ç»œä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ"></a><strong>ç½‘ç»œä¸ºä»€ä¹ˆè¦åˆ†å±‚ï¼Ÿ</strong></h4><ul><li>è§£å†³ç½‘ç»œçš„å¼‚æ„æ€§ã€å¤æ‚æ€§ï¼›</li><li>è¦å®ç°äº’æ“ä½œæ€§ï¼Œä½¿ç”¨ä¸åŒåª’ä»‹è¿æ¥èµ·æ¥çš„ä¸åŒè®¾å¤‡å’Œç½‘ç»œç³»ç»Ÿåœ¨ä¸åŒçš„åº”ç”¨ç¯å¢ƒä¸‹å®ç°äº’æ“ä½œæ€§ï¼Œå¹¶æ»¡è¶³å„ç§ä¸šåŠ¡çš„éœ€æ±‚ã€‚è¥é€ ä¸€ç§â€œç”Ÿå­˜ç©ºé—´â€â€”â€”ä»»ä½•å‚å•†çš„ä»»ä½•äº§å“ã€ä»¥åŠä»»ä½•æŠ€æœ¯åªè¦éµå®ˆè¿™ä¸ªç©ºé—´çš„è¡Œä¸ºè§„åˆ™ï¼Œå°±èƒ½å¤Ÿåœ¨å…¶ä¸­ç”Ÿå­˜å¹¶å‘å±•ã€‚</li><li>æŠŠå¤æ‚çš„ç½‘ç»œäº’è”é—®é¢˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªè¾ƒå°çš„ã€å•ä¸€çš„é—®é¢˜ï¼Œåœ¨ä¸åŒå±‚ä¸Šäºˆä»¥è§£å†³.</li><li>å±‚æ¬¡ç»“æ„æ–¹æ³•åŒ…æ‹¬ä¸‰ä¸ªå†…å®¹ï¼šåˆ†å±‚åŠæ¯å±‚åŠŸèƒ½ï¼ŒæœåŠ¡ä¸å±‚é—´æ¥å£ï¼Œåè®®ã€‚</li><li><strong>å¤šå±‚é€šä¿¡çš„å®è´¨</strong>ï¼š<ul><li>å¯¹ç­‰å±‚å®ä½“ä¹‹é—´è™šæ‹Ÿé€šä¿¡;</li><li>ä¸‹å±‚å‘ä¸Šå±‚æä¾›æœåŠ¡;</li><li>å®é™…é€šä¿¡åœ¨æœ€åº•å±‚å®Œæˆ;</li></ul></li><li>å¥½å¤„ï¼š å„å±‚ä¹‹é—´æ˜¯ç‹¬ç«‹çš„;çµæ´»æ€§å¥½;ç»“æ„ä¸Šå¯åˆ†å‰²å¼€;æ˜“äºå®ç°å’Œç»´æŠ¤;èƒ½ä¿ƒè¿›æ ‡å‡†åŒ–å·¥ä½œã€‚</li></ul><hr><h4 id="ä¸‰ç§åˆ†å±‚ç»“æ„ä½“ç³»"><a href="#ä¸‰ç§åˆ†å±‚ç»“æ„ä½“ç³»" class="headerlink" title="ä¸‰ç§åˆ†å±‚ç»“æ„ä½“ç³»"></a>ä¸‰ç§åˆ†å±‚ç»“æ„ä½“ç³»</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/a6364c11eb984d059ed975b7199fde7d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹OSIæ¨¡å‹å…±ä¸ƒå±‚åè®®ä½“ç³»ç»“æ„ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼šåº”ç”¨å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œä¼šè¯å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚</p><p>â€‹TCP&#x2F;IPæ¨¡å‹å…±å››å±‚åè®®ä½“ç³»ç»“æ„ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼šåº”ç”¨å±‚ï¼Œè¿è¾“å±‚ï¼Œç½‘é™…å±‚ï¼Œç½‘ç»œæ¥å£å±‚</p><hr><h4 id="å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„"><a href="#å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„" class="headerlink" title="å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„"></a>å…·æœ‰äº”å±‚åè®®çš„ä½“ç³»ç»“æ„</h4><p><strong>åè®®æ•°æ®å•å…ƒPDU</strong></p><p>â€‹OSI å‚è€ƒæ¨¡å‹æŠŠ<strong>å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®å•ä½</strong> ç§°ä¸ºè¯¥å±‚çš„ åè®®æ•°æ®å•å…ƒ PDU (Protocol Data Unit)ã€‚</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/6cd69a79412e409da8e371a08ace9fd8.png" alt="img"></p><ol><li><p>åº”ç”¨å±‚</p><p>äº¤äº’çš„æ•°æ®å•å…ƒç§°ä¸º&#x3D;&#x3D;æŠ¥æ–‡&#x3D;&#x3D;</p></li><li><p>è¿è¾“å±‚</p><p>å…¶æ•°æ®ä¼ è¾“çš„å•ä½æ˜¯&#x3D;&#x3D;ç”¨æˆ·æ•°æ®æŠ¥&#x3D;&#x3D;</p></li><li><p>ç½‘ç»œå±‚</p><p>ä¼ è¾“çš„æ•°æ®å•å…ƒæ˜¯&#x3D;&#x3D;åˆ†ç»„&#x3D;&#x3D;ï¼Œä¹Ÿç§°IPæ•°æ®æŠ¥</p><p>è™šç”µè·¯æœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„åŒºåˆ«<br>è™šç”µè·¯æœåŠ¡åœ¨ä¼ é€æ•°æ®ä¹‹å‰ï¼Œé¦–å…ˆé€šè¿‡è™šå‘¼å«å»ºç«‹ä¸€æ¡è™šç”µè·¯ï¼›æ‰€æœ‰åˆ†ç»„æ²¿åŒä¸€æ¡è·¯å¾„ä¼ é€ï¼Œå¹¶ä¸”æŒ‰å‘å‡ºé¡ºåºåˆ°è¾¾ï¼Œç±»ä¼¼ç”µè·¯äº¤æ¢ï¼Œå»ºç«‹è¿æ¥åï¼Œåˆ†ç»„ä¸­åªéœ€æºå¸¦è¿æ¥æ ‡è¯†ï¼Œå»ºç«‹è¿æ¥æ—¶å¯åå•†å‚æ•°ã€QoSã€å¼€é”€ç­‰<br>æ•°æ®æŠ¥ï¼šæ¯ä¸ªåˆ†ç»„å•ç‹¬ä¼ é€ï¼Œç½‘ç»œä¸ºæ¯ä¸ªåˆ†ç»„å•ç‹¬é€‰è·¯ï¼›è·¯å¾„å¯èƒ½ä¸åŒï¼›åˆ†ç»„åˆ°è¾¾é¡ºåºå¯èƒ½ä¸å‘å‡ºé¡ºåºä¸åŒï¼›åˆ†ç»„ä¸­éœ€è¦æºå¸¦å®Œæ•´çš„ç›®çš„åœ°å€ã€‚</p></li><li><p>æ•°æ®é“¾è·¯å±‚</p><p>æ•°æ®å•ä½æ˜¯&#x3D;&#x3D;å¸§&#x3D;&#x3D;</p><p>æ•°æ®å¸§åœ¨é“¾è·¯ä¸Šä¼ è¾“æ—¶æœ‰å“ªäº›å‡ºé”™æƒ…å†µï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ&#x3D;&#x3D;å‡ºé”™é‡ä¼ ï¼Œè¶…æ—¶é‡ä¼ &#x3D;&#x3D;</p></li><li><p>ç‰©ç†å±‚</p><p>æ•°æ®å•ä½æ˜¯&#x3D;&#x3D;æ¯”ç‰¹&#x3D;&#x3D;</p><p><strong>æ¯å±‚çš„ä»»åŠ¡</strong></p><table><thead><tr><th>å±‚</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚</td><td>é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨</td></tr><tr><td>è¿è¾“å±‚</td><td>è´Ÿè´£å‘ä¸¤å°ä¸»æœºä¸­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„æ•°æ®ä¼ è¾“æœåŠ¡</td></tr><tr><td>ç½‘ç»œå±‚</td><td>è´Ÿè´£ä¸ºåˆ†ç»„äº¤æ¢ç½‘ä¸Šçš„ä¸åŒä¸»æœºæä¾›é€šä¿¡æœåŠ¡</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚</td><td>åœ¨é“¾è·¯ä¸Šæ— å·®é”™çš„ä¼ é€å¸§</td></tr><tr><td>ç‰©ç†å±‚</td><td>åœ¨ç‰©ç†åª’ä½“ä¸Šé€æ˜åœ°ä¼ è¾“æ¯”ç‰¹æµ(Bit)</td></tr></tbody></table></li></ol><hr><h4 id="è™šç”µè·¯æœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„åŒºåˆ«"><a href="#è™šç”µè·¯æœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„åŒºåˆ«" class="headerlink" title="è™šç”µè·¯æœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„åŒºåˆ«"></a><strong>è™šç”µè·¯æœåŠ¡å’Œæ•°æ®æŠ¥æœåŠ¡çš„åŒºåˆ«</strong></h4><ul><li>è™šç”µè·¯æœåŠ¡åœ¨ä¼ é€æ•°æ®ä¹‹å‰ï¼Œé¦–å…ˆé€šè¿‡è™šå‘¼å«å»ºç«‹â¼€æ¡è™šç”µè·¯ï¼›æ‰€æœ‰åˆ†ç»„æ²¿åŒâ¼€æ¡è·¯å¾„ä¼ é€ï¼Œå¹¶ä¸”æŒ‰å‘å‡ºé¡ºåºåˆ°è¾¾ï¼Œç±»ä¼¼ç”µè·¯äº¤æ¢ï¼Œå»ºç«‹è¿æ¥åï¼Œåˆ†ç»„ä¸­åªéœ€æºå¸¦è¿æ¥æ ‡è¯†ï¼Œå»ºç«‹è¿æ¥æ—¶å¯åå•†å‚æ•°ã€QoSã€å¼€é”€ç­‰</li><li>æ•°æ®æŠ¥ï¼šæ¯ä¸ªåˆ†ç»„å•ç‹¬ä¼ é€ï¼Œç½‘ç»œä¸ºæ¯ä¸ªåˆ†ç»„å•ç‹¬é€‰è·¯ï¼›è·¯å¾„å¯èƒ½ä¸åŒï¼›åˆ†ç»„åˆ°è¾¾é¡ºåºå¯èƒ½ä¸å‘å‡ºé¡ºåºä¸åŒï¼›åˆ†ç»„ä¸­éœ€è¦æºå¸¦å®Œæ•´çš„â½¬çš„åœ°å€ã€‚</li></ul><hr><h4 id="åè®®ä¸æœåŠ¡æ¦‚å¿µä¸Šçš„åŒºåˆ«"><a href="#åè®®ä¸æœåŠ¡æ¦‚å¿µä¸Šçš„åŒºåˆ«" class="headerlink" title="åè®®ä¸æœåŠ¡æ¦‚å¿µä¸Šçš„åŒºåˆ«"></a>åè®®ä¸æœåŠ¡æ¦‚å¿µä¸Šçš„åŒºåˆ«</h4><ul><li>æœ¬å±‚çš„æœåŠ¡ç”¨æˆ· åªèƒ½çœ‹è§æœåŠ¡ è€Œæ— æ³•çœ‹è§ä¸‹é¢çš„ åè®®ã€‚å³ä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„æœåŠ¡ç”¨æˆ·æ˜¯&#x3D;&#x3D;é€æ˜&#x3D;&#x3D;çš„ã€‚</li><li>åè®®æ˜¯&#x3D;&#x3D;â€œæ°´å¹³çš„ â€&#x3D;&#x3D;ï¼Œå³åè®®æ˜¯æ§åˆ¶å¯¹ç­‰å®ä½“ä¹‹é—´ é€šä¿¡çš„è§„åˆ™ã€‚</li><li>æœåŠ¡æ˜¯&#x3D;&#x3D;â€œå‚ç›´çš„ â€&#x3D;&#x3D;ï¼Œå³æœåŠ¡æ˜¯ç”±ä¸‹å±‚å‘ä¸Šå±‚é€šè¿‡ å±‚é—´æ¥å£æä¾›çš„ã€‚</li><li>ä¸Šå±‚ä½¿ç”¨ æœåŠ¡åŸè¯­ è·å¾—ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ã€‚</li></ul><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/a3cc6b9dea764ae38137d2f119b7bd7a.png" alt="img"></p><hr><h3 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><h4 id="è®¡ç®—æ¨¡æ¿"><a href="#è®¡ç®—æ¨¡æ¿" class="headerlink" title="è®¡ç®—æ¨¡æ¿"></a>è®¡ç®—æ¨¡æ¿</h4><p>â€‹åˆ†æ¸…æ¥šï¼Œkï¼ŒMï¼ŒGçš„åº•æ•°æ˜¯10è¿˜æ˜¯2<br>â€‹10çš„è¯ï¼Œ$10^3$,$10^6$,$10^9$ï¼ˆæè¿°æ•°æ®ä¼ è¾“é€Ÿç‡ï¼‰<br>â€‹2çš„è¯ï¼Œ$2^{10},2^{20},2^{30}$(æè¿°æ•°çš„è®¡ç®—ï¼Œé€šå¸¸åé¢è·ŸBï¼Œè€Œ1B&#x3D;8bit)</p><p>â€‹åœ¨è¡¨ç¤ºçº¯çš„æ•°æ®çš„é‡çš„æ—¶å€™ï¼Œä»¥2ä¸ºåº•æ•°ï¼Œ10ï¼Œ20ï¼Œ30ä¸ºæŒ‡æ•°<br>â€‹åœ¨è¡¨ç¤ºæ•°æ®ä¼ è¾“é€Ÿç‡çš„æ—¶å€™ï¼Œä»¥10ä¸ºåº•æ•°ï¼Œ3ï¼Œ6ï¼Œ9ä¸ºæŒ‡æ•°</p><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/29ea1669f6994c58867a4a3c653cfec3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>â€‹å¯¹äºnä¸ªåˆ†ç»„ï¼Œmæ®µé“¾è·¯<br>$$<br>æ€»æ—¶å»¶&#x3D;nä¸ªåˆ†ç»„çš„å‘é€æ—¶å»¶+(m-1)\times1ä¸ªåˆ†ç»„çš„å‘é€æ—¶å»¶+m\times1æ®µé“¾è·¯çš„ä¼ æ’­æ—¶å»¶<br>$$</p><h4 id="ä¾‹é¢˜1"><a href="#ä¾‹é¢˜1" class="headerlink" title="ä¾‹é¢˜1"></a>ä¾‹é¢˜1</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/47178ab6ff5646ea9b70e3e56f7b5ae1.png" alt="img"></p><h4 id="ä¾‹é¢˜2"><a href="#ä¾‹é¢˜2" class="headerlink" title="ä¾‹é¢˜2"></a>ä¾‹é¢˜2</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/8ab97ebd7de14d8d83efa322d2053e85.png" alt="img"></p><h4 id="ä¾‹é¢˜3"><a href="#ä¾‹é¢˜3" class="headerlink" title="ä¾‹é¢˜3"></a>ä¾‹é¢˜3</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/3eea7bcbf0f44b4bb066ffa43345d73c.png" alt="img"></p><h4 id="ä¾‹é¢˜4"><a href="#ä¾‹é¢˜4" class="headerlink" title="ä¾‹é¢˜4"></a>ä¾‹é¢˜4</h4><p><img src="https://nuaapeter.oss-cn-nanjing.aliyuncs.com/81bdb0bbca0c4c05bfe157bf5c2a62ef.png" alt="img"></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºç½‘ç»œ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>notes</tag>
      
      <tag>network</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/11/26/hello-world/"/>
    <url>/2022/11/26/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
